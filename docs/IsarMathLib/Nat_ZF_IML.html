<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Nat_ZF_IML</title>
</head>


<body>
<div class="head">
<h1>Theory Nat_ZF_IML</h1>
</div>

<pre class="source"><span class="comment1">(* 
    This file is a part of IsarMathLib - 
    a library of formalized mathematics for Isabelle/Isar.

    Copyright (C) 2005 - 2019  Slawomir Kolodynski

    This program is free software Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED 
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES LOSS OF USE, DATA, OR PROFITS 
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Natural numbers in IsarMathLib›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Nat_ZF_IML <span class="keyword2"><span class="keyword">imports</span></span> <a href="../../ZF/ZF/Arith.html">ZF.Arith</a>

<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The  ZF set theory constructs natural numbers from the empty set
  and the notion of a one-element set. Namely, zero of natural numbers
  is defined as the empty set. For each natural number $n$ the next natural
  number is defined as $n\cup \{n\}$. With this definition for every
  non-zero natural number we get the identity $n = \{0,1,2,..,n-1\}$.
  It is good to remember that when we see an expression like
  $f: n \rightarrow X$. Also, with this definition 
  the relation "less or equal than" becomes "$\subseteq$" and 
  the relation "less than" becomes "$\in$".
›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Induction›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The induction lemmas in the standard Isabelle's Nat.thy file like 
  for example <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>nat_induct›</span></span></span></span> require the induction step to 
  be a higher order 
  statement (the one that uses the $\Longrightarrow$ sign). I found it 
  difficult to apply from Isar, which is perhaps more of an indication of 
  my Isar skills than anything else. Anyway, here we provide a first order
  version that is easier to reference in Isar declarative style proofs.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The next theorem is a version of induction on natural numbers
  that I was thought in school.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> ind_on_nat<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span><span class="main">∈</span>nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">k</span><span class="main">∈</span>nat<span class="main">.</span> <span class="free">P</span><span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">⟶</span><span class="free">P</span><span class="main">(</span>succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">note</span></span> A1 A2
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span>succ<span class="main">(</span><span class="skolem">x</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> nat_induct<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A nonzero natural number has a predecessor.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Nat_ZF_1_L3<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span><span class="main">≠</span><span class="main">0</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">k</span><span class="main">∈</span>nat<span class="main">.</span> <span class="free">n</span> <span class="main">=</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> <span class="main">{</span><span class="main">0</span><span class="main">}</span> <span class="main">∪</span> <span class="main">{</span>succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">k</span><span class="main">∈</span>nat<span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> nat_unfold <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹What is <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>succ›</span></span></span></span>, anyway?›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> succ_explained<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">=</span> <span class="free">n</span> <span class="main">∪</span> <span class="main">{</span><span class="free">n</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> succ_iff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Empty set is an element of every natural number which is not zero.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> empty_in_every_succ<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">note</span></span> A1
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">k</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span> <span class="main">⊆</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">k</span> <span class="main">∈</span> nat<span class="main">.</span> <span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ind_on_nat<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>  

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If one natural number is less than another then their successors
  are in the same relation.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> succ_ineq<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">n</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">note</span></span> A1
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">k</span> <span class="main">∈</span> <span class="main">0</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">k</span> <span class="keyword3"><span class="command">assume</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span><span class="skolem">k</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> <span class="skolem">k</span> <span class="main">∨</span> <span class="skolem">i</span> <span class="main">=</span> <span class="skolem">k</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span><span class="main">∈</span><span class="skolem">k</span>"</span></span>
	<span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="skolem">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
	<span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="skolem">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">=</span> <span class="skolem">k</span>"</span></span>
	<span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="skolem">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="skolem">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">k</span> <span class="main">∈</span> nat<span class="main">.</span> 
      <span class="main">(</span> <span class="main">(</span><span class="main">∀</span><span class="bound">i</span><span class="main">∈</span><span class="bound">k</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">n</span><span class="main">.</span> succ<span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ind_on_nat<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹For natural numbers if $k\subseteq n$ the similar holds for 
  their successors.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> succ_subset<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">k</span><span class="main">⊆</span><span class="free">n</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">k</span><span class="main">)</span> <span class="main">⊆</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span> <span class="quoted"><span class="quoted">"Ord<span class="main">(</span><span class="free">k</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"Ord<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> nat_into_Ord <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">k</span><span class="main">)</span> <span class="main">≤</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> subset_imp_le <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">k</span><span class="main">)</span> <span class="main">⊆</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> le_imp_subset
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹For any two natural numbers one of them is contained in the other.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nat_incl_total<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">j</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">⊆</span> <span class="free">j</span> <span class="main">∨</span> <span class="free">j</span> <span class="main">⊆</span> <span class="free">i</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span> <span class="quoted"><span class="quoted">"Ord<span class="main">(</span><span class="free">i</span><span class="main">)</span>"</span></span>   <span class="quoted"><span class="quoted">"Ord<span class="main">(</span><span class="free">j</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> nat_into_Ord <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span><span class="main">∈</span><span class="free">j</span> <span class="main">∨</span> <span class="free">i</span><span class="main">=</span><span class="free">j</span> <span class="main">∨</span> <span class="free">j</span><span class="main">∈</span><span class="free">i</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ord_linear
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span><span class="main">∈</span><span class="free">j</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> T <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span><span class="main">⊆</span><span class="free">j</span> <span class="main">∨</span> <span class="free">j</span><span class="main">⊆</span><span class="free">i</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> lt_def leI le_imp_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span><span class="main">=</span><span class="free">j</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span><span class="main">⊆</span><span class="free">j</span> <span class="main">∨</span> <span class="free">j</span><span class="main">⊆</span><span class="free">i</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">j</span><span class="main">∈</span><span class="free">i</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> T <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span><span class="main">⊆</span><span class="free">j</span> <span class="main">∨</span> <span class="free">j</span><span class="main">⊆</span><span class="free">i</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> lt_def leI  le_imp_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">⊆</span> <span class="free">j</span> <span class="main">∨</span> <span class="free">j</span> <span class="main">⊆</span> <span class="free">i</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The set of natural numbers is the union of all successors of natural
  numbers.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nat_union_succ<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"nat <span class="main">=</span> <span class="main">(</span><span class="main">⋃</span><span class="bound">n</span> <span class="main">∈</span> nat<span class="main">.</span> succ<span class="main">(</span><span class="bound">n</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"nat <span class="main">⊆</span> <span class="main">(</span><span class="main">⋃</span><span class="bound">n</span> <span class="main">∈</span> nat<span class="main">.</span> succ<span class="main">(</span><span class="bound">n</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">k</span> <span class="keyword3"><span class="command">assume</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">k</span> <span class="main">∈</span> <span class="main">(</span><span class="main">⋃</span><span class="bound">n</span> <span class="main">∈</span> nat<span class="main">.</span> succ<span class="main">(</span><span class="bound">n</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">where</span></span> T<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">k</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">n</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">k</span> <span class="main">≤</span> <span class="skolem">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nat_into_Ord lt_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> T <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> le_in_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="bound">n</span> <span class="main">∈</span> nat<span class="main">.</span> succ<span class="main">(</span><span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> nat"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Successors of natural numbers are subsets of the 
  set of natural numbers.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> succnat_subset_nat<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⊆</span> nat"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">(</span><span class="main">⋃</span><span class="bound">n</span> <span class="main">∈</span> nat<span class="main">.</span> succ<span class="main">(</span><span class="bound">n</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⊆</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> nat_union_succ <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Element of a natural number is a natural number.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> elem_nat_is_nat<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">k</span><span class="main">∈</span><span class="free">n</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">&lt;</span> <span class="free">n</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">≤</span> <span class="free">n</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">k</span><span class="main">,</span><span class="free">n</span><span class="main">⟩</span> <span class="main">∈</span> Le"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">&lt;</span> <span class="free">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nat_into_Ord lt_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> lt_nat_in_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">k</span> <span class="main">&lt;</span> <span class="free">n</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">≤</span> <span class="free">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> leI <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="quoted"><span class="quoted">‹<span class="free">k</span> <span class="main">∈</span> nat›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">k</span><span class="main">,</span><span class="free">n</span><span class="main">⟩</span> <span class="main">∈</span> Le"</span></span> <span class="keyword1"><span class="command">using</span></span> Le_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(*text{*Element of a natural number is less or equal than 
  the number. *}

lemma elem_nat_is_Le: assumes A1: "n ∈ nat"  and A2: "k∈n"
  shows "k ≤ n" and "⟨k,n⟩ ∈ Le"
proof -
  from A1 A2 have "k &lt; n" 
    using elem_nat_is_nat by simp
    and "k ∈ nat"
    using elem_nat_is_nat by auto*)</span>
  


<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The set of natural numbers is the union of its elements.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nat_union_nat<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"nat <span class="main">=</span> <span class="main">⋃</span> nat"</span></span>
  <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A natural number is a subset of the set of natural numbers.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nat_subset_nat<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> nat"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> <span class="main">⋃</span> nat"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> nat_union_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Adding natural numbers does not decrease what we add to.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> add_nat_le<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">≤</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> <span class="free">k</span> <span class="main">#+</span> <span class="free">n</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">≤</span> <span class="free">n</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">≤</span> <span class="free">k</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>
    <span class="keyword1"><span class="command">using</span></span> nat_le_refl nat_0_le <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">#+</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> add_le_mono<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">≤</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> add_0_right <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> le_imp_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> <span class="free">k</span> <span class="main">#+</span> <span class="free">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> add_commute <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Result of adding an element of $k$ is smaller than of adding $k$.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> add_lt_mono<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">j</span><span class="main">∈</span><span class="free">k</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">j</span><span class="main">)</span> <span class="main">&lt;</span> <span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">)</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">j</span><span class="main">)</span> <span class="main">∈</span> <span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">j</span> <span class="main">&lt;</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‹<span class="free">k</span> <span class="main">∈</span> nat›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">j</span><span class="main">)</span> <span class="main">&lt;</span> <span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">)</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">j</span><span class="main">)</span> <span class="main">∈</span> <span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> add_lt_mono2 ltD <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A technical lemma about a decomposition of a sum of two natural
  numbers: if a number $i$ is from $m + n$ then it is either from $m$
  or can be written as a sum of $m$ and a number from $n$. 
  The proof by induction w.r.t. to $m$ seems to be a bit heavy-handed, but I could
  not figure out how to do this directly from results from standard Isabelle/ZF.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nat_sum_decomp<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="free">n</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> <span class="free">n</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">note</span></span> A1
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="main">0</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> <span class="main">0</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> add_0_right <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">k</span><span class="main">∈</span>nat<span class="main">.</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">k</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> <span class="bound">k</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">k</span> <span class="keyword3"><span class="command">assume</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">k</span> <span class="main">∈</span> nat"</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> A4<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="skolem">k</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> <span class="skolem">k</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span>
	  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span>  <span class="free">m</span> <span class="main">#+</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span>"</span></span>
	    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="skolem">k</span> <span class="main">∨</span> <span class="skolem">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="skolem">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> add_succ_right
	      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
	    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A4 A3 <span class="keyword1"><span class="command">have</span></span>
	      <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="skolem">k</span> <span class="main">⟶</span> <span class="skolem">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> <span class="skolem">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span>
	      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
	    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> <span class="skolem">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span>
	      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
	  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span>
	    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="skolem">k</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> <span class="skolem">k</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span>
	  <span class="main">(</span><span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> succ<span class="main">(</span><span class="skolem">k</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span><span class="main">)</span>"</span></span>
	<span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">#+</span> <span class="free">n</span><span class="main">.</span> <span class="bound">i</span> <span class="main">∈</span> <span class="free">m</span> <span class="main">∨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">j</span> <span class="main">∈</span> <span class="free">n</span><span class="main">.</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">m</span> <span class="main">#+</span> <span class="bound">j</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ind_on_nat<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A variant of induction useful for finite sequences.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> fin_nat_ind<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A4<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">j</span><span class="main">∈</span><span class="free">n</span><span class="main">.</span> <span class="free">P</span><span class="main">(</span><span class="bound">j</span><span class="main">)</span>  <span class="main">⟶</span> <span class="free">P</span><span class="main">(</span>succ<span class="main">(</span><span class="bound">j</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="free">k</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> <span class="free">n</span> <span class="main">∨</span> <span class="free">k</span><span class="main">=</span><span class="free">n</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⟶</span> <span class="free">P</span><span class="main">(</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 A4 <span class="keyword1"><span class="command">have</span></span>
    <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">k</span> <span class="main">∈</span> nat<span class="main">.</span> <span class="main">(</span><span class="bound">k</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⟶</span> <span class="free">P</span><span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span>succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⟶</span> <span class="free">P</span><span class="main">(</span>succ<span class="main">(</span><span class="bound">k</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> nat_into_Ord Ord_succ_mem_iff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">⟶</span> <span class="free">P</span><span class="main">(</span><span class="free">k</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ind_on_nat<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">(</span><span class="free">k</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Some properties of positive natural numbers.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> succ_plus<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">j</span><span class="main">)</span> <span class="main">∈</span> nat"</span></span> 
  <span class="quoted"><span class="quoted">"succ<span class="main">(</span><span class="free">n</span><span class="main">)</span> <span class="main">#+</span> succ<span class="main">(</span><span class="free">j</span><span class="main">)</span> <span class="main">=</span> succ<span class="main">(</span>succ<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">j</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Intervals›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this section we consider intervals of natural numbers i.e. sets
  of the form $\{n+j : j \in 0..k-1\}$.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The interval is determined
  by two parameters: starting point and length. Recall that in standard 
  Isabelle's <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Arith.thy›</span></span></span></span> the symbol <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>#+›</span></span></span></span> is defined
  as the sum of natural numbers.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>

  <span class="quoted"><span class="quoted">"<span class="free">NatInterval</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">k</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">{</span><span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">#+</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">k</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Subtracting the beginning af the interval results in a number from
  the length of the interval. It may sound weird, but note that the length of
  such interval is a natural number, hence a set.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> inter_diff_in_len<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">∈</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">#-</span> <span class="free">n</span> <span class="main">∈</span> <span class="free">k</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">=</span> <span class="free">n</span> <span class="main">#+</span> <span class="skolem">j</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> II<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span> <span class="main">∈</span> <span class="free">k</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> NatInterval_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> A1 II <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span> <span class="main">∈</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">#-</span> <span class="free">n</span> <span class="main">=</span> natify<span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> diff_add_inverse
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">i</span> <span class="main">#-</span> <span class="free">n</span> <span class="main">=</span> <span class="skolem">j</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> II <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Intervals don't overlap with their starting point and 
  the union of an interval with its starting point is the sum of the starting
  point and the length of the interval.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> length_start_decomp<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span>  A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∩</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span> <span class="main">=</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> <span class="free">n</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">=</span> <span class="free">n</span> <span class="main">#+</span> <span class="skolem">j</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> II<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span> <span class="main">∈</span> <span class="free">k</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> NatInterval_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> II <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span> <span class="main">∈</span> nat"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> A1 I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">≤</span> <span class="skolem">i</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> add_nat_le <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">&lt;</span> <span class="free">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">using</span></span> le_imp_not_lt <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∩</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">⊆</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> add_nat_le <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> III<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">=</span> <span class="free">n</span> <span class="main">#+</span> <span class="skolem">j</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> IV<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span> <span class="main">∈</span> <span class="free">k</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> NatInterval_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span> <span class="main">&lt;</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> elem_nat_is_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> A1 III <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">i</span> <span class="main">∈</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> add_lt_mono2 ltD
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">#+</span> <span class="free">k</span> <span class="main">⊆</span> <span class="free">n</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> nat_sum_decomp NatInterval_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span> <span class="main">=</span> <span class="free">n</span> <span class="main">#+</span> <span class="free">k</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Sme properties of three adjacent intervals.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> adjacent_intervals3<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">k</span> <span class="main">∈</span> nat"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">m</span> <span class="main">∈</span> nat"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">#+</span> <span class="free">k</span> <span class="main">#+</span> <span class="free">m</span> <span class="main">=</span> <span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">)</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">,</span><span class="free">m</span><span class="main">)</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">#+</span> <span class="free">k</span> <span class="main">#+</span> <span class="free">m</span> <span class="main">=</span> <span class="free">n</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span> <span class="main">#+</span>  <span class="free">m</span><span class="main">)</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">n</span> <span class="main">#+</span> <span class="free">k</span> <span class="main">#+</span> <span class="free">m</span> <span class="main">=</span> <span class="free">n</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span><span class="main">,</span><span class="free">k</span><span class="main">)</span> <span class="main">∪</span> NatInterval<span class="main">(</span><span class="free">n</span> <span class="main">#+</span> <span class="free">k</span><span class="main">,</span><span class="free">m</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms add_assoc length_start_decomp <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>