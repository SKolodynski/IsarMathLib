<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Topology_ZF_properties</title>
</head>


<body>
<div class="head">
<h1>Theory Topology_ZF_properties</h1>
</div>

<pre class="source"><span class="comment1">(* 
    This file is a part of IsarMathLib - 
    a library of formalized mathematics written for Isabelle/Isar.

    Copyright (C) 2012 Daniel de la Concepcion

    This program is free software; Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED 
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. *)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Properties in Topology›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Topology_ZF_properties <span class="keyword2"><span class="keyword">imports</span></span> <a href="Topology_ZF_examples.html">Topology_ZF_examples</a> <a href="Topology_ZF_examples_1.html">Topology_ZF_examples_1</a>

<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹
  This theory deals with topological properties which make use of cardinals.
›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Properties of compactness›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹It is already defined what is a compact topological space, but the is a
generalization which may be useful sometimes.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsCompactOfCard</span> <span class="main">(</span><span class="quoted">"_<span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>_ <span class="keyword1">{in}</span>_"</span> 90<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">K</span></span></span><span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">compact</span></span> <span class="keyword1"><span class="free">of</span></span> <span class="keyword1"><span class="free">cardinal}</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="keyword1"><span class="free">{in}</span></span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">≡</span> <span class="main">(</span>Card<span class="main">(</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">K</span></span></span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> 
  <span class="main">(</span><span class="main">∀</span> <span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">K</span></span></span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">N</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">K</span></span></span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The usual compact property is the one defined over the cardinal
of the natural numbers.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Compact_is_card_nat<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">in}</span><span class="free">T</span> <span class="main">⟷</span> <span class="main">(</span><span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> nat <span class="keyword1">{in}</span><span class="free">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">in}</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> sub<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> reg<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span> <span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">N</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsCompact_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> reg <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">N</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">∈</span>FinPow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">N</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Finite<span class="main">(</span><span class="skolem">N</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">n</span><span class="main">∈</span>nat"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">N</span> <span class="main">≈</span><span class="skolem">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Finite_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> A<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span><span class="main">≺</span>nat"</span></span> <span class="keyword1"><span class="command">using</span></span> n_lesspoll_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">≲</span>nat"</span></span> <span class="keyword1"><span class="command">using</span></span> lesspoll_def eq_lepoll_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span> <span class="main">≈</span>nat"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"nat <span class="main">≈</span> <span class="skolem">N</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
        <span class="keyword1"><span class="command">with</span></span> A<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"nat <span class="main">≈</span><span class="skolem">n</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">n</span> <span class="main">≈</span>nat"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span><span class="main">≺</span>nat›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> lesspoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">~</span><span class="main">(</span><span class="skolem">N</span> <span class="main">≈</span>nat<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> calculation <span class="quoted"><span class="quoted">‹<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">N</span>›</span></span><span class="quoted"><span class="quoted">‹<span class="skolem">N</span><span class="main">∈</span>FinPow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">≺</span>nat"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">N</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lesspoll_def
        FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span> <span class="bound">N</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span>nat<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> sub <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> nat <span class="keyword1">{in}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsCompactOfCard_def Card_nat <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> nat <span class="keyword1">{in}</span><span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> sub<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> reg<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span> <span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">N</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span>nat<span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> reg <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span> <span class="bound">N</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span>nat<span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">N</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">N</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">≺</span>nat"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">∈</span>FinPow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">N</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lesspoll_nat_is_Finite FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>FinPow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> sub <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">in}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsCompact_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Another property of this kind widely used is the Lindeloef property;
it is the one on the successor of the natural numbers.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsLindeloef</span>  <span class="main">(</span><span class="quoted">"_<span class="keyword1">{is</span> <span class="keyword1">lindeloef</span> <span class="keyword1">in}</span>_"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">K</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">lindeloef</span></span> <span class="keyword1"><span class="free">in}</span></span> <span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">≡</span><span class="free"><span class="bound"><span class="entity">K</span></span></span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span>nat<span class="main">)</span><span class="keyword1">{in}</span><span class="free"><span class="bound"><span class="entity">T</span></span></span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹It would be natural to think that every countable set with any topology
is Lindeloef; but this statement is not provable in ZF. The reason is that
to build a subcover, most of the time we need to \emph{choose} sets
from an infinite collection which cannot be done in ZF. Additional axioms are needed,
but strictly weaker than the axiom of choice.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹However, if the topology has not many open sets, then the topological
space is indeed compact.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> card_top_comp<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>      
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span> <span class="keyword3"><span class="command">assume</span></span> M<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> M<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll lesspoll_trans1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> M<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">,</span>3<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The union of two compact sets, is compact; of any cardinality.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> union_compact<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">K1</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"InfCard<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span> <span class="main">∪</span> <span class="free">K1</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">K</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">K1</span>"</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">∪</span><span class="free">K1</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K1</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">M</span><span class="main">⊆</span><span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span> <span class="main">≺</span> <span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K1</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span> <span class="main">≺</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">NK</span></span> <span class="skolem"><span class="skolem">NK1</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">NK</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">NK1</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="skolem">NK</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K1</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="skolem">NK1</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">NK</span> <span class="main">≺</span> <span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">NK1</span> <span class="main">≺</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">NK</span><span class="main">∪</span><span class="skolem">NK1</span> <span class="main">≺</span> <span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">∪</span><span class="free">K1</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">NK</span><span class="main">∪</span><span class="skolem">NK1</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">NK</span><span class="main">∪</span><span class="skolem">NK1</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>3<span class="main">)</span> less_less_imp_un_less <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span><span class="main">∪</span><span class="free">K1</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a set is compact of cardinality <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> for some topology,
it is compact of cardinality <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> for every coarser topology.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> compact_coarser<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T1</span><span class="main">⊆</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T1</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T1</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T1</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span><span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span><span class="main">∧</span><span class="bound">N</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T1</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>3<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If some set is compact for some cardinal, it is compact for any greater cardinal.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> compact_greater_card<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="main">≲</span><span class="free">Q1</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q1</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q1</span><span class="keyword1">{in}</span><span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span><span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span><span class="main">∧</span><span class="bound">N</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span><span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span><span class="main">∧</span><span class="bound">N</span><span class="main">≺</span><span class="free">Q1</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> lesspoll_trans2
      <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">,</span>3<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A closed subspace of a compact space of any cardinality, is also
compact of the same cardinality.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> compact_closed<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> <span class="free">Q</span> <span class="keyword1">{in}</span> <span class="free">T</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">K</span><span class="main">∩</span><span class="free">R</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> <span class="free">Q</span> <span class="keyword1">{in}</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">∩</span><span class="free">R</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> IsClosed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">-</span><span class="free">R</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">∈</span><span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">M</span> <span class="main">∪</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">∪</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">M</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> AS<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">K</span>"</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">R</span><span class="main">∨</span><span class="skolem">x</span><span class="main">∉</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="free">K</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">K</span><span class="main">∩</span><span class="free">R</span><span class="main">∨</span><span class="skolem">x</span><span class="main">∈</span><span class="free">K</span><span class="main">-</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS<span class="main">(</span>2<span class="main">)</span> <span class="quoted"><span class="quoted">‹<span class="free">K</span><span class="main">-</span><span class="free">R</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="skolem">M</span><span class="main">∨</span><span class="skolem">x</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">M</span> <span class="main">∪</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">∪</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span> <span class="main">≺</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">N</span></span> <span class="keyword2"><span class="keyword">where</span></span> cub<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">∪</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">N</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">-</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">K</span><span class="main">∩</span><span class="free">R</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">N</span><span class="main">-</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">-</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">≺</span><span class="free">Q</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main">)</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">N</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="skolem">M</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cub<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">K</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">R</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">K</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">N</span><span class="main">-</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cub<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">-</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">⊆</span><span class="skolem">N</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> cub<span class="main">(</span>3<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">-</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">R</span><span class="main">}</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll lesspoll_trans1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span><span class="main">∩</span><span class="free">R</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="free">K</span> <span class="main">∩</span> <span class="free">R</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="free">K</span> <span class="main">∩</span> <span class="free">R</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span> <span class="main">≺</span> <span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsCompactOfCard_def assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Properties of numerability›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The properties of numerability deal with cardinals of some sets
built from the topology. The properties which are normally used
are the ones related to the cardinal of the natural numbers or its successor.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsFirstOfCard</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">first</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>_"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">of</span></span> <span class="keyword1"><span class="free">first</span></span> <span class="keyword1"><span class="free">type</span></span> <span class="keyword1"><span class="free">of</span></span> <span class="keyword1"><span class="free">cardinal}</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">{</span><span class="bound">b</span><span class="main">∈</span><span class="bound">B</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">b</span><span class="main">}</span> <span class="main">≺</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsSecondOfCard</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>_"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">of</span></span> <span class="keyword1"><span class="free">second</span></span> <span class="keyword1"><span class="free">type</span></span> <span class="keyword1"><span class="free">of</span></span> <span class="keyword1"><span class="free">cardinal}</span></span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">∃</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">B</span> <span class="main">≺</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsSeparableOfCard</span> <span class="main">(</span><span class="quoted">"_<span class="keyword1">{is</span> <span class="keyword1">separable</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>_"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">separable</span></span> <span class="keyword1"><span class="free">of</span></span> <span class="keyword1"><span class="free">cardinal}</span></span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">≡</span> <span class="main">∃</span><span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span><span class="main">.</span> Closure<span class="main">(</span><span class="bound">U</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> <span class="bound">U</span><span class="main">≺</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsFirstCountable</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">first</span> <span class="keyword1">countable}</span>"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">first</span></span> <span class="keyword1"><span class="free">countable}</span></span><span class="main">)</span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">first</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> csucc<span class="main">(</span>nat<span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsSecondCountable</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">second</span> <span class="keyword1">countable}</span>"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">second</span></span> <span class="keyword1"><span class="free">countable}</span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span>nat<span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsSeparable</span> <span class="main">(</span><span class="quoted">"_<span class="keyword1">{is</span> <span class="keyword1">separable}</span>"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">separable}</span></span><span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="keyword1">{is</span> <span class="keyword1">separable</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span>nat<span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a set is of second type of cardinal <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span>, then it is of
first type of that same cardinal.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> second_imp_first<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">first</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">B</span> <span class="main">≺</span> <span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsSecondOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="keyword2"><span class="keyword">where</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="skolem">B</span> <span class="main">≺</span> <span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">b</span><span class="main">}</span><span class="main">⊆</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">b</span><span class="main">}</span><span class="main">≲</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> base <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">b</span><span class="main">}</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lesspoll_trans1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> base <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span><span class="main">)</span> <span class="main">∧</span> <span class="main">{</span><span class="bound">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">b</span><span class="main">}</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">T</span><span class="main">.</span> <span class="main">∃</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span><span class="main">)</span> <span class="main">∧</span> <span class="main">{</span><span class="bound">b</span><span class="main">∈</span><span class="bound">B</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">b</span><span class="main">}</span><span class="main">≺</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsFirstOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A set is dense iff it intersects all non-empty, open sets of the topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> dense_int_open<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span> <span class="main">⟷</span> <span class="main">(</span><span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">≠</span><span class="main">0</span> <span class="main">⟶</span> <span class="free">A</span><span class="main">∩</span><span class="bound">U</span><span class="main">≠</span><span class="main">0</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span>
    <span class="keyword3"><span class="command">assume</span></span> Uopen<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">≠</span><span class="main">0</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="main">⋃</span><span class="free">T</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span> <span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms Uopen <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.cl_inter_neigh topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">≠</span><span class="main">0</span> <span class="main">⟶</span> <span class="free">A</span><span class="main">∩</span><span class="bound">U</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">≠</span><span class="main">0</span> <span class="main">⟶</span> <span class="free">A</span><span class="main">∩</span><span class="bound">U</span><span class="main">≠</span><span class="main">0</span>"</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">⟶</span> <span class="bound">U</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.inter_neigh_cl topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">⊆</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.Top_3_L11<span class="main">(</span>1<span class="main">)</span> topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Relations between numerability properties and choice principles›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹It is known that some statements in topology aren't just derived from
choice axioms, but also equivalent to them. Here is an example

The following are equivalent:
\begin{itemize}
\item Every topological space of second cardinality <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>csucc(Q)›</span></span></span></span> is
separable of cardinality <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>csucc(Q)›</span></span></span></span>.
\item The axiom of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> choice.
\end{itemize}

In the article \cite{HH1} there is a proof of this statement
for <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span>$=\mathbb{N}$, with more equivalences.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a topology is of second type of cardinal <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>csucc(Q)›</span></span></span></span>, then it is separable
of the same cardinal. This result makes use of the axiom of choice for the cardinal
 <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> on subsets of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⋃T›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Q_choice_imp_second_imp_separable<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> 
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span> <span class="free">Q</span> <span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">separable</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">B</span> <span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsSecondOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="keyword2"><span class="keyword">where</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="skolem">B</span> <span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?N</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">.</span> <span class="bound">b</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?B</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">⊆</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> base <span class="keyword1"><span class="command">have</span></span> prec<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll lesspoll_trans1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> base <span class="keyword1"><span class="command">have</span></span> baseOpen<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">b</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_sets_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> car<span class="main">:</span><span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> reg<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span> <span class="bound">M</span> <span class="bound">N</span><span class="main">.</span> <span class="main">(</span><span class="bound">M</span> <span class="main">≲</span><span class="free">Q</span> <span class="main">∧</span>  <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="bound">M</span><span class="main">.</span> <span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="bound">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="bound">M</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> AxiomCardinalChoice_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?B</span> <span class="main">≲</span><span class="free">Q</span> <span class="main">∧</span>  <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">0</span> <span class="main">∧</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="var">?B</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> prec <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="var">?B</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le car <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> baseOpen <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="var">?B</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">f</span></span> <span class="keyword2"><span class="keyword">where</span></span> f<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="var">?B</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="var">?N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> f2<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="skolem">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="var">?N</span><span class="main">`</span><span class="bound">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">≠</span><span class="main">0</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> A1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">⊆</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L1 base <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> f2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">`</span><span class="skolem">b</span><span class="main">∈</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">∩</span><span class="skolem">U</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">≠</span><span class="main">0</span> <span class="main">⟶</span> <span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">∩</span><span class="bound">U</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> f2 baseOpen <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command"><span class="improper">with</span></span></span> r <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">,</span><span class="free">T</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> dense_int_open assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">have</span></span> ffun<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">:</span><span class="var">?B</span><span class="main">→</span>range<span class="main">(</span><span class="skolem">f</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> f range_of_fun <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">∈</span>surj<span class="main">(</span><span class="var">?B</span><span class="main">,</span>range<span class="main">(</span><span class="skolem">f</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fun_is_surj <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> des1<span class="main">:</span><span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="skolem">f</span><span class="main">)</span><span class="main">≲</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> surj_fun_inv_2<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="skolem">f</span>"</span></span><span class="quoted"><span class="quoted">"<span class="var">?B</span>"</span></span><span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="skolem">f</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> prec Card_less_csucc_eq_le car
    Card_is_Ord <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">⊆</span>range<span class="main">(</span><span class="skolem">f</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_rangeI<span class="main">[</span><span class="operator">OF</span> ffun<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">≲</span>range<span class="main">(</span><span class="skolem">f</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> des1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">≲</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lepoll_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> prec <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="var">?B</span><span class="main">}</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lesspoll_trans1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsSeparableOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The next theorem resolves that the axiom of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> choice for subsets
of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>⋃T›</span></span></span></span> is necessary for second type spaces to be separable of the same cardinal
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>csucc(Q)›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> second_imp_separable_imp_Q_choice<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">separable</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span> <span class="free">Q</span> <span class="keyword1">{choice</span> <span class="keyword1">holds}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">N</span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">≲</span><span class="free">Q</span> <span class="main">∧</span>  <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">0</span><span class="main">)</span>"</span></span>
    <span class="comment1">(* First we build a topology using N and M such that it is of 
    second type of cardinal csucc(Q). It will be a partition topology.*)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">h</span></span> <span class="keyword2"><span class="keyword">where</span></span> inj<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">h</span><span class="main">∈</span>inj<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lepoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> bij<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">:</span>bij<span class="main">(</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">,</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_bij_range bij_converse_bij <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?T</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">j</span>
      <span class="keyword3"><span class="command">assume</span></span> AS2<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> bij <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">:</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">→</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_def inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> AS2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">)</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">j</span><span class="main">}</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> noEmpty<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">0</span><span class="main">∉</span><span class="var">?T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
      <span class="keyword3"><span class="command">assume</span></span> AS2<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span><span class="var">?T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">∈</span><span class="var">?T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∩</span><span class="skolem">B</span><span class="main">≠</span><span class="main">0</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="skolem"><span class="skolem">t</span></span> <span class="keyword2"><span class="keyword">where</span></span> A_def<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">=</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">j</span><span class="main">}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> B_def<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">=</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> Range<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> AS2<span class="main">(</span>3<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">A</span><span class="main">∩</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A_def B_def <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">=</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A_def B_def <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">=</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">A</span><span class="main">∈</span><span class="var">?T</span><span class="main">.</span> <span class="main">∀</span><span class="bound">B</span><span class="main">∈</span><span class="var">?T</span><span class="main">.</span> <span class="bound">A</span><span class="main">=</span><span class="bound">B</span><span class="main">∨</span> <span class="bound">A</span><span class="main">∩</span><span class="bound">B</span><span class="main">=</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span>
    <span class="keyword1"><span class="command">have</span></span> Part<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="main">⋃</span><span class="var">?T</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?τ</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="main">⋃</span><span class="var">?T</span> <span class="var">?T</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> Part <span class="keyword1"><span class="command">have</span></span> top<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?τ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="var">?τ</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?f</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">i</span><span class="main">,</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">:</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">→</span><span class="var">?T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> functionI<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="var">?f</span>"</span></span><span class="main">]</span> Pi_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span>surj<span class="main">(</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">,</span><span class="var">?T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> surj_def <span class="keyword1"><span class="command">using</span></span> apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">⊆</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj <span class="keyword1"><span class="command">unfolding</span></span> inj_def range_def domain_def Pi_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?T</span><span class="main">≲</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> surj_fun_inv<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="var">?f</span>"</span></span><span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="var">?T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> Card_is_Ord lepoll_trans
      subset_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="var">?T</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> base <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?τ</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsSecondOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> top <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?τ</span><span class="keyword1">{is</span> <span class="keyword1">separable</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">D</span></span> <span class="keyword2"><span class="keyword">where</span></span> sub<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="var">?τ</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> clos<span class="main">:</span><span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="skolem">D</span><span class="main">,</span><span class="var">?τ</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="var">?τ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> cardd<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsSeparableOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="comment1">(*We now build a dense subset of D such that it has only one point in each
    basic set. The first coordinate of those points will give us a choice function.*)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">∈</span>inj<span class="main">(</span><span class="skolem">D</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lepoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> bij2<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">:</span>bij<span class="main">(</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">,</span><span class="skolem">D</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_bij_range bij_converse_bij <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> surj2<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">:</span>surj<span class="main">(</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">,</span><span class="skolem">D</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?R</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">.</span> <span class="main">{</span><span class="bound">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="bound">j</span><span class="main">∈</span><span class="main">(</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">∈</span><span class="var">?T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> P<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">∈</span><span class="var">?τ</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> top sub clos <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="var">?τ</span><span class="main">.</span> <span class="bound">U</span><span class="main">≠</span><span class="main">0</span> <span class="main">⟶</span> <span class="skolem">D</span><span class="main">∩</span><span class="bound">U</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> dense_int_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> P <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">≠</span><span class="main">0</span> <span class="main">⟶</span> <span class="skolem">D</span><span class="main">∩</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> T noEmpty <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">∩</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">D</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> px<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> surj2 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">=</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> surj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> px <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="bound">j</span><span class="main">∈</span><span class="main">(</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?R</span><span class="main">`</span><span class="skolem">i</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> beta_if<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span> <span class="main">_</span> <span class="quoted"><span class="skolem">i</span></span><span class="main">]</span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> nonE<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">.</span> <span class="var">?R</span><span class="main">`</span><span class="bound">i</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="skolem">j</span>
      <span class="keyword3"><span class="command">assume</span></span> i<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> j<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">i</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> j i <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">∈</span><span class="main">(</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="skolem">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="skolem">i</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> beta_if <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> pp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="bound">j</span><span class="main">∈</span><span class="main">(</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?E</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">m</span><span class="main">,</span>fst<span class="main">(</span>converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> ff<span class="main">:</span><span class="quoted"><span class="quoted">"function<span class="main">(</span><span class="var">?E</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="comment1">(*We now have to prove that ?E is a choice function for M and N*)</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">m</span>
      <span class="keyword3"><span class="command">assume</span></span> M<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="skolem">M</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> inj <span class="keyword1"><span class="command">have</span></span> hm<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">h</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_rangeI inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">j</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> hm <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> beta_if <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> r <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">:</span>surj<span class="main">(</span><span class="skolem">D</span><span class="main">,</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fun_is_surj inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">d</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">d</span><span class="main">∈</span><span class="skolem">D</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">`</span><span class="skolem">d</span><span class="main">=</span><span class="skolem">j</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> surj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> r inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> subcar<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">⊆</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> nonE hm <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ee</span></span> <span class="keyword2"><span class="keyword">where</span></span> P<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">ee</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> subcar <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ee</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Ord<span class="main">(</span><span class="skolem">ee</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> Card_is_Ord Ord_in_Ord <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> P <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeastI<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> i<span class="main"><span class="main">=</span></span><span class="quoted"><span class="skolem">ee</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> P<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> pp hm <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="main">(</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="skolem">h</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="main">(</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> left_inverse<span class="main">[</span><span class="operator">OF</span> inj M<span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"fst<span class="main">(</span>converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="main">(</span><span class="skolem">h</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> thesis1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">m</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="var">?E</span><span class="main">`</span><span class="bound">m</span><span class="main">∈</span><span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">e</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span><span class="main">∈</span><span class="var">?E</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span><span class="main">=</span><span class="main">⟨</span><span class="skolem">m</span><span class="main">,</span><span class="var">?E</span><span class="main">`</span><span class="skolem">m</span><span class="main">⟩</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality ff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> thesis1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span><span class="main">∈</span>Sigma<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?E</span><span class="main">∈</span>Pow<span class="main">(</span>Sigma<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> ff <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?E</span><span class="main">∈</span>Pi<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Pi_iff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> thesis1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> AxiomCardinalChoiceGen_def assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Here is the equivalence from the two previous results.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Q_choice_eq_secon_imp_sepa<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">separable</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
    <span class="main">⟷</span><span class="main">(</span><span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span> <span class="free">Q</span> <span class="keyword1">{choice</span> <span class="keyword1">holds}</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> Q_choice_imp_second_imp_separable choice_subset_imp_choice
  <span class="keyword1"><span class="command">using</span></span> second_imp_separable_imp_Q_choice assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Given a base injective with a set, then we can find a
base whose elements are indexed by that set.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> base_to_indexed_base<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">.</span> <span class="main">{</span><span class="bound">N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">f</span></span> <span class="keyword2"><span class="keyword">where</span></span> f_def<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">∈</span>inj<span class="main">(</span><span class="free">B</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> lepoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ff</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">B</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"domain<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">=</span><span class="free">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"relation<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> relation_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"function<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span>
  <span class="keyword1"><span class="command">have</span></span> fun<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">:</span><span class="free">B</span><span class="main">→</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_imp_Pi<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="var">?ff</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> injj<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">∈</span>inj<span class="main">(</span><span class="free">B</span><span class="main">,</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> inj_def
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span> <span class="skolem">x</span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">∈</span><span class="free">B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">b</span><span class="main">,</span> <span class="skolem">f</span> <span class="main">`</span> <span class="bound">b</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">b</span> <span class="main">∈</span> <span class="free">B</span><span class="main">}</span> <span class="main">`</span> <span class="skolem">w</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">b</span><span class="main">,</span> <span class="skolem">f</span> <span class="main">`</span> <span class="bound">b</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">b</span> <span class="main">∈</span> <span class="free">B</span><span class="main">}</span> <span class="main">`</span> <span class="skolem">x</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">`</span><span class="skolem">w</span><span class="main">=</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_equality<span class="main">[</span><span class="operator">OF</span> _ fun<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> f_def inj_def AS<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">b</span><span class="main">,</span> <span class="skolem">f</span> <span class="main">`</span> <span class="bound">b</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">b</span> <span class="main">∈</span> <span class="free">B</span><span class="main">}</span> <span class="main">`</span> <span class="bound">w</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">b</span><span class="main">,</span> <span class="skolem">f</span> <span class="main">`</span> <span class="bound">b</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">b</span> <span class="main">∈</span> <span class="free">B</span><span class="main">}</span> <span class="main">`</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="bound">w</span> <span class="main">=</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> bij<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">∈</span>bij<span class="main">(</span><span class="free">B</span><span class="main">,</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_bij_range <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> fun <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">=</span><span class="main">{</span><span class="skolem">f</span><span class="main">`</span><span class="bound">b</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">B</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> f_def <span class="keyword1"><span class="command">have</span></span> ran<span class="main">:</span><span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">⊆</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?N</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">i</span><span class="main">,</span><span class="main">(</span><span class="keyword1">if</span> <span class="bound">i</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span> <span class="keyword1">then</span> converse<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">`</span><span class="bound">i</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> FN<span class="main">:</span><span class="quoted"><span class="quoted">"function<span class="main">(</span><span class="var">?N</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">⊆</span><span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span>
    <span class="keyword3"><span class="command">assume</span></span> a<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> bij <span class="keyword1"><span class="command">have</span></span> rr<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">:</span><span class="free">B</span><span class="main">→</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> bij_def inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> ig<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">=</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> a apply_equality<span class="main">[</span><span class="operator">OF</span> _ rr<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_type<span class="main">[</span><span class="operator">OF</span> rr a<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">from</span></span> ig <span class="keyword1"><span class="command">have</span></span> t<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_type<span class="main">[</span><span class="operator">OF</span> _ a<span class="main">]</span> f_def <span class="keyword1"><span class="command">unfolding</span></span> inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> r <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?N</span><span class="main">`</span><span class="main">(</span><span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">=</span>converse<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality<span class="main">[</span><span class="operator">OF</span> _ FN<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?N</span><span class="main">`</span><span class="main">(</span><span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">=</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> left_inverse<span class="main">[</span><span class="operator">OF</span> injj a<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">=</span><span class="var">?N</span><span class="main">`</span><span class="main">(</span><span class="var">?ff</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="skolem">t</span><span class="main">=</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> t<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">r</span><span class="main">∈</span><span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">-</span><span class="free">B</span><span class="main">.</span> <span class="bound">r</span><span class="main">=</span><span class="main">0</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">r</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">∈</span><span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">-</span><span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">=</span><span class="var">?N</span><span class="main">`</span><span class="skolem">j</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">∉</span><span class="free">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> R<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?N</span><span class="main">`</span><span class="skolem">j</span><span class="main">=</span>converse<span class="main">(</span><span class="var">?ff</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality<span class="main">[</span><span class="operator">OF</span> _ FN<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?N</span><span class="main">`</span><span class="skolem">j</span><span class="main">∈</span><span class="free">B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>  apply_funtype<span class="main">[</span><span class="operator">OF</span> inj_is_fun<span class="main"><span class="main">[</span></span><span class="operator">OF</span> bij_is_inj<span class="main"><span class="main">[</span></span><span class="operator">OF</span> bij_converse_bij<span class="main"><span class="main">[</span></span><span class="operator">OF</span> bij<span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span> AS<span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>3<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∉</span>range<span class="main">(</span><span class="var">?ff</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">=</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality<span class="main">[</span><span class="operator">OF</span> _ FN<span class="main">]</span> R<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">=</span><span class="free">B</span><span class="main">∨</span><span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">=</span><span class="free">B</span> <span class="main">∪</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">B</span> <span class="main">∪</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">=</span><span class="free">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">B</span> <span class="main">∪</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_no_0<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">T</span>"</span></span><span class="main">]</span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">∪</span><span class="main">{</span><span class="main">0</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_no_0<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">∪</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">T</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="var">?N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Relation between numerability and compactness›</span></span>  

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If the axiom of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> choice holds, then any topology
of second type of cardinal <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>csucc(Q)›</span></span></span></span> is compact of cardinal <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>csucc(Q)›</span></span></span></span>›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> compact_of_cardinal_Q<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span> <span class="free">Q</span> <span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span> <span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="free">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> CC<span class="main">:</span><span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> reg<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋀</span> <span class="bound">M</span> <span class="bound">N</span><span class="main">.</span> <span class="main">(</span><span class="bound">M</span> <span class="main">≲</span><span class="free">Q</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="bound">M</span><span class="main">.</span> <span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">0</span><span class="main">∧</span><span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">⊆</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="bound">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="bound">M</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="bound">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>
  AxiomCardinalChoice_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">≲</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsSecondOfCard_def <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le CC <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> base_to_indexed_base <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">N</span></span> <span class="keyword2"><span class="keyword">where</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?α</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">{</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">⊆</span><span class="bound">U</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> inj<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?α</span><span class="main">∈</span>inj<span class="main">(</span><span class="skolem">M</span><span class="main">,</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> inj_def
    <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">λ</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">U</span><span class="main">}</span><span class="main">)</span> <span class="main">∈</span> <span class="skolem">M</span> <span class="main">→</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lam_type<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">U</span><span class="main">.</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="bound">U</span><span class="main">}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">%</span><span class="bound">t</span><span class="main">.</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">w</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">x</span><span class="main">}</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> AS<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> A<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">∈</span><span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span>Interior<span class="main">(</span><span class="skolem">w</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span>Interior<span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>3<span class="main">)</span> topology0.Top_2_L3<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">T</span>"</span></span><span class="main">]</span>
          topology0_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">T</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> UN<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">w</span><span class="main">}</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">x</span><span class="main">}</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> interior_set_base_topology assms<span class="main">(</span>3<span class="main">)</span> base <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">{</span></span>
          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">b</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">w</span>"</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">w</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">⊆</span><span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> j<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">=</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">w</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">x</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>2<span class="main">)</span> AS<span class="main">(</span>3<span class="main">)</span> j <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">x</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">{</span></span>
          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">b</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">x</span>"</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">x</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">⊆</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> j<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">=</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">x</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">w</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AS<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">w</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>2<span class="main">)</span> j<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">w</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">(</span><span class="main">λ</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">U</span><span class="main">}</span><span class="main">)</span> <span class="main">`</span> <span class="bound">w</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">U</span><span class="main">}</span><span class="main">)</span> <span class="main">`</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="bound">w</span> <span class="main">=</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="main">{</span><span class="var">?α</span><span class="main">`</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">⊆</span><span class="bound">V</span><span class="main">}</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?M</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">i</span><span class="main">≠</span><span class="main">0</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> subMQ<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?M</span><span class="main">⊆</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> ddd<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?M</span> <span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?M</span> <span class="main">≲</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">i</span><span class="main">≠</span><span class="main">0</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">i</span><span class="main">⊆</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?M</span> <span class="main">≲</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">i</span><span class="main">≠</span><span class="main">0</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">i</span> <span class="main">≲</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="var">?M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="var">?X</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> reg<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="var">?M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="var">?X</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">f</span></span> <span class="keyword2"><span class="keyword">where</span></span> f<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="var">?M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="var">?X</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!!</span><span class="bound">t</span><span class="main">.</span> <span class="bound">t</span><span class="main">∈</span><span class="var">?M</span> <span class="main">⟹</span> <span class="skolem">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="var">?X</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">m</span>
      <span class="keyword3"><span class="command">assume</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="var">?M</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> f<span class="main">(</span>2<span class="main">)</span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">YY</span></span> <span class="keyword2"><span class="keyword">where</span></span> YY<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">YY</span><span class="main">∈</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="skolem">YY</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> Y<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">YY</span><span class="main">∈</span><span class="skolem">M</span><span class="main">)</span><span class="main">∧</span><span class="main">(</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="skolem">YY</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> 
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="skolem">M</span><span class="main">∧</span><span class="main">(</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="skolem">U</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span><span class="skolem">YY</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj inj_def YY <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋀</span><span class="bound">x</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">M</span><span class="main">∧</span><span class="main">(</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="bound">x</span><span class="main">=</span><span class="skolem">YY</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ex1I<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">%</span><span class="bound">Y</span><span class="main">.</span> <span class="bound">Y</span><span class="main">∈</span><span class="skolem">M</span><span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">Y</span>"</span></span><span class="main">,</span><span class="operator">OF</span> Y r<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> ex1YY<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="main">∃!</span><span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="bound">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?YYm</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">m</span><span class="main">,</span><span class="main">(</span><span class="keyword1">THE</span> <span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="bound">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span><span class="main">)</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> aux<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋀</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span> <span class="main">⟹</span> <span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">=</span><span class="main">(</span><span class="keyword1">THE</span> <span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="bound">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> apply_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> ree<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="bound">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">m</span>
      <span class="keyword3"><span class="command">assume</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="var">?M</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ex1YY <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span><span class="main">)</span><span class="main">∈</span><span class="skolem">M</span><span class="main">∧</span><span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="keyword1">THE</span> <span class="bound">YY</span><span class="main">.</span> <span class="bound">YY</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">YY</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> theI<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">%</span><span class="bound">Y</span><span class="main">.</span> <span class="bound">Y</span><span class="main">∈</span><span class="skolem">M</span><span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="bound">Y</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">only</span><span class="main"><span class="main">:</span></span> aux<span class="main"><span class="main">[</span></span><span class="operator">OF</span> C<span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">have</span></span> tt<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋀</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span> <span class="main">⟹</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">⊆</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">m</span>
      <span class="keyword3"><span class="command">assume</span></span> D<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="var">?M</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> QQ<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> D <span class="keyword1"><span class="command">have</span></span> t<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∧</span> <span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ree <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">f</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="main">(</span><span class="main">λ</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="main">{</span><span class="var">?α</span><span class="main">`</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">⊆</span><span class="bound">V</span><span class="main">}</span><span class="main">}</span><span class="main">)</span><span class="main">`</span><span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> f<span class="main">(</span>2<span class="main">)</span><span class="main">[</span><span class="operator">OF</span> D<span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="main">{</span><span class="var">?α</span><span class="main">`</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">m</span><span class="main">)</span><span class="main">⊆</span><span class="bound">V</span><span class="main">}</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> QQ <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">m</span><span class="main">)</span><span class="main">⊆</span><span class="bound">V</span><span class="main">}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">m</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="var">?α</span><span class="main">`</span><span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">=</span><span class="var">?α</span><span class="main">`</span><span class="skolem">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">)</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> t <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">=</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>  inj_apply_equality<span class="main">[</span><span class="operator">OF</span> inj<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">m</span><span class="main">)</span><span class="main">⊆</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> r <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">s</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">t</span></span> <span class="keyword2"><span class="keyword">where</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="var">?M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">s</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span><span class="main">∈</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> tt<span class="main">[</span><span class="operator">OF</span> r<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">s</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> r<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
      <span class="keyword3"><span class="command">assume</span></span> AT<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> A <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> BB<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> BC<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> point_open_base_neigh<span class="main">[</span><span class="operator">OF</span> base<span class="main">,</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?X</span><span class="main">`</span><span class="skolem">j</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> BB<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> BC<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> BC<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> covers<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_trans<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">m</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"relation<span class="main">(</span><span class="var">?YYm</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> relation_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> f<span class="main">:</span><span class="quoted"><span class="quoted">"function<span class="main">(</span><span class="var">?YYm</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> d<span class="main">:</span><span class="quoted"><span class="quoted">"domain<span class="main">(</span><span class="var">?YYm</span><span class="main">)</span><span class="main">=</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="var">?YYm</span><span class="main">)</span><span class="main">=</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span>
    <span class="keyword1"><span class="command">have</span></span> fun<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">:</span><span class="var">?M</span><span class="main">→</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_imp_Pi<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="var">?YYm</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">∈</span>surj<span class="main">(</span><span class="var">?M</span><span class="main">,</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fun_is_surj<span class="main">[</span><span class="operator">OF</span> fun<span class="main">]</span> r <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> surj_fun_inv<span class="main">[</span><span class="operator">OF</span> this subMQ Card_is_Ord<span class="main"><span class="main">[</span></span><span class="operator">OF</span> CC<span class="main"><span class="main">]</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span> <span class="main">≲</span> <span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> ddd <span class="keyword1"><span class="command">have</span></span> Rw<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span> <span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lepoll_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">m</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="var">?M</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">m</span><span class="main">,</span><span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">⟩</span><span class="main">∈</span><span class="var">?YYm</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_Pair<span class="main">[</span><span class="operator">OF</span> f<span class="main">]</span> d <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">`</span><span class="skolem">m</span><span class="main">∈</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span><span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> l1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span><span class="main">⊆</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span><span class="main">∈</span><span class="var">?M</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="var">?YYm</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> image_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">∈</span><span class="var">?M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">r</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="var">?YYm</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?YYm</span><span class="main">`</span><span class="skolem">r</span><span class="main">=</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_equality<span class="main">[</span><span class="operator">OF</span> S<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> fun<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> S<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">with</span></span> l1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span><span class="main">=</span><span class="var">?YYm</span><span class="main">``</span><span class="var">?M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> Rw <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span> <span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> covers <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">∧</span><span class="main">⋃</span><span class="free">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span><span class="main">∧</span><span class="main">{</span><span class="var">?YYm</span><span class="main">`</span><span class="bound">m</span><span class="main">.</span> <span class="bound">m</span><span class="main">∈</span><span class="var">?M</span><span class="main">}</span> <span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ree 
        Card_less_csucc_eq_le<span class="main">[</span><span class="operator">OF</span> CC<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="free">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span><span class="main">∧</span><span class="bound">N</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span> <span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsCompactOfCard_def Card_csucc CC Card_is_Ord <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In the following proof, we have chosen an infinite cardinal
to be able to apply the equation <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">prop</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="free">Q</span></span><span class="main"><span class="main">×</span></span><span class="free"><span class="free">Q</span></span><span class="main"><span class="main">≈</span></span><span class="free"><span class="free">Q</span></span>"</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>. For finite cardinals;
both, the assumption and the axiom of choice, are always true.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> second_imp_compact_imp_Q_choice_PowQ<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="bound">T</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="bound">T</span><span class="main">)</span>"</span></span> 
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"InfCard<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span> <span class="free">Q</span> <span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span> <span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">N</span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">≲</span><span class="free">Q</span> <span class="main">∧</span>  <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">0</span> <span class="main">∧</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">⊆</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">h</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">h</span><span class="main">∈</span>inj<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lepoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="comment1">(* First we build a topology that it is of second type 
    of cardinal csucc(Q). It will be a discrete topology.*)</span>
    <span class="keyword1"><span class="command">have</span></span> discTop<span class="main">:</span><span class="quoted"><span class="quoted">"Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Pow_is_top <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">T</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">)</span><span class="main">.</span> <span class="skolem">A</span><span class="main">=</span><span class="main">⋃</span><span class="bound">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span>
    <span class="keyword1"><span class="command">have</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?f</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">i</span><span class="main">,</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> fff<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">→</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Pi_def function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span>inj<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">,</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> inj_def <span class="keyword1"><span class="command">using</span></span> apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span>bij<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">,</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> bij_def surj_def  <span class="keyword1"><span class="command">using</span></span> fff
      apply_equality fff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">≈</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">≈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">≲</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">≲</span><span class="free">Q</span><span class="main">×</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AS prod_lepoll_mono<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span> lepoll_refl<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span>
      lepoll_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> InfCard_square_eqpoll assms<span class="main">(</span>2<span class="main">)</span> lepoll_eq_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">}</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le assms<span class="main">(</span>2<span class="main">)</span> InfCard_is_Card <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsSecondOfCard_def base <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> comp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> discTop assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">W</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">∩</span><span class="skolem">W</span><span class="main">=</span><span class="skolem">W</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsClosed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> compact_closed<span class="main">[</span><span class="operator">OF</span> comp T<span class="main">]</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">W</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> subCompact<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">W</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">W</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?cub</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="main">{</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> subCompact <span class="keyword1"><span class="command">have</span></span> Ncomp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> cond<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?cub</span><span class="main">)</span><span class="main">∈</span>Pow<span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span> <span class="main">⋃</span><span class="var">?cub</span><span class="main">⊆</span><span class="main">⋃</span><span class="var">?cub</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">S</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?cub</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">S</span> <span class="main">∧</span> <span class="bound">S</span> <span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ncomp <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">×</span><span class="skolem">M</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="var">?cub</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">Na</span><span class="main">∈</span>Pow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="var">?cub</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">Na</span> <span class="main">∧</span> <span class="bound">Na</span> <span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> 
          <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> cond <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">S</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?cub</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="var">?cub</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">S</span> <span class="main">∧</span> <span class="bound">S</span> <span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> ttt<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">S</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?cub</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="bound">S</span> <span class="main">∧</span> <span class="bound">S</span> <span class="main">≲</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le assms<span class="main">(</span>2<span class="main">)</span> InfCard_is_Card <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> S_def<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?cub</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="skolem">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span> <span class="main">≲</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span>
      <span class="keyword3"><span class="command">assume</span></span> AA<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> AA<span class="main">(</span>1<span class="main">)</span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> AA<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> G<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> notEm<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">∈</span><span class="var">?cub</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AA <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">⊆</span><span class="main">⋃</span><span class="var">?cub</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> G notEm AA <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">s</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">s</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="main">⋃</span><span class="var">?cub</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">s</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">s</span><span class="main">,</span><span class="bound">t</span><span class="main">⟩</span><span class="main">∈</span><span class="main">⋃</span><span class="var">?cub</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">s</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">s</span><span class="main">,</span><span class="bound">t</span><span class="main">⟩</span><span class="main">∈</span><span class="main">⋃</span><span class="skolem">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S_def<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> S_def<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">f</span><span class="main">∈</span><span class="skolem">S</span><span class="main">.</span> <span class="main">∃</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">.</span> <span class="bound">f</span><span class="main">=</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">from</span></span> A B <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">.</span> <span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">∈</span><span class="skolem">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> noEmp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">(</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">⟶</span> <span class="main">(</span><span class="skolem">S</span><span class="main">∩</span><span class="main">(</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">}</span><span class="main">)</span><span class="main">≠</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> S_def<span class="main">(</span>3<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">:</span>inj<span class="main">(</span><span class="skolem">S</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> lepoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> bij2<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">:</span>bij<span class="main">(</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">,</span><span class="skolem">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_bij_range bij_converse_bij <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> surj2<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">:</span>surj<span class="main">(</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">,</span><span class="skolem">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?R</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">{</span><span class="bound">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="bound">j</span><span class="main">∈</span><span class="main">(</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span>
      <span class="keyword3"><span class="command">assume</span></span> AA<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">S</span><span class="main">∩</span><span class="main">(</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">≠</span><span class="main">0</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> noEmp <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> ss<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">s</span><span class="main">∈</span><span class="skolem">S</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">s</span><span class="main">∈</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">=</span><span class="skolem">s</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> surj2 <span class="keyword1"><span class="command">unfolding</span></span> surj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="bound">j</span><span class="main">∈</span><span class="main">(</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ss <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> beta_if AA <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> nonE<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">⟶</span><span class="var">?R</span><span class="main">`</span><span class="bound">t</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span> <span class="skolem">j</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> beta_if <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> pp<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">∀</span><span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="bound">t</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="bound">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">have</span></span> reg<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span> <span class="bound">U</span> <span class="bound">V</span><span class="main">.</span> <span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">=</span><span class="bound">V</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">⟶</span><span class="bound">U</span><span class="main">=</span><span class="bound">V</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span> 
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span> <span class="skolem">U</span> <span class="skolem">V</span>
        <span class="keyword3"><span class="command">assume</span></span> AA<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">=</span><span class="skolem">V</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span>
        <span class="keyword1"><span class="command">{</span></span>
          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">v</span><span class="main">∈</span><span class="skolem">V</span>"</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">v</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="skolem">V</span> <span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">v</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="skolem">U</span> <span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AA <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">v</span><span class="main">∈</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">⊆</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">{</span></span>
          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">u</span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">u</span><span class="main">∈</span><span class="skolem">U</span>"</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">u</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="skolem">U</span> <span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">u</span><span class="main">,</span><span class="skolem">t</span><span class="main">⟩</span><span class="main">∈</span><span class="skolem">V</span> <span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AA <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">u</span><span class="main">∈</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">⊆</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="comment1">(*The last part is to prove that ?E is the choice function.*)</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?E</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">t</span><span class="main">,</span><span class="keyword1">if</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">=</span><span class="main">{</span><span class="main">0</span><span class="main">}</span> <span class="keyword1">then</span> <span class="main">0</span> <span class="keyword1">else</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">U</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">=</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="bound">t</span><span class="main">}</span><span class="main">)</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> ff<span class="main">:</span><span class="quoted"><span class="quoted">"function<span class="main">(</span><span class="var">?E</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span>
      <span class="keyword3"><span class="command">assume</span></span> pm<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="skolem">M</span>"</span></span>
       <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> nonEE<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">≠</span><span class="main">{</span><span class="main">0</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">j</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> pm<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> beta_if <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> r <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">:</span>surj<span class="main">(</span><span class="skolem">S</span><span class="main">,</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fun_is_surj inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">j</span><span class="main">∈</span>range<span class="main">(</span><span class="skolem">r</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">d</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">d</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">r</span><span class="main">`</span><span class="skolem">d</span><span class="main">=</span><span class="skolem">j</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> surj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> r inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> sub<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">⊆</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> nonE pm nonEE <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ee</span></span> <span class="keyword2"><span class="keyword">where</span></span> P<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">ee</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> sub <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ee</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Ord<span class="main">(</span><span class="skolem">ee</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> Card_is_Ord Ord_in_Ord InfCard_is_Card <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> P <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeastI<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> i<span class="main"><span class="main">=</span></span><span class="quoted"><span class="skolem">ee</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> P<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> pp pm <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">∈</span><span class="main">{</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">=</span><span class="skolem">W</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> s<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">U</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">=</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">=</span><span class="skolem">W</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> reg <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> s <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">U</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">=</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">if</span> <span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span><span class="main">=</span><span class="main">{</span><span class="main">0</span><span class="main">}</span> <span class="keyword1">then</span> <span class="main">0</span> <span class="keyword1">else</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">U</span><span class="main">.</span> converse<span class="main">(</span><span class="skolem">r</span><span class="main">)</span><span class="main">`</span><span class="main">(</span><span class="keyword1">μ</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">j</span><span class="main">∈</span><span class="var">?R</span><span class="main">`</span><span class="skolem">t</span><span class="main">)</span><span class="main">=</span><span class="bound">U</span><span class="main">×</span><span class="main">{</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> thesis1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="var">?E</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">e</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span><span class="main">∈</span><span class="var">?E</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">m</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span><span class="main">=</span><span class="main">⟨</span><span class="skolem">m</span><span class="main">,</span><span class="var">?E</span><span class="main">`</span><span class="skolem">m</span><span class="main">⟩</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> function_apply_equality ff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> thesis1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">e</span><span class="main">∈</span>Sigma<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?E</span><span class="main">∈</span>Pow<span class="main">(</span>Sigma<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> ff <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?E</span><span class="main">∈</span>Pi<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">m</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Pi_iff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∃</span><span class="bound">f</span><span class="main">.</span> <span class="bound">f</span><span class="main">:</span>Pi<span class="main">(</span><span class="skolem">M</span><span class="main">,</span><span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="bound">f</span><span class="main">`</span><span class="bound">t</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> thesis1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span><span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> AxiomCardinalChoice_def assms<span class="main">(</span>2<span class="main">)</span> InfCard_is_Card <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The two previous results, state the following equivalence:›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Q_choice_Pow_eq_secon_imp_comp<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"InfCard<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="bound">T</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="bound">T</span><span class="main">)</span><span class="main">)</span>
    <span class="main">⟷</span><span class="main">(</span><span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span> <span class="free">Q</span> <span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span> <span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> second_imp_compact_imp_Q_choice_PowQ compact_of_cardinal_Q assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In the next result we will prove that if the space $(\kappa,Pow(\kappa))$,
for $\kappa$ an infinite cardinal, is compact of its successor cardinal; then all
topologycal spaces which are of second type of the successor cardinal of $\kappa$
are also compact of that cardinal.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Q_csuccQ_comp_eq_Q_choice_Pow<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"InfCard<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="bound">T</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="bound">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> top<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> sec<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> InfCard_is_Card Card_is_Ord Card_csucc <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
      <span class="keyword3"><span class="command">assume</span></span> MT<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">T</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> cover<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> sec <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="skolem">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsSecondOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹Card<span class="main">(</span><span class="free">Q</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">N</span></span> <span class="keyword2"><span class="keyword">where</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le
        base_to_indexed_base <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">u</span><span class="main">,</span><span class="main">{</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">i</span><span class="main">⊆</span><span class="bound">u</span><span class="main">}</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">u</span><span class="main">∈</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"function<span class="main">(</span><span class="var">?S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span><span class="main">:</span><span class="skolem">M</span><span class="main">→</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Pi_iff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span><span class="main">∈</span>inj<span class="main">(</span><span class="skolem">M</span><span class="main">,</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> inj_def
        <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword1"><span class="command">{</span></span>
          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span> <span class="skolem">x</span>
          <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">u</span><span class="main">,</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">u</span><span class="main">}</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">∈</span> <span class="skolem">M</span><span class="main">}</span> <span class="main">`</span> <span class="skolem">w</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">u</span><span class="main">,</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">u</span><span class="main">}</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">∈</span> <span class="skolem">M</span><span class="main">}</span> <span class="main">`</span> <span class="skolem">x</span>"</span></span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?S</span><span class="main">:</span><span class="skolem">M</span><span class="main">→</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> ASS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="skolem">w</span><span class="main">}</span><span class="main">=</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="skolem">x</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">from</span></span> AS<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> MT <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">∈</span><span class="skolem">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span>Interior<span class="main">(</span><span class="skolem">w</span><span class="main">,</span><span class="skolem">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span>Interior<span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> top topology0.Top_2_L3<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span>"</span></span><span class="main">]</span>
            topology0_def<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> UN<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">w</span><span class="main">}</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">x</span><span class="main">}</span><span class="main">)</span>"</span></span>
            <span class="keyword1"><span class="command">using</span></span> interior_set_base_topology top base <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">{</span></span>
            <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">b</span>
            <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">w</span>"</span></span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">w</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">⊆</span><span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> j<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">=</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">w</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">x</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>2<span class="main">)</span> ASS j <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">x</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">}</span></span>
          <span class="keyword1"><span class="command">moreover</span></span>
          <span class="keyword1"><span class="command">{</span></span>
            <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">b</span>
            <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">x</span>"</span></span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">x</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">⊆</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> j<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">=</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">x</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span> <span class="main">⊆</span> <span class="skolem">w</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ASS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">w</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="skolem">j</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S<span class="main">(</span>2<span class="main">)</span> j<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="bound">B</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="main">(</span><span class="bound">i</span><span class="main">)</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="skolem">w</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
            <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> UN<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">}</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">=</span><span class="skolem">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
        <span class="keyword1"><span class="command">}</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">w</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="skolem">M</span><span class="main">.</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">u</span><span class="main">,</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">u</span><span class="main">}</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">∈</span> <span class="skolem">M</span><span class="main">}</span> <span class="main">`</span> <span class="bound">w</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">u</span><span class="main">,</span> <span class="main">{</span><span class="bound">i</span> <span class="main">∈</span> <span class="free">Q</span> <span class="main">.</span> <span class="skolem">N</span> <span class="main">`</span> <span class="bound">i</span> <span class="main">⊆</span> <span class="bound">u</span><span class="main">}</span><span class="main">⟩</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">∈</span> <span class="skolem">M</span><span class="main">}</span> <span class="main">`</span> <span class="bound">x</span> <span class="main">⟶</span> <span class="bound">w</span> <span class="main">=</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span><span class="main">∈</span>bij<span class="main">(</span><span class="skolem">M</span><span class="main">,</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> fun_is_surj <span class="keyword1"><span class="command">unfolding</span></span> bij_def inj_def surj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">⊆</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">∈</span>Pow<span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="main">∩</span><span class="main">(</span><span class="main">⋃</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">(</span><span class="main">⋃</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsClosed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> this<span class="main">(</span>2<span class="main">)</span> compact_closed<span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> this<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span> <span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">S</span><span class="main">∈</span>Pow<span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="main">⋃</span><span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">S</span> <span class="main">∧</span> <span class="bound">S</span><span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsCompactOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">SS</span></span> <span class="keyword2"><span class="keyword">where</span></span> SS_def<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">SS</span><span class="main">⊆</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋃</span><span class="skolem">SS</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">SS</span><span class="main">≺</span> csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?S</span><span class="main">∈</span>bij<span class="main">(</span><span class="skolem">M</span><span class="main">,</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> con<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">∈</span>bij<span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_converse_bij <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> r1<span class="main">:</span><span class="quoted"><span class="quoted">"restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">∈</span>bij<span class="main">(</span><span class="skolem">SS</span><span class="main">,</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> restrict_bij bij_def SS_def<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> rr<span class="main">:</span><span class="quoted"><span class="quoted">"converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span>bij<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_converse_bij <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="skolem">T</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> cover <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> MT <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="skolem">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">V</span><span class="main">∈</span><span class="main">{</span><span class="skolem">N</span><span class="main">`</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">.</span> <span class="bound">V</span><span class="main">⊆</span><span class="skolem">R</span> <span class="main">∧</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">V</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> point_open_base_neigh base <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">j</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="skolem">j</span><span class="main">⊆</span><span class="skolem">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> x_p<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">N</span><span class="main">`</span><span class="skolem">j</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">R</span><span class="main">∈</span><span class="skolem">M</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?S</span><span class="main">:</span><span class="skolem">M</span><span class="main">→</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?S</span><span class="main">∈</span>bij<span class="main">(</span><span class="skolem">M</span><span class="main">,</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span><span class="main">`</span><span class="skolem">R</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">j</span><span class="main">∈</span><span class="var">?S</span><span class="main">`</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_equality 
          bij_def inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> exI<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">t</span><span class="main">.</span> <span class="bound">t</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">j</span><span class="main">∈</span><span class="bound">t</span>"</span></span><span class="main">,</span> <span class="operator">OF</span> this<span class="main">]</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">.</span> <span class="skolem">j</span><span class="main">∈</span><span class="bound">A</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> Bex_def
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">(</span><span class="main">⋃</span><span class="main">(</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="main">⋃</span><span class="skolem">SS</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SS_def<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">SR</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">SR</span><span class="main">∈</span><span class="skolem">SS</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">j</span><span class="main">∈</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span>surj<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> rr bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">RR</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="skolem">RR</span><span class="main">=</span><span class="skolem">SR</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> p<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">RR</span><span class="main">∈</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> surj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="skolem">RR</span><span class="main">)</span><span class="main">=</span>converse<span class="main">(</span>converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">∈</span>inj<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> rr <span class="keyword1"><span class="command">unfolding</span></span> bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command"><span class="improper">ultimately</span></span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">RR</span><span class="main">=</span>converse<span class="main">(</span>converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> left_inverse<span class="main">[</span><span class="operator">OF</span> _ p<span class="main">]</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command"><span class="improper">with</span></span></span> r1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">∈</span><span class="skolem">SS</span><span class="main">→</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> bij_def inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"relation<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Pi_def relation_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>converse<span class="main">(</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">=</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> relation_converse_converse <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">RR</span><span class="main">=</span>restrict<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">,</span><span class="skolem">SS</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">SR</span><span class="main">∈</span><span class="skolem">SS</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> eq<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">RR</span><span class="main">=</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> restrict <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="skolem">RR</span><span class="main">=</span>converse<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command"><span class="improper">with</span></span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">SR</span><span class="main">∈</span><span class="skolem">SS</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">SR</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SS_def<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> con left_inverse<span class="main">[</span><span class="operator">OF</span> _ this<span class="main">]</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span><span class="main">)</span><span class="main">=</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> bij_def
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">)</span><span class="main">`</span><span class="skolem">RR</span><span class="main">=</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span><span class="main">`</span><span class="skolem">RR</span><span class="main">=</span><span class="skolem">SR</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> relation_converse_converse<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="var">?S</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">unfolding</span></span> relation_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">:</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">→</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> con bij_def inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">SR</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="skolem">SR</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_funtype
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> eq <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">RR</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">SR</span><span class="main">=</span><span class="main">{</span><span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="skolem">N</span><span class="main">`</span><span class="bound">i</span><span class="main">⊆</span><span class="skolem">RR</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?S</span><span class="main">:</span><span class="skolem">M</span><span class="main">→</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>›</span></span> apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">`</span><span class="skolem">j</span><span class="main">⊆</span><span class="skolem">RR</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">j</span><span class="main">∈</span><span class="skolem">SR</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> x_p <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">RR</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> p <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword1"><span class="command">from</span></span> con <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">=</span><span class="main">{</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="bound">R</span><span class="main">.</span> <span class="bound">R</span><span class="main">∈</span><span class="skolem">SS</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> image_function<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">SS</span>"</span></span><span class="main">]</span>
          SS_def<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> range_def bij_def inj_def Pi_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="bound">R</span><span class="main">.</span> <span class="bound">R</span><span class="main">∈</span><span class="skolem">SS</span><span class="main">}</span><span class="main">⊆</span><span class="main">{</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="bound">R</span><span class="main">.</span> <span class="bound">R</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SS_def<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">:</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">→</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> con <span class="keyword1"><span class="command">unfolding</span></span> bij_def inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">`</span><span class="bound">R</span><span class="main">.</span> <span class="bound">R</span><span class="main">∈</span>range<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">}</span><span class="main">⊆</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_funtype <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
        <span class="keyword1"><span class="command">ultimately</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command"><span class="improper">with</span></span></span> rr <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">≈</span><span class="skolem">SS</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"converse<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">``</span><span class="skolem">SS</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SS_def<span class="main">(</span>3<span class="main">)</span> eq_lesspoll_trans <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">M</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="skolem">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="skolem">T</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="skolem">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">M</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∃</span><span class="bound">N</span><span class="main">∈</span>Pow<span class="main">(</span><span class="bound">M</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="skolem">T</span><span class="main">⊆</span><span class="main">⋃</span><span class="bound">N</span> <span class="main">∧</span> <span class="bound">N</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="skolem">T</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsCompactOfCard_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="skolem">T</span> <span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">(</span><span class="main">⋃</span><span class="skolem">T</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span> <span class="keyword1">{in}</span><span class="skolem">T</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Q_disc_is_second_card_csuccQ<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"InfCard<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">of</span> <span class="keyword1">second</span> <span class="keyword1">type</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">T</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">)</span><span class="main">.</span> <span class="skolem">A</span><span class="main">=</span><span class="main">⋃</span><span class="bound">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span>
  <span class="keyword1"><span class="command">have</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?f</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">i</span><span class="main">,</span><span class="main">{</span><span class="bound">i</span><span class="main">}</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">i</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span><span class="free">Q</span><span class="main">→</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> Pi_def function_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span>inj<span class="main">(</span><span class="free">Q</span><span class="main">,</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> inj_def <span class="keyword1"><span class="command">using</span></span> apply_equality <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?f</span><span class="main">∈</span><span class="free">Q</span><span class="main">→</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span>surj<span class="main">(</span><span class="free">Q</span><span class="main">,</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> surj_def <span class="keyword1"><span class="command">using</span></span> apply_equality
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f</span><span class="main">∈</span>bij<span class="main">(</span><span class="free">Q</span><span class="main">,</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="main">≈</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">≈</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">≲</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> eqpoll_imp_lepoll <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="free">Q</span><span class="main">}</span><span class="main">≺</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Card_less_csucc_eq_le assms InfCard_is_Card <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> base <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsSecondOfCard_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹This previous results give us another equivalence of the axiom of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Q›</span></span></span></span> choice
that is apparently weaker (easier to check) to the previous one.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Q_disc_comp_csuccQ_eq_Q_choice_csuccQ<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"InfCard<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">Q</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span><span class="free">Q</span><span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span><span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span> <span class="keyword1">{in}</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span><span class="free">Q</span><span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span><span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Q_choice_Pow_eq_secon_imp_comp Q_csuccQ_comp_eq_Q_choice_Pow
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">{the</span> <span class="keyword1">axiom</span> <span class="keyword1">of}</span><span class="free">Q</span><span class="keyword1">{choice</span> <span class="keyword1">holds</span> <span class="keyword1">for</span> <span class="keyword1">subsets}</span><span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="keyword1">{is</span> <span class="keyword1">compact</span> <span class="keyword1">of</span> <span class="keyword1">cardinal}</span>csucc<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="keyword1">{in}</span><span class="main">(</span>Pow<span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Q_disc_is_second_card_csuccQ Q_choice_Pow_eq_secon_imp_comp Pow_is_top<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword2"><span class="keyword">end</span></span>


</pre>
</body>

</html>