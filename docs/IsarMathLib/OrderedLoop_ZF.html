<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory OrderedLoop_ZF</title>
</head>


<body>
<div class="head">
<h1>Theory OrderedLoop_ZF</h1>
</div>

<pre class="source"><span class="comment1">(*    This file is a part of IsarMathLib - 
    a library of formalized mathematics for Isabelle/Isar.

    Copyright (C) 2021 Slawomir Kolodynski

    This program is free software; Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED 
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Ordered loops ›</span></span>

<span class="keyword1"><span class="command">theory</span></span> OrderedLoop_ZF <span class="keyword2"><span class="keyword">imports</span></span> <a href="Loop_ZF.html">Loop_ZF</a> <a href="Order_ZF.html">Order_ZF</a>

<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ This theory file is about properties of loops (the algebraic structures introduced 
  in IsarMathLib in the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Loop_ZF›</span></span></span></span> theory) with an additional order relation that is in
  a way compatible with the loop's binary operation. The oldest reference I have found on the subject is
  \cite{Zelinski1948}. ›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Definition and notation›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ An ordered loop $(G,A)$ is a loop with a partial order relation r that is 
  "translation invariant" with respect to the loop operation $A$.›</span></span>
  
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ A triple $(G,A,r)$ is an ordered loop if $(G,A)$ is a loop and $r$ is a relation
  on $G$ (i.e. a subset of $G\times G$ with is a partial order and for all elements $x,y,z \in G$
  the condition $\langle x,y\rangle \in r$ is equivalent to both
  $\langle A\langle x,z\rangle, A\langle x,z\rangle\rangle \in r$ and 
  $\langle A\langle z,x\rangle, A\langle z,x\rangle\rangle \in r$. 
  This looks a bit awkward in the basic set theory notation, but using the additive notation 
  for the group operation and $x\leq y$ to instead of $\langle x,y \rangle \in r$ this just means that
  $x\leq y$ if and only if $x+z\leq y+z$ and $x\leq y$ if and only if $z+x\leq z+y$. ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">IsAnOrdLoop</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">≡</span> 
  IsAloop<span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">⊆</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">×</span><span class="free"><span class="bound"><span class="entity">L</span></span></span> <span class="main">∧</span> IsPartOrder<span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">.</span> <span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">.</span> <span class="main">∀</span><span class="bound">z</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">.</span> 
  <span class="main">(</span><span class="main">(</span><span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">⟷</span> <span class="main">⟨</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">`</span><span class="main">⟨</span> <span class="bound">x</span><span class="main">,</span><span class="bound">z</span><span class="main">⟩</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">`</span><span class="main">⟨</span><span class="bound">y</span><span class="main">,</span><span class="bound">z</span><span class="main">⟩</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">⟷</span> <span class="main">⟨</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">`</span><span class="main">⟨</span><span class="bound">z</span><span class="main">,</span><span class="bound">x</span><span class="main">⟩</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">`</span><span class="main">⟨</span><span class="bound">z</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We define the set of nonnegative elements  in the obvious way as $L^+ =\{x\in L: 0 \leq x\}$.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">Nonnegative</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">{</span><span class="bound">x</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">.</span> <span class="main">⟨</span> TheNeutralElement<span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">)</span><span class="main">,</span><span class="bound">x</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>PositiveSet(L,A,r)›</span></span></span></span> is a set similar to  <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Nonnegative(L,A,r)›</span></span></span></span>, but without the neutral element.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">PositiveSet</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">≡</span> 
  <span class="main">{</span><span class="bound">x</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">.</span> <span class="main">⟨</span> TheNeutralElement<span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">)</span><span class="main">,</span><span class="bound">x</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">∧</span> TheNeutralElement<span class="main">(</span><span class="free"><span class="bound"><span class="entity">L</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">A</span></span></span><span class="main">)</span><span class="main">≠</span> <span class="bound">x</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ We will use the additive notation for ordered loops.›</span></span>

<span class="keyword1"><span class="command">locale</span></span> loop1 <span class="main">=</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">L</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">A</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">r</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> ordLoopAssum<span class="main">:</span> <span class="quoted"><span class="quoted">"IsAnOrdLoop<span class="main">(</span><span class="free">L</span><span class="main">,</span><span class="free">A</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">neut</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">𝟬</span>"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> neut_def<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main">≡</span> TheNeutralElement<span class="main">(</span><span class="free">L</span><span class="main">,</span><span class="free">A</span><span class="main">)</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">looper</span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">\&lt;ra&gt;</span>"</span> 69<span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> looper_def<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main"><span class="free">\&lt;ra&gt;</span></span> <span class="free">y</span> <span class="main">≡</span> <span class="free">A</span><span class="main">`</span><span class="main">⟨</span> <span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">lesseq</span> <span class="main">(</span><span class="keyword2"><span class="keyword">infix</span></span> <span class="quoted">"<span class="keyword1">\&lt;lsq&gt;</span>"</span> 68<span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> lesseq_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span> <span class="main">≡</span> <span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">sless</span> <span class="main">(</span><span class="keyword2"><span class="keyword">infix</span></span> <span class="quoted">"<span class="keyword1">\&lt;ls&gt;</span>"</span> 68<span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> sless_def<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">y</span> <span class="main">≡</span> <span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span> <span class="main">∧</span> <span class="free">x</span><span class="main">≠</span><span class="free">y</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">nonnegative</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">L<span class="hidden">⇧</span><sup>+</sup></span>"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> nonnegative_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span> <span class="main">≡</span> Nonnegative<span class="main">(</span><span class="free">L</span><span class="main">,</span><span class="free">A</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">positive</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">L<span class="hidden">⇩</span><sub>+</sub></span>"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> positive_def<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span> <span class="main">≡</span> PositiveSet<span class="main">(</span><span class="free">L</span><span class="main">,</span><span class="free">A</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">leftdiv</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">\&lt;rm&gt;</span> _ <span class="keyword1">\&lt;ad&gt;</span> _"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> leftdiv_def<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span> <span class="main">≡</span> LeftDiv<span class="main">(</span><span class="free">L</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">`</span><span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">rightdiv</span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">\&lt;rs&gt;</span>"</span> 69<span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> rightdiv_def<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">y</span> <span class="main">≡</span> RightDiv<span class="main">(</span><span class="free">L</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">`</span><span class="main">⟨</span><span class="free">y</span><span class="main">,</span><span class="free">x</span><span class="main">⟩</span>"</span></span>
    
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Theorems proven in the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>loop0›</span></span></span></span> locale are valid in the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>loop1›</span></span></span></span> locale›</span></span>

<span class="keyword1"><span class="command">sublocale</span></span> loop1 <span class="main">&lt;</span> loop0 <span class="quoted"><span class="free">L</span></span> <span class="quoted"><span class="free">A</span></span> <span class="quoted"><span class="free">looper</span></span>  
  <span class="keyword1"><span class="command">using</span></span> ordLoopAssum loop_loop0_valid <span class="keyword1"><span class="command">unfolding</span></span> IsAnOrdLoop_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this context $x \leq y$ implies that both $x$ and $y$ belong
  to $L$.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> lsq_members<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> ordLoopAssum assms IsAnOrdLoop_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this context $x &lt; y$ implies that both $x$ and $y$ belong
  to $L$.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> less_members<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> ordLoopAssum assms IsAnOrdLoop_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ In an ordered loop the order is translation invariant. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> ord_trans_inv<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main">∈</span><span class="free">L</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> ordLoopAssum assms <span class="keyword1"><span class="command">have</span></span> 
    <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span> <span class="main">⟷</span> <span class="main">⟨</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span> <span class="free">x</span><span class="main">,</span><span class="free">z</span><span class="main">⟩</span><span class="main">,</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">⟩</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span> <span class="main">⟷</span> <span class="main">⟨</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span><span class="free">z</span><span class="main">,</span><span class="free">x</span><span class="main">⟩</span><span class="main">,</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span><span class="free">z</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span> <span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> lsq_members <span class="keyword1"><span class="command">unfolding</span></span> IsAnOrdLoop_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ In an ordered loop the strict order is translation invariant. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> strict_ord_trans_inv<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">y</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main">∈</span><span class="free">L</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> ord_trans_inv <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main">≠</span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main">≠</span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main">=</span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> less_members qg_cancel_right <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main">≠</span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main">=</span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> less_members qg_cancel_left <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main">≠</span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We can cancel an element from both sides of an inequality on the right side. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> ineq_cancel_right<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> ordLoopAssum assms<span class="main">(</span>1<span class="main">,</span>2<span class="main">,</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span> <span class="main">⟷</span> <span class="main">⟨</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span> <span class="free">x</span><span class="main">,</span><span class="free">z</span><span class="main">⟩</span><span class="main">,</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">⟩</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> IsAnOrdLoop_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>4<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We can cancel an element from both sides of a strict inequality on the right side. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> strict_ineq_cancel_right<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">z</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms ineq_cancel_right <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We can cancel an element from both sides of an inequality on the left side. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> ineq_cancel_left<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> ordLoopAssum assms<span class="main">(</span>1<span class="main">,</span>2<span class="main">,</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span> <span class="main">⟷</span> <span class="main">⟨</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span><span class="free">z</span><span class="main">,</span><span class="free">x</span><span class="main">⟩</span><span class="main">,</span><span class="free">A</span><span class="main">`</span><span class="main">⟨</span><span class="free">z</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> IsAnOrdLoop_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>4<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We can cancel an element from both sides of a strict inequality on the left side. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> strict_ineq_cancel_left<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">z</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">y</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">y</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms ineq_cancel_left <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The definition of the nonnegative set in the notation used in the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>loop1›</span></span></span></span> locale: ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> nonneg_definition<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span> <span class="main">⟷</span> <span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ordLoopAssum IsAnOrdLoop_def Nonnegative_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The nonnegative set is contained in the loop.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> nonneg_subset<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span> <span class="main">⊆</span> <span class="free">L</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> Nonnegative_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The positive set is contained in the loop.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> positive_subset<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span> <span class="main">⊆</span> <span class="free">L</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> PositiveSet_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The definition of the positive set in the notation used in the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>loop1›</span></span></span></span> locale: ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> posset_definition<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span> <span class="main">⟷</span> <span class="main">(</span><span class="main"><span class="free">𝟬</span></span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">x</span> <span class="main">∧</span> <span class="free">x</span><span class="main">≠</span><span class="main"><span class="free">𝟬</span></span><span class="main">)</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> ordLoopAssum IsAnOrdLoop_def PositiveSet_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Another form of the definition of the positive set in the notation used in the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>loop1›</span></span></span></span> locale: ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> posset_definition1<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span> <span class="main">⟷</span> <span class="main"><span class="free">𝟬</span></span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">x</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> ordLoopAssum IsAnOrdLoop_def PositiveSet_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>


<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ The order in an ordered loop is antisymmeric. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> loop_ord_antisym<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">x</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> ordLoopAssum assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"antisym<span class="main">(</span><span class="free">r</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">y</span><span class="main">,</span><span class="free">x</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> IsAnOrdLoop_def IsPartOrder_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> Fol1_L4<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ The loop order is transitive. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> loop_ord_trans<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span> 
  <span class="keyword1"><span class="command">from</span></span> ordLoopAssum assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"trans<span class="main">(</span><span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span> <span class="main">∧</span> <span class="main">⟨</span><span class="free">y</span><span class="main">,</span><span class="free">z</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> IsAnOrdLoop_def IsPartOrder_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="free">z</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> Fol1_L3<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ A form of mixed transitivity for the strict order: ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> loop_strict_ord_trans<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">z</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> loop_ord_trans<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> loop_ord_antisym <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ Another form of mixed transitivity for the strict order: ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> loop_strict_ord_trans1<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">z</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> loop_ord_trans<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">z</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> loop_ord_antisym <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ We can move an element to the other side of an inequality. Well, not exactly, but
  our notation creates an illusion to that effect. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> lsq_other_side<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;lsq&gt;</span></span><span class="free">y</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> lsq_members neut_props_loop<span class="main">(</span>1<span class="main">)</span> lrdiv_props<span class="main">(</span>2<span class="main">,</span>5<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main"><span class="free">𝟬</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> neut_props_loop<span class="main">(</span>2<span class="main">)</span> lrdiv_props<span class="main">(</span>6<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="free">𝟬</span></span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ineq_cancel_left
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> nonneg_definition <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">y</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="main"><span class="free">𝟬</span></span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> neut_props_loop<span class="main">(</span>2<span class="main">)</span> lrdiv_props<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="free">𝟬</span></span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;lsq&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ineq_cancel_right
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇧</span><sup>+</sup></span></span>"</span></span> <span class="keyword1"><span class="command">using</span></span>  nonneg_definition <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ We can move an element to the other side of a strict inequality. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> loop1<span class="main">)</span> ls_other_side<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ls&gt;</span></span><span class="free">y</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span><span class="main">∈</span><span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> lsq_members neut_props_loop<span class="main">(</span>1<span class="main">)</span> lrdiv_props<span class="main">(</span>2<span class="main">,</span>5<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main"><span class="free">𝟬</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> neut_props_loop<span class="main">(</span>2<span class="main">)</span> lrdiv_props<span class="main">(</span>6<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">x</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="free">𝟬</span></span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> strict_ineq_cancel_left
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main"><span class="free">\&lt;rm&gt;</span></span><span class="free">x</span><span class="main"><span class="free">\&lt;ad&gt;</span></span><span class="free">y</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> posset_definition1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">y</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">=</span> <span class="main"><span class="free">𝟬</span></span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> neut_props_loop<span class="main">(</span>2<span class="main">)</span> lrdiv_props<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span><span class="main"><span class="free">\&lt;ra&gt;</span></span><span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="free">𝟬</span></span><span class="main">∈</span><span class="free">L</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="free">L</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free">𝟬</span></span> <span class="main"><span class="free">\&lt;ls&gt;</span></span> <span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> strict_ineq_cancel_right
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">y</span><span class="main"><span class="free">\&lt;rs&gt;</span></span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> <span class="keyword1"><span class="free">L<span class="hidden">⇩</span><sub>+</sub></span></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> posset_definition1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

  
<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>