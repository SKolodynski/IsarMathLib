<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Topology_ZF_4a</title>
</head>


<body>
<div class="head">
<h1>Theory Topology_ZF_4a</h1>
</div>

<pre class="source"><span class="comment1">(* 
    This file is a part of IsarMathLib - 
    a library of formalized mathematics written for Isabelle/Isar.

    Copyright (C) 2019 Slawomir Kolodynski

    This program is free software; Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED 
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. *)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹ Topology and neighborhoods ›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Topology_ZF_4a <span class="keyword2"><span class="keyword">imports</span></span> <a href="Topology_ZF_4.html">Topology_ZF_4</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ This theory considers the relations between topology and systems of neighborhood filters. ›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Neighborhood systems ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ The standard way of defining a topological space is by specifying a collection
of sets that we consider "open" (see the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Topology_ZF›</span></span></span></span> theory). 
An alternative of this approach is to define a collection of neighborhoods for each point of 
the space.  ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ We define a neighborhood system as a function that takes each point $x\in X$ and assigns it 
a collection of subsets of $X$ which is called the neighborhoods of $x$. 
The neighborhoods of a point $x$ form a filter that satisfies an additional
axiom that for every neighborhood $N$ of $x$ we can find another one $U$ such that $N$ 
is a neighborhood of every point of $U$. ›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsNeighSystem</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> _"</span> 90<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">ℳ</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">a</span></span> <span class="keyword1"><span class="free">neighborhood</span></span> <span class="keyword1"><span class="free">system</span></span> <span class="keyword1"><span class="free">on}</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">≡</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ℳ</span></span></span> <span class="main">:</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">→</span>Pow<span class="main">(</span>Pow<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
  <span class="main">(</span><span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ℳ</span></span></span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">N</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">ℳ</span></span></span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">N</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">ℳ</span></span></span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span><span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span><span class="main">(</span><span class="bound">N</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">ℳ</span></span></span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span> <span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ A neighborhood system on $X$ consists of collections of subsets of $X$. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> neighborhood_subset<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">N</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">N</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">N</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">ℳ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> <span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span> <span class="main">:</span> <span class="free">X</span><span class="main">→</span>Pow<span class="main">(</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span> <span class="main">∈</span> Pow<span class="main">(</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> apply_funtype <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">N</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">N</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">N</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsNeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Some sources (like Wikipedia) use a bit different definition of neighborhood systems
where the $U$ is required to be contained in $N$. The next lemma shows that this stronger version 
can be recovered from our definition. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> neigh_def_stronger<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">N</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span><span class="main">.</span><span class="bound">U</span><span class="main">⊆</span><span class="free">N</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span><span class="main">(</span><span class="free">N</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> areNeigh<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="skolem">W</span><span class="main">.</span><span class="main">(</span><span class="free">N</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span>  IsNeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?U</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="free">N</span><span class="main">∩</span><span class="skolem">W</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="quoted"><span class="quoted">‹<span class="skolem">W</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def IsFilter_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?U</span><span class="main">⊆</span><span class="free">N</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> areNeigh <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="var">?U</span><span class="main">.</span><span class="main">(</span><span class="free">N</span><span class="main">∈</span><span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Topology from neighborhood systems ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Given a neighborhood system $\{\mathcal{M}_x\}_{x\in X}$ we can define a topology on $X$.
Namely, we consider a subset of $X$ open if $U \in \mathcal{M}_x$ for every element $x$ of $U$. ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ The collection of sets defined as above is indeed a topology. ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> topology_from_neighs<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">defines</span></span> Tdef<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">≡</span> <span class="main">{</span><span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span> <span class="main">=</span> <span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">𝔘</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">𝔘</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">𝔘</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">𝔘</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>›</span></span> Tdef <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">𝔘</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="skolem">𝔘</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="skolem">𝔘</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">with</span></span> assms <span class="quoted"><span class="quoted">‹<span class="skolem">𝔘</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>›</span></span> 
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="skolem">𝔘</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="free">X</span>"</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋃</span><span class="skolem">𝔘</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">𝔘</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsFilter_def
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">}</span></span> 
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">𝔘</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Tdef <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> 
  <span class="keyword1"><span class="command">}</span></span>        
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">from</span></span> Tdef <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span>  <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> assms <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span><span class="main">∈</span><span class="free">T</span>›</span></span> Tdef <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="free">X</span>"</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsFilter_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Tdef <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span> <span class="main">=</span> <span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def IsFilter_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ Some sources (like Wikipedia) define the open sets generated by a neighborhood system
  "as those sets containing a neighborhood of each of their points". The next lemma shows that
  this definition is equivalent to the one we are using.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> topology_from_neighs1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span> <span class="main">∃</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span> <span class="bound">V</span><span class="main">⊆</span><span class="bound">U</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?T</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span> <span class="main">∃</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span> <span class="bound">V</span><span class="main">⊆</span><span class="bound">U</span><span class="main">}</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span><span class="main">⊆</span><span class="var">?T</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?S</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> assms <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="var">?S</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">.</span> <span class="skolem">U</span> <span class="main">∈</span> <span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def IsFilter_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?T</span><span class="main">⊆</span><span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹ Neighborhood system from topology ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ Once we have a topology $T$ we can define a natural neighborhood system on $X=\bigcup T$. 
  In this section we define such neighborhood system and prove its basic properties.  ›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹For a topology $T$ we define a neighborhood system of $T$ as a function that takes an $x\in X=\bigcup T$ 
and assigns it a collection supersets of open sets containing $x$. 
We call that the "neighborhood system of $T$"›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">NeighSystem</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">{neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">of}</span> _"</span> 91<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">{neighborhood</span></span> <span class="keyword1"><span class="free">system</span></span> <span class="keyword1"><span class="free">of}</span></span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">≡</span> <span class="main">{</span> <span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="main">{</span><span class="bound">V</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span><span class="main">.</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">.</span><span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="bound">V</span><span class="main">)</span><span class="main">}</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">}</span>"</span></span> 

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ The next lemma shows that open sets are members of (what we will prove later to be) the natural 
  neighborhood system on $X=\bigcup T$. ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> open_are_neighs<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">U</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="main">∈</span> <span class="main">{</span><span class="bound">V</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span><span class="main">.</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span><span class="main">(</span><span class="free">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="bound">V</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ Another fact we will need is that for every $x\in X=\bigcup T$ the neighborhoods of $x$
  form a filter ›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> neighs_is_filter<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span> 
  <span class="keyword2"><span class="keyword">defines</span></span> Mdef<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span> <span class="main">≡</span> <span class="keyword1">{neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">of}</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?𝔉</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">V</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span><span class="main">.</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span><span class="main">(</span><span class="free">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="bound">V</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span><span class="main">∉</span><span class="var">?𝔉</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?X</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">from</span></span> assms <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="var">?X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?X</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="var">?X</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="var">?X</span> <span class="main">∧</span> <span class="var">?X</span><span class="main">⊆</span><span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> carr_open 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span><span class="main">(</span><span class="free">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="var">?X</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">A</span><span class="main">∈</span><span class="var">?𝔉</span><span class="main">.</span> <span class="main">∀</span><span class="bound">B</span><span class="main">∈</span><span class="var">?𝔉</span><span class="main">.</span> <span class="bound">A</span><span class="main">∩</span><span class="bound">B</span> <span class="main">∈</span> <span class="var">?𝔉</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span><span class="main">⊆</span><span class="skolem">A</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span><span class="main">⊆</span><span class="skolem">B</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">A</span><span class="main">∈</span><span class="var">?𝔉</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">B</span><span class="main">∈</span><span class="var">?𝔉</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∩</span><span class="skolem">B</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
        <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span><span class="main">∩</span><span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span><span class="main">∩</span><span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span><span class="main">∩</span><span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">⊆</span> <span class="skolem">A</span><span class="main">∩</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">∩</span><span class="skolem">B</span> <span class="main">∈</span> <span class="var">?𝔉</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">B</span><span class="main">∈</span><span class="var">?𝔉</span><span class="main">.</span> <span class="main">∀</span><span class="bound">C</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span><span class="main">.</span> <span class="bound">B</span><span class="main">⊆</span><span class="bound">C</span> <span class="main">⟶</span> <span class="bound">C</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">B</span> <span class="skolem">C</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">⊆</span><span class="skolem">C</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="skolem">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">⊆</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">B</span><span class="main">⊆</span><span class="skolem">C</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?𝔉</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsFilter_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> Mdef <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">∈</span><span class="var">?X</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">ℳ</span><span class="main">`</span><span class="main">(</span><span class="free">x</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ZF_fun_from_tot_val1 NeighSystem_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ The next theorem states that the the natural 
  neighborhood system on $X=\bigcup T$ indeed is a neighborhood system. ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> neigh_from_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">{neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">of}</span> <span class="free">T</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">on}</span> <span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ℳ</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="keyword1">{neighborhood</span> <span class="keyword1">system</span> <span class="keyword1">of}</span> <span class="free">T</span>"</span></span> 
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?ℳ</span> <span class="main">:</span> <span class="var">?X</span><span class="main">→</span>Pow<span class="main">(</span>Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="var">?X</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">V</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span><span class="main">.</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span><span class="main">(</span><span class="skolem">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="bound">V</span><span class="main">)</span><span class="main">}</span> <span class="main">∈</span> Pow<span class="main">(</span>Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="var">?X</span><span class="main">.</span> <span class="main">{</span><span class="bound">V</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span><span class="main">.</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span><span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="bound">V</span><span class="main">)</span><span class="main">}</span> <span class="main">∈</span> Pow<span class="main">(</span>Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> ZF_fun_from_total NeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="var">?X</span><span class="main">.</span> <span class="main">(</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">filter</span> <span class="keyword1">on}</span> <span class="var">?X</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> neighs_is_filter NeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="var">?X</span><span class="main">.</span> <span class="main">∀</span><span class="bound">N</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">N</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span><span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span><span class="main">(</span><span class="bound">N</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">N</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="var">?X</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span> <span class="main">∈</span> <span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?𝔉</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">V</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?X</span><span class="main">)</span><span class="main">.</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span><span class="main">(</span><span class="skolem">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">⊆</span><span class="bound">V</span><span class="main">)</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="var">?X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> <span class="var">?𝔉</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ZF_fun_from_tot_val1 NeighSystem_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">N</span> <span class="main">∈</span> <span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">N</span><span class="main">∈</span><span class="var">?𝔉</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">N</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">N</span><span class="main">∈</span><span class="var">?𝔉</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">⊆</span><span class="skolem">N</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">N</span><span class="main">∈</span><span class="var">?𝔉</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> <span class="var">?𝔉</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> assms <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span>  <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">⊆</span><span class="skolem">N</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">N</span><span class="main">∈</span><span class="var">?𝔉</span>›</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="skolem">U</span><span class="main">.</span><span class="main">(</span><span class="skolem">N</span> <span class="main">∈</span> <span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> ZF_fun_from_tot_val1 open_are_neighs neighs_is_filter 
                NeighSystem_def IsFilter_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span><span class="main">.</span><span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span><span class="main">(</span><span class="skolem">N</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="skolem">N</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">N</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="skolem">x</span><span class="main">)</span><span class="main">.</span><span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="bound">U</span><span class="main">.</span><span class="main">(</span><span class="skolem">N</span><span class="main">∈</span><span class="var">?ℳ</span><span class="main">`</span><span class="main">(</span><span class="bound">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>      
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsNeighSystem_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>