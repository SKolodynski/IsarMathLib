<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Topology_ZF_2</title>
</head>


<body>
<div class="head">
<h1>Theory Topology_ZF_2</h1>
</div>

<pre class="source"><span class="comment1">(* 
    This file is a part of IsarMathLib - 
    a library of formalized mathematics for Isabelle/Isar.

    Copyright (C) 2005 - 2008  Slawomir Kolodynski

    This program is free software Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES LOSS OF USE, DATA, OR PROFITS OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Topology 2›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Topology_ZF_2 <span class="keyword2"><span class="keyword">imports</span></span> <a href="Topology_ZF_1.html">Topology_ZF_1</a> <a href="func1.html">func1</a> <a href="Fol1.html">Fol1</a>

<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹This theory continues the series on general topology and covers the 
  definition and basic properties of continuous functions. We also introduce the notion of 
  homeomorphism an prove the pasting lemma.›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Continuous functions.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this section we define continuous functions and prove that certain 
  conditions are equivalent to a function being continuous.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In standard math we say that a function is contiuous with respect to two
  topologies $\tau_1 ,\tau_2 $ if the inverse image of sets from topology 
  $\tau_2$ are in $\tau_1$. Here we define a predicate that is supposed
  to reflect that definition, with a difference that we don't require in the
  definition that $\tau_1 ,\tau_2 $ are topologies. This means for example that 
  when we define measurable functions, the definition will be the same. 
  
  The notation <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>f-``(A)›</span></span></span></span> means the inverse image of (a set)
  $A$ with respect to (a function) $f$.
›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">IsContinuous</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">τ<span class="hidden">⇩</span><sub>1</sub></span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">τ<span class="hidden">⇩</span><sub>2</sub></span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">τ<span class="hidden">⇩</span><sub>2</sub></span></span></span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free"><span class="bound"><span class="entity">τ<span class="hidden">⇩</span><sub>1</sub></span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A trivial example of a continuous function - identity is continuous.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> id_cont<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ</span><span class="main">,</span><span class="free">τ</span><span class="main">,</span>id<span class="main">(</span><span class="main">⋃</span><span class="free">τ</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">τ</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"id<span class="main">(</span><span class="main">⋃</span><span class="free">τ</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> vimage_id_same <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">τ</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"id<span class="main">(</span><span class="main">⋃</span><span class="free">τ</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ</span><span class="main">,</span><span class="free">τ</span><span class="main">,</span>id<span class="main">(</span><span class="main">⋃</span><span class="free">τ</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We will work with a pair of topological spaces. The following 
  locale sets up our context that consists of 
  two topologies $\tau_1,\tau_2$ and 
  a continuous function $f: X_1 \rightarrow X_2$, where $X_i$ is defined 
  as $\bigcup\tau_i$ for $i=1,2$. We also define notation <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>cl<span class="hidden">⇩</span><sub>1</sub>(A)›</span></span></span></span> and
  <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>cl<span class="hidden">⇩</span><sub>2</sub>(A)›</span></span></span></span> for closure of a set $A$ in topologies $\tau_1$ and $\tau_2$,
  respectively.›</span></span>

<span class="keyword1"><span class="command">locale</span></span> two_top_spaces0 <span class="main">=</span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau1_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau2_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X1_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X2_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">f</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> fmapAssum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">:</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">→</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">isContinuous</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">continuous}</span>"</span> <span class="main">[</span>50<span class="main">]</span> 50<span class="main">)</span>
  <span class="keyword2"><span class="keyword">defines</span></span> isContinuous_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span> <span class="main">≡</span> IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> cl1_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">A</span><span class="main">)</span> <span class="main">≡</span> Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> cl2_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">A</span><span class="main">)</span> <span class="main">≡</span> Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>


<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹First we show that theorems proven in locale <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>topology0›</span></span></span></span> 
  are valid when applied to topologies $\tau_1$ and $\tau_2$.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> topol_cntxs_valid<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> tau1_is_top tau2_is_top topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹For continuous functions the inverse image of a closed set is closed.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> TopZF_2_1_L1<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">D</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">D</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">D</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> func1_1_L3 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="free">D</span><span class="main">)</span> <span class="main">=</span>  <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">-</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">D</span><span class="main">)</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> Pi_iff function_vimage_Diff func1_1_L4 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">-</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="free">D</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">D</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">-</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="free">D</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IsClosed_def IsContinuous_def topol_cntxs_valid topology0.Top_3_L9
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">D</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If the inverse image of every closed set is closed, then the
  image of a closure is contained in the closure of the image.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> Top_ZF_2_1_L2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">D</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">D</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">⟶</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">D</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> func1_1_L6 topol_cntxs_valid topology0.cl_contains_set 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> fmapAssum A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> func1_1_L9 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> fmapAssum A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> func1_1_L6 func1_1_L8 IsClosed_def 
      topol_cntxs_valid topology0.cl_is_closed topology0.Top_3_L13
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> fun_is_function function_image_vimage <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>
    
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If $f\left( \overline{A}\right)\subseteq \overline{f(A)}$ 
  (the image of the closure is contained in the closure of the image), then
  $\overline{f^{-1}(B)}\subseteq f^{-1}\left( \overline{B} \right)$ 
  (the inverse image of the closure contains the closure of the 
  inverse image).›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> Top_ZF_2_1_L3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">A</span><span class="main">.</span> <span class="main">(</span> <span class="bound">A</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⟶</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="bound">A</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">A</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span> <span class="bound">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">⟶</span> <span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">B</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> fmapAssum A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> func1_1_L3 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="quoted"><span class="quoted">‹<span class="skolem">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> fun_is_function function_image_vimage func1_1_L6
	topol_cntxs_valid topology0.top_closure_mono
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> fmapAssum fun_is_function <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="quoted"><span class="quoted">‹<span class="skolem">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> 
      <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> func1_1_L3 func1_1_L9 IsClosed_def 
	topol_cntxs_valid topology0.cl_is_closed <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If $\overline{f^{-1}(B)}\subseteq f^{-1}\left( \overline{B} \right)$ 
  (the inverse image of a closure contains the closure of the 
  inverse image), then the function is continuous. This lemma closes a series of 
  implications in lemmas  <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span> Top_ZF_2_1_L1›</span></span></span></span>, 
  <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span> Top_ZF_2_1_L2›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span> Top_ZF_2_1_L3›</span></span></span></span> showing equivalence 
  of four definitions of continuity.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> Top_ZF_2_1_L4<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">B</span><span class="main">.</span> <span class="main">(</span> <span class="bound">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">⟶</span> <span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> topol_cntxs_valid topology0.Top_3_L9 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span> <span class="main">=</span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> topol_cntxs_valid topology0.Top_3_L8 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">cl<span class="hidden">⇩</span><sub>2</sub></span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">cl<span class="hidden">⇩</span><sub>1</sub></span><span class="main">(</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> func1_1_L3 topol_cntxs_valid topology0.cl_contains_set
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">-</span> <span class="skolem">U</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> fmapAssum func1_1_L3 topol_cntxs_valid topology0.Top_3_L8
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> fmapAssum <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> fun_is_function function_vimage_Diff func1_1_L4
	func1_1_L3 IsClosed_def double_complement <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Another condition for continuity: it is sufficient to check if the 
  inverse image of every set in a base is open.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> Top_ZF_2_1_L5<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">⊆</span> <span class="free">B</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span> <span class="main">⊆</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> tau1_is_top <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span> <span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">⊆</span> <span class="free">B</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span>  <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>
  
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We can strenghten the previous lemma: it is sufficient to check if the 
  inverse image of every set in a subbase is open. The proof is rather awkward,
  as usual when we deal with general intersections. We have to keep track of 
  the case when the collection is empty.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> Top_ZF_2_1_L6<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?C</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?C</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IsAsubBaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="var">?C</span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?C</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> tau1_is_top <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
	<span class="keyword1"><span class="command">using</span></span> empty_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">≠</span> <span class="main">0</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> func1_1_L13<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="var">?C</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
	<span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋂</span><span class="skolem">A</span>"</span></span> 
	<span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="skolem">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> inter_nempty_nempty<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">W</span><span class="main">)</span><span class="main">.</span> <span class="bound">W</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span> <span class="main">≠</span> <span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">W</span><span class="main">)</span><span class="main">.</span> <span class="bound">W</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>
	<span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> fin_image_fin<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">W</span><span class="main">)</span><span class="main">.</span> <span class="bound">W</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
	<span class="keyword1"><span class="command">using</span></span> topol_cntxs_valid topology0.fin_inter_open_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">⊆</span> <span class="free">B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> tau2_is_top A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">⊆</span> Pow<span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
	<span class="keyword1"><span class="command">using</span></span> IsAsubBaseFor_def IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> fmapAssum <span class="quoted"><span class="quoted">‹<span class="skolem">A</span><span class="main">≠</span><span class="main">0</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋂</span><span class="skolem">A</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋂</span><span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">W</span><span class="main">)</span><span class="main">.</span> <span class="bound">W</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span>"</span></span>
	<span class="keyword1"><span class="command">using</span></span> func1_1_L12 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_ZF_2_1_L5 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A dual of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span> Top_ZF_2_1_L5›</span></span></span></span>: a function that maps base sets to open sets
  is open.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> base_image_open<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">ℬ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">B</span><span class="main">∈</span><span class="free">ℬ</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 A3 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">ℰ</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">ℰ</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">ℬ</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">ℰ</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">U</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">E</span><span class="main">)</span><span class="main">.</span> <span class="bound">E</span> <span class="main">∈</span> <span class="skolem">ℰ</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5  fmapAssum image_of_Union
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> 
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="quoted"><span class="quoted">‹<span class="skolem">ℰ</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">ℬ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">E</span><span class="main">)</span><span class="main">.</span> <span class="bound">E</span> <span class="main">∈</span> <span class="skolem">ℰ</span><span class="main">}</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">E</span><span class="main">)</span><span class="main">.</span> <span class="bound">E</span> <span class="main">∈</span> <span class="skolem">ℰ</span><span class="main">}</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> tau2_is_top IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> tau2_is_top IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A composition of two continuous functions is continuous.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> comp_cont<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">S</span><span class="main">,</span><span class="free">R</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">R</span><span class="main">,</span><span class="free">g</span> <span class="keyword1">O</span> <span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsContinuous_def vimage_comp <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A composition of three continuous functions is continuous.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> comp_cont3<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">S</span><span class="main">,</span><span class="free">R</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">R</span><span class="main">,</span><span class="free">P</span><span class="main">,</span><span class="free">h</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">P</span><span class="main">,</span><span class="free">h</span> <span class="keyword1">O</span> <span class="free">g</span> <span class="keyword1">O</span> <span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsContinuous_def vimage_comp <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Homeomorphisms›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹This section studies ''homeomorphisms'' - continous bijections whose inverses
  are also continuous. Notions that are preserved by (commute with)
  homeomorphisms are called ''topological invariants''.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Homeomorphism is a bijection that preserves open sets.›</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="quoted"><span class="quoted">"<span class="free">IsAhomeomorphism</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">S</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">)</span> <span class="main">≡</span>
         <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">∈</span> bij<span class="main">(</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">,</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">S</span></span></span><span class="main">)</span> <span class="main">∧</span> IsContinuous<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">S</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">)</span> <span class="main">∧</span> IsContinuous<span class="main">(</span><span class="free"><span class="bound"><span class="entity">S</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">,</span>converse<span class="main">(</span><span class="free"><span class="bound"><span class="entity">f</span></span></span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Inverse (converse) of a homeomorphism is a homeomorphism.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> homeo_inv<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">S</span><span class="main">,</span><span class="free">T</span><span class="main">,</span>converse<span class="main">(</span><span class="free">f</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsAhomeomorphism_def bij_converse_bij bij_converse_converse
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Homeomorphisms are open maps.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> homeo_open<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">∈</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms image_converse IsAhomeomorphism_def IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A continuous bijection that is an open map is a homeomorphism.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> bij_cont_open_homeo<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">∈</span> bij<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="main">⋃</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">S</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms image_converse IsAhomeomorphism_def IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A continuous bijection that maps base to open sets is a homeomorphism.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> bij_base_open_homeo<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">∈</span> bij<span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">ℬ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">𝒞</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A4<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">𝒞</span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A5<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">ℬ</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms tau2_is_top tau1_is_top bij_converse_bij bij_is_fun two_top_spaces0_def 
  image_converse two_top_spaces0.Top_ZF_2_1_L5 IsAhomeomorphism_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A bijection that maps base to base is a homeomorphism.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> bij_base_homeo<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">∈</span> bij<span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">ℬ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
  A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">.</span> <span class="bound">B</span><span class="main">∈</span><span class="free">ℬ</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">note</span></span> A1
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">C</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∈</span> <span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">.</span> <span class="bound">B</span><span class="main">∈</span><span class="free">ℬ</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">∈</span><span class="free">ℬ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">=</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="quoted"><span class="quoted">‹<span class="skolem">B</span><span class="main">∈</span><span class="free">ℬ</span>›</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">C</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
         <span class="keyword1"><span class="command">using</span></span> bij_def inj_vimage_image base_sets_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">C</span> <span class="main">∈</span> <span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span><span class="main">.</span> <span class="bound">B</span><span class="main">∈</span><span class="free">ℬ</span><span class="main">}</span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">C</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A3 <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> Top_ZF_2_1_L5<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> 
  <span class="keyword1"><span class="command">from</span></span> A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">B</span><span class="main">∈</span><span class="free">ℬ</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">B</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_sets_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_image_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> bij_cont_open_homeo <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Interior is a topological invariant.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> int_top_invariant<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span>Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> Interior<span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?𝒜</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?𝒜</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="bound">V</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?𝒜</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="bound">V</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> homeo_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="bound">V</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">S</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> II<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?U</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> II <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?U</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">A</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> IsAhomeomorphism_def bij_def inj_vimage_image <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="quoted"><span class="quoted">‹<span class="skolem">V</span><span class="main">∈</span><span class="free">S</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?U</span><span class="main">∈</span><span class="free">T</span>"</span></span> 
        <span class="keyword1"><span class="command">using</span></span> IsAhomeomorphism_def IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span> 
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span><span class="main">∈</span><span class="free">S</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">=</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="var">?U</span><span class="main">)</span>"</span></span> 
        <span class="keyword1"><span class="command">using</span></span> IsAhomeomorphism_def bij_def surj_image_vimage <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?𝒜</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">V</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="bound">V</span> <span class="main">⊆</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?𝒜</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span>Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>  <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="var">?𝒜</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> Interior_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">…</span> <span class="main">=</span> <span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?𝒜</span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> IsAhomeomorphism_def bij_def inj_def image_of_Union <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">from</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">…</span> <span class="main">=</span> Interior<span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> Interior_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Topologies induced by mappings›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this section we consider various ways a topology may be defined on a set that
  is the range (or the domain) of a function whose domain (or range) is a topological space.
›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A bijection from a topological space induces a topology on the range.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> bij_induced_top<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">∈</span> bij<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="free">Y</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">{</span> <span class="main">{</span><span class="free">f</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="free">Y</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
  <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span> <span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">}</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">∈</span> inj<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="free">Y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">:</span><span class="main">⋃</span><span class="free">T</span><span class="main">→</span><span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?S</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">V</span><span class="main">)</span><span class="main">.</span> <span class="bound">V</span><span class="main">∈</span><span class="skolem">M</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">⊆</span> <span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">W</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="skolem">M</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">M</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?S</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">=</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span> <span class="main">∈</span> inj<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="free">Y</span><span class="main">)</span>›</span></span>  <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">=</span> <span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_vimage_image <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋃</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">∈</span>  <span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">M</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span><span class="main">:</span><span class="main">⋃</span><span class="free">T</span><span class="main">→</span><span class="free">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">⊆</span> <span class="free">T</span>›</span></span>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">}</span>"</span></span>
         <span class="keyword1"><span class="command">using</span></span> image_of_Union <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">}</span> <span class="main">=</span> <span class="skolem">M</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span><span class="main">:</span><span class="main">⋃</span><span class="free">T</span><span class="main">→</span><span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>  func1_1_L6 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">M</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?S</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">⊆</span> Pow<span class="main">(</span><span class="free">Y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
        <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">}</span> <span class="main">=</span> <span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_def surj_subsets <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="var">?M<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">M</span> <span class="main">∈</span> <span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?S</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">∈</span> <span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?S</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span></span> <span class="skolem"><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
      I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">=</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span><span class="main">∩</span><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span><span class="main">∩</span><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">∈</span> <span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span><span class="main">∩</span><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">=</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">∈</span> <span class="free">T</span>›</span></span>  <span class="quoted"><span class="quoted">‹<span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">∈</span> <span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> bij_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span> <span class="main">∈</span> inj<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="free">Y</span><span class="main">)</span>›</span></span> I <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U<span class="hidden">⇩</span><sub>T</sub></span><span class="main">∩</span><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span><span class="main">)</span> <span class="main">=</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inj_image_inter 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">∈</span> <span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="var">?S</span><span class="main">.</span> <span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="var">?S</span><span class="main">.</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span> <span class="main">∈</span> <span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span><span class="main">:</span><span class="main">⋃</span><span class="free">T</span><span class="main">→</span><span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">=</span> <span class="main">{</span><span class="free">f</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> func_imagedef <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span> <span class="main">{</span><span class="free">f</span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>  
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?S</span> <span class="main">=</span>  <span class="free">Y</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> 
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span><span class="main">:</span><span class="main">⋃</span><span class="free">T</span><span class="main">→</span><span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> func1_1_L6 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?S</span> <span class="main">⊆</span> <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
    <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">Y</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="var">?S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_def surj_range_image_domain 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="var">?S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">from</span></span> A2  <span class="quoted"><span class="quoted">‹<span class="main">⋃</span><span class="var">?S</span> <span class="main">=</span>  <span class="free">Y</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="main">∈</span> bij<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="main">⋃</span><span class="var">?S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="var">?S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?S</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">=</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span><span class="main">)</span>"</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">f</span> <span class="main">∈</span> inj<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">,</span><span class="free">Y</span><span class="main">)</span>›</span></span>  <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>  <span class="keyword1"><span class="command">using</span></span> inj_vimage_image 
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="var">?S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span><span class="quoted"><span class="quoted">"IsAhomeomorphism<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="var">?S</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bij_cont_open_homeo 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Partial functions and continuity›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Suppose we have two topologies $\tau_1,\tau_2$ on sets
$X_i=\bigcup\tau_i, i=1,2$. Consider some function $f:A\rightarrow X_2$, where
$A\subseteq X_1$ (we will call such function ''partial''). In such situation we have two
natural possibilities for the pairs of topologies with respect to which this function may
be continuous. One is obviously the original $\tau_1,\tau_2$ and in the second one
the first element of the pair is the topology relative to the domain of the
function: $\{A\cap U | U \in \tau_1\}$. These two possibilities are not exactly
the same and the goal of this section is to explore the differences.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a function is continuous, then its restriction is continous in relative
  topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> restr_cont<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span>restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?g</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∩</span> <span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> fmapAssum func1_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a function is continuous, then it is continuous when we restrict
  the topology on the range to the image of the domain.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> restr_image_cont<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">.</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">V</span> <span class="main">∩</span> <span class="free">f</span><span class="main">``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> fmapAssum inv_im_inter_im IsContinuous_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A combination of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>restr_cont›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>restr_image_cont›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> restr_restr_image_cont<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">=</span> restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A4<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">=</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">g</span><span class="main">``</span><span class="main">(</span><span class="free">A</span><span class="main">)</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 A4 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">=</span> <span class="free">A</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> union_restrict <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"two_top_spaces0<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">from</span></span> A4 <span class="keyword1"><span class="command">have</span></span>
      <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> tau1_is_top tau2_is_top
	topology0_def topology0.Top_1_L4 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 A3 <span class="quoted"><span class="quoted">‹<span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">=</span> <span class="free">A</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">:</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">→</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> fmapAssum restrict_type2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> two_top_spaces0_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> restr_cont <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">g</span><span class="main">``</span><span class="main">(</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">)</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> two_top_spaces0.restr_image_cont<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">=</span> <span class="free">A</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We need a context similar to <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>two_top_spaces0›</span></span></span></span> but without
the global function $f:X_1\rightarrow X_2$.›</span></span>

<span class="keyword1"><span class="command">locale</span></span> two_top_spaces1 <span class="main">=</span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau1_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau2_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X1_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X2_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a partial function $g:X_1\supseteq A\rightarrow X_2$ is continuous with
respect to $(\tau_1,\tau_2)$, then $A$ is open (in $\tau_1$) and 
the function is continuous in the relative topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces1<span class="main">)</span> partial_fun_cont<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">:</span><span class="free">A</span><span class="main">→</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
    <span class="keyword1"><span class="command">using</span></span> tau2_is_top IsATopology_def IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> func1_1_L4 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> func1_1_L3 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">A</span> <span class="main">∩</span> <span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹For partial function defined on open sets continuity in the whole
  and relative topologies are the same.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces1<span class="main">)</span> part_fun_on_open_cont<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">:</span><span class="free">A</span><span class="main">→</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">g</span><span class="main">)</span> <span class="main">⟷</span> 
         IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> partial_fun_cont <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span> <span class="free">g</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">A</span><span class="main">∩</span><span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> tau1_is_top IsATopology_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Product topology and continuity›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We start with three topological spaces $(\tau_1,X_1), (\tau_2,X_2)$ and
$(\tau_3,X_3)$ and a function $f:X_1\times X_2\rightarrow X_3$. We will study
the properties of $f$ with respect to the product topology $\tau_1\times \tau_2$
and $\tau_3$. This situation is similar as in locale <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>two_top_spaces0›</span></span></span></span>
but the first topological space is assumed to be a product of two topological spaces.
›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹First we define a locale with three topological spaces.›</span></span>

<span class="keyword1"><span class="command">locale</span></span> prod_top_spaces0 <span class="main">=</span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau1_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau2_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> tau3_is_top<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X1_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X2_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">X<span class="hidden">⇩</span><sub>3</sub></span>
  <span class="keyword2"><span class="keyword">defines</span></span> X3_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">X<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">≡</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span>"</span></span>

  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">η</span>
  <span class="keyword2"><span class="keyword">defines</span></span> eta_def <span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">η</span> <span class="main">≡</span> ProductTopology<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Fixing the first variable in a two-variable continuous function results in a 
continuous function.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> prod_top_spaces0<span class="main">)</span> fix_1st_var_cont<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">:</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→</span><span class="free">X<span class="hidden">⇩</span><sub>3</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">η</span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span>Fix1stVar<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">x</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms fix_1st_var_vimage IsContinuous_def tau1_is_top tau2_is_top
    prod_sec_open1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Fixing the second variable in a two-variable continuous function results in a
continuous function.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> prod_top_spaces0<span class="main">)</span> fix_2nd_var_cont<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">:</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→</span><span class="free">X<span class="hidden">⇩</span><sub>3</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">η</span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span><span class="main">∈</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span>Fix2ndVar<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">y</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms fix_2nd_var_vimage IsContinuous_def tau1_is_top tau2_is_top
    prod_sec_open2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Having two constinuous mappings we can construct a third one on the cartesian product
  of the domains.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> cart_prod_cont<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">η<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">η<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A3a<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">:</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→</span><span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> A3b<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">:</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→</span><span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A4<span class="main">:</span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A5<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">p</span><span class="main">,</span><span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">p</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span>ProductTopology<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">,</span>ProductTopology<span class="main">(</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?τ</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"ProductTopology<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?η</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"ProductTopology<span class="main">(</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Y<span class="hidden">⇩</span><sub>1</sub></span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Y<span class="hidden">⇩</span><sub>2</sub></span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?B</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?τ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="var">?η</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">:</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">→</span> <span class="var">?Y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?Y<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">p</span> <span class="main">∈</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"fst<span class="main">(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"snd<span class="main">(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> A3a <span class="quoted"><span class="quoted">‹fst<span class="main">(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="skolem">p</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?Y<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> apply_funtype<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A3b <span class="quoted"><span class="quoted">‹snd<span class="main">(</span><span class="skolem">p</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="skolem">p</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?Y<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> apply_funtype<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="skolem">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="skolem">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">p</span> <span class="main">∈</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span><span class="main">.</span> <span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span> <span class="main">∈</span> <span class="var">?Y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?Y<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> A5 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">:</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">→</span> <span class="var">?Y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?Y<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ZF_fun_from_total
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?τ</span> <span class="main">=</span> <span class="var">?X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?η</span> <span class="main">=</span> <span class="var">?Y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="var">?Y<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"two_top_spaces0<span class="main">(</span><span class="var">?τ</span><span class="main">,</span><span class="var">?η</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> two_top_spaces0_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="var">?η</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="var">?B</span><span class="main">.</span> <span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="bound">U</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?τ</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?B</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">η<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">∈</span> <span class="free">η<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">V</span><span class="main">×</span><span class="skolem">W</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> ProductCollection_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A3a A3b A5 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">=</span> <span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">×</span> <span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">-``</span><span class="main">(</span><span class="skolem">W</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> cart_prod_fun_vimage <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 A4 <span class="quoted"><span class="quoted">‹<span class="skolem">V</span> <span class="main">∈</span> <span class="free">η<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">W</span> <span class="main">∈</span> <span class="free">η<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">×</span> <span class="free">f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">-``</span><span class="main">(</span><span class="skolem">W</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?τ</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsContinuous_def prod_open_open_prod <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">-``</span><span class="main">(</span><span class="skolem">U</span><span class="main">)</span> <span class="main">∈</span> <span class="var">?τ</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> two_top_spaces0.Top_ZF_2_1_L5
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A reformulation of the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>cart_prod_cont›</span></span></span></span> lemma above in slightly different notation.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> product_cont_functions<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">:</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span><span class="main">:</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">→</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>4</sub></span>"</span></span> 
    <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">f</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>4</sub></span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
    <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>4</sub></span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span>ProductTopology<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">)</span><span class="main">,</span>ProductTopology<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>4</sub></span><span class="main">)</span><span class="main">,</span><span class="main">{</span><span class="main">⟨</span><span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span><span class="main">,</span><span class="main">⟨</span><span class="free">f</span><span class="main">`</span><span class="bound">x</span><span class="main">,</span><span class="free">g</span><span class="main">`</span><span class="bound">y</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">}</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span><span class="main">,</span><span class="main">⟨</span><span class="free">f</span><span class="main">`</span><span class="bound">x</span><span class="main">,</span><span class="free">g</span><span class="main">`</span><span class="bound">y</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">p</span><span class="main">,</span><span class="main">⟨</span><span class="free">f</span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="free">g</span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">p</span> <span class="main">∈</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">with</span></span> tau1_is_top tau2_is_top assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> cart_prod_cont <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A special case of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>cart_prod_cont›</span></span></span></span> when the function acting on the second 
  axis is the identity.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> cart_prod_cont1<span class="main">:</span>
 <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A1a<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">η<span class="hidden">⇩</span><sub>1</sub></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="keyword2"><span class="keyword">and</span></span>
  A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">:</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">→</span><span class="main">⋃</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A4<span class="main">:</span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A5<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">p</span><span class="main">,</span> <span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">p</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span>ProductTopology<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">,</span>ProductTopology<span class="main">(</span><span class="free">η<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">,</span><span class="free">g</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"id<span class="main">(</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">.</span> <span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span><span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="bound">x</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> id_conv <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">hence</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">p</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">.</span> snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span> <span class="main">=</span> <span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">note</span></span> A1 A1a A2 A1a A3
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">:</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">→</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>  <span class="keyword1"><span class="command">using</span></span> id_type <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> A4
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"IsContinuous<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> id_cont <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">=</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">p</span><span class="main">,</span> <span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span> <span class="main">⟩</span><span class="main">.</span> <span class="bound">p</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">from</span></span> A5 I <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="free">g</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⟨</span><span class="bound">p</span><span class="main">,</span> <span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">p</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A5 I <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⟨</span><span class="bound">p</span><span class="main">,</span> <span class="main">⟨</span><span class="free">f<span class="hidden">⇩</span><sub>1</sub></span><span class="main">`</span><span class="main">(</span>fst<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">,</span><span class="var">?f<span class="hidden">⇩</span><sub>2</sub></span><span class="main">`</span><span class="main">(</span>snd<span class="main">(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">⟩</span><span class="main">⟩</span><span class="main">.</span> <span class="bound">p</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="main">⋃</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">}</span> <span class="main">⊆</span> <span class="free">g</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> cart_prod_cont<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


 <span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Pasting lemma›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The classical pasting lemma states that if $U_1,U_2$ are both open (or closed) and a function
  is continuous when restricted to both $U_1$ and $U_2$ then it is continuous
  when restricted to $U_1 \cup U_2$. In this section we prove a generalization statement
stating that the set $\{ U \in \tau_1 | f|_U$ is continuous $\}$ is a
topology.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A typical statement of the pasting lemma uses the notion of a function 
restricted to a set being continuous without specifying the topologies with 
respect to which this continuity holds.
In <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>two_top_spaces0›</span></span></span></span> context the notation <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>g {is continuous}›</span></span></span></span>
means continuity wth respect to topologies $\tau_1, \tau_2$.
The next lemma is a special case of <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>partial_fun_cont›</span></span></span></span> and states that if
for some set $A\subseteq X_1=\bigcup \tau_1$
the function $f|_A$ is continuous (with respect to $(\tau_1, \tau_2)$), then 
$A$ has to be open. This clears up terminology and indicates why we need
to pay attention to the issue of which topologies we talk about when we say
that the restricted (to some closed set for example) function is continuos.
›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> restriction_continuous1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"two_top_spaces1<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
    <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">:</span><span class="free">A</span><span class="main">→</span><span class="free">X<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> tau1_is_top tau2_is_top two_top_spaces1_def fmapAssum restrict_fun
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> two_top_spaces1.partial_fun_cont <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a fuction is continuous on each set of a collection of open sets, then
  it is continuous on the union of them. We could use continuity with respect to
  the relative topology here, but we know that on open sets this is the same as the
  original topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> pasting_lemma1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">M</span> <span class="main">⊆</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">M</span><span class="main">.</span> restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="bound">U</span><span class="main">)</span>  <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">⋃</span><span class="free">M</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">M</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">⋃</span><span class="free">M</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="main">(</span><span class="main">⋃</span><span class="free">M</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> func1_2_L1 fmapAssum <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">…</span> <span class="main">=</span> <span class="main">⋃</span> <span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">M</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">finally</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">⋃</span><span class="free">M</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span> <span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">M</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">M</span><span class="main">}</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">W</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">∈</span> <span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">M</span><span class="main">}</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">M</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="skolem">U</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">V</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="skolem">U</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋃</span><span class="free">M</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span><span class="main">∈</span><span class="free">M</span>›</span></span> 
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="skolem">U</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="skolem">U</span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> fmapAssum func1_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="skolem">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">with</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">M</span><span class="main">}</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
       <span class="keyword1"><span class="command">using</span></span> tau1_is_top IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">⋃</span><span class="free">M</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a function is continuous on two sets, then it is continuous
  on intersection.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> cont_inter_cont<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span>  <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>  <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">B</span><span class="main">)</span>  <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span>  <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span>
      <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="free">A</span>"</span></span>  <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
      <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> func1_2_L1 fmapAssum IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span><span class="main">)</span> <span class="main">∩</span> <span class="main">(</span>restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="main">(</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> 
    <span class="keyword1"><span class="command">from</span></span> A2 <span class="quoted"><span class="quoted">‹<span class="skolem">V</span><span class="main">∈</span><span class="free">τ<span class="hidden">⇩</span><sub>2</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> 
      <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span><span class="main">)</span> <span class="main">∩</span> <span class="main">(</span>restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> tau1_is_top IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> 
    <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span> <span class="main">⊆</span> <span class="free">X<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">=</span> <span class="free">f</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∩</span> <span class="main">(</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> func1_2_L1 fmapAssum <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span><span class="main">-``</span><span class="main">(</span><span class="skolem">V</span><span class="main">)</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span>  IsContinuous_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The collection of open sets $U$ such that $f$ restricted to 
$U$ is continuous, is a topology.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> pasting_theorem<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">.</span> restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="bound">U</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?T</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">.</span> restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="bound">U</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">M</span><span class="main">∈</span>Pow<span class="main">(</span><span class="var">?T</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="bound">M</span> <span class="main">∈</span> <span class="var">?T</span>"</span></span> 
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">⋃</span><span class="skolem">M</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> pasting_lemma1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">M</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?T</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">M</span> <span class="main">∈</span> <span class="var">?T</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> tau1_is_top IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="var">?T</span><span class="main">.</span><span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="var">?T</span><span class="main">.</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span> <span class="main">∈</span> <span class="var">?T</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> cont_inter_cont tau1_is_top IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹0 is continuous.›</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">in</span></span> two_top_spaces0<span class="main">)</span> zero_continuous<span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?T</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">U</span> <span class="main">∈</span> <span class="free">τ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">.</span> restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="bound">U</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> pasting_theorem<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span><span class="main">∈</span><span class="var">?T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> empty_open<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">0</span><span class="main">)</span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">continuous}</span></span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"restrict<span class="main">(</span><span class="free">f</span><span class="main">,</span><span class="main">0</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>