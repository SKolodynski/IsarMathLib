<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Topology_ZF_examples_1</title>
</head>


<body>
<div class="head">
<h1>Theory Topology_ZF_examples_1</h1>
</div>

<pre class="source"><span class="comment1">(* 
    This file is a part of IsarMathLib - 
    a library of formalized mathematics written for Isabelle/Isar.

    Copyright (C) 2012 Daniel de la Concepcion

    This program is free software; Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED 
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. 
IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR 
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. *)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹More examples in topology›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Topology_ZF_examples_1
<span class="keyword2"><span class="keyword">imports</span></span> <a href="Topology_ZF_1.html">Topology_ZF_1</a> <a href="Order_ZF.html">Order_ZF</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this theory file we reformulate the concepts related to a topology
in relation with a base of the topology and we give examples of topologies defined by
bases or subbases.›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹New ideas using a base for a topology›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹The topology of a base›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Given a family of subsets satisfying the base condition,
  it is possible to construct a topology where that family is a base of. Even more,
  it is the only topology with such characteristics.›</span></span>

<span class="keyword1"><span class="command">definition</span></span> 
  <span class="entity">TopologyWithBase</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">TopologyBase</span> _ "</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">U</span></span></span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span> <span class="main">⟹</span> <span class="keyword1"><span class="free">TopologyBase</span></span> <span class="free"><span class="bound"><span class="entity">U</span></span></span> <span class="main">≡</span> <span class="keyword1">THE</span> <span class="bound">T</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">U</span></span></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="bound">T</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹ If a collection $U$ of sets satisfies the base condition then the topology
  constructed from it is indeed a topology and $U$ is a base for this topology. ›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Base_topology_is_a_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">TopologyBase</span> <span class="free">U</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">TopologyBase</span> <span class="free">U</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">T</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>
    Top_1_2_T1<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃!</span><span class="bound">T</span><span class="main">.</span> <span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="bound">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> same_base_same_top ex1I<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P<span class="main"><span class="main">=</span></span>
    <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">T</span><span class="main">.</span> <span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="bound">T</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">TopologyBase</span> <span class="free">U</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">using</span></span> theI<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P<span class="main"><span class="main">=</span></span>
    <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">T</span><span class="main">.</span> <span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="bound">T</span>"</span></span><span class="main">]</span> TopologyWithBase_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">TopologyBase</span> <span class="free">U</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_T1<span class="main">(</span>1<span class="main">)</span>
    IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A base doesn't need the empty set.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> base_no_0<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span> <span class="main">⟷</span> <span class="main">(</span><span class="free">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">Q</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="main">-</span> <span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="main">-</span> <span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">M</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="skolem">Q</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">" <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="main">-</span> <span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> "</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="main">-</span> <span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span> <span class="main">⟷</span> <span class="main">(</span><span class="free">B</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The interior of a set is the union of all the sets of the base which are fully
  contained by it.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> interior_set_base_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span><span class="main">⊆</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span><span class="main">∈</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span> <span class="main">⊆</span> <span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span>  <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span> <span class="main">⊆</span> Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> topology0.Top_2_L5 topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">⊆</span> Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">T</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">V</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> point_open_base_neigh topology0.Top_2_L2 topology0_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">V</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">⊆</span><span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.Top_2_L1 topology0_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>  
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span> <span class="free">T</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">}</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In the following, we offer another lemma about the closure of a set 
  given a basis for a topology. This lemma is based on <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>cl_inter_neigh›</span></span></span></span> and <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>inter_neigh_cl›</span></span></span></span>. 
  It states that it is only necessary to check the sets of the base, not all the open sets.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> closure_set_base_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span> <span class="main">=</span> <span class="main">{</span><span class="bound">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span><span class="main">.</span> <span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">T</span><span class="main">⟶</span><span class="free">A</span><span class="main">∩</span><span class="bound">T</span><span class="main">≠</span><span class="main">0</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">,</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0_def topology0.Top_3_L11<span class="main">(</span>1<span class="main">)</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">T</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_sets_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">,</span>3<span class="main">)</span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">∩</span><span class="skolem">T</span> <span class="main">≠</span> <span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0_def topology0.cl_inter_neigh
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">T</span><span class="main">⟶</span><span class="free">A</span><span class="main">∩</span><span class="bound">T</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">{</span><span class="bound">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span><span class="main">.</span> <span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">T</span><span class="main">⟶</span><span class="free">A</span><span class="main">∩</span><span class="bound">T</span><span class="main">≠</span><span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">⊆</span><span class="main">{</span><span class="bound">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span><span class="main">.</span> <span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">T</span><span class="main">⟶</span><span class="free">A</span><span class="main">∩</span><span class="bound">T</span><span class="main">≠</span><span class="main">0</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>                     
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">{</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">Q</span> <span class="main">.</span> <span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="bound">T</span> <span class="main">⟶</span> <span class="free">A</span> <span class="main">∩</span> <span class="bound">T</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">R</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="free">Q</span>"</span></span>                     
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> RR<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">⊆</span><span class="free">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">W</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>
        IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> RR<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">WW</span></span> <span class="keyword2"><span class="keyword">where</span></span> TT<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">WW</span><span class="main">∈</span><span class="skolem">W</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">WW</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">{</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∩</span><span class="free">A</span><span class="main">=</span><span class="main">0</span>"</span></span>
          <span class="keyword1"><span class="command">with</span></span> RR<span class="main">(</span>2<span class="main">)</span> TT<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">WW</span><span class="main">∩</span><span class="free">A</span><span class="main">=</span><span class="main">0</span>"</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
           <span class="keyword1"><span class="command">with</span></span> TT<span class="main">(</span>1<span class="main">)</span> RR<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">WW</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">WW</span><span class="main">∩</span><span class="free">A</span><span class="main">=</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span><span class="main">-</span><span class="skolem">WW</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">with</span></span> TT<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">Q</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">⟶</span> <span class="bound">U</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">,</span>3<span class="main">)</span> topology0_def topology0.inter_neigh_cl 
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">Q</span> <span class="main">.</span> <span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="bound">T</span> <span class="main">⟶</span> <span class="free">A</span> <span class="main">∩</span> <span class="bound">T</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span> <span class="main">⊆</span> Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The restriction of a base is a base for the restriction.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> subspace_base_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span> <span class="main">=</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">W</span><span class="main">∩</span><span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">C</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">C</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?A</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">V</span><span class="main">∩</span><span class="free">Y</span><span class="main">.</span> <span class="bound">V</span><span class="main">∈</span><span class="skolem">C</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">C</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">W</span><span class="main">∩</span><span class="free">Y</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">W</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">C</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> 
        <span class="quoted"><span class="quoted">"<span class="var">?A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span><span class="main">(</span><span class="main">⋃</span><span class="var">?A</span><span class="main">)</span>"</span></span> 
        <span class="keyword1"><span class="command">unfolding</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">⊆</span> <span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">(</span><span class="main">⋃</span><span class="skolem">A</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?A<span class="hidden">⇩</span><sub>0</sub></span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">C</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="free">Y</span><span class="main">∩</span><span class="bound">C</span><span class="main">∈</span><span class="skolem">A</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?A<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊆</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">=</span> <span class="var">?A<span class="hidden">⇩</span><sub>0</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> RestrictedTo_def
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="main">(</span><span class="main">⋃</span><span class="skolem">A</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?A<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊆</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="main">(</span><span class="var">?A<span class="hidden">⇩</span><sub>0</sub></span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> RestrictedTo_def IsAbaseFor_def
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">}</span> <span class="main">⊆</span> <span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span> 
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If the base of a topology is contained in the base of another
topology, then the topologies maintain the same relation.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> base_subset<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">B2</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T2</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">B</span><span class="main">⊆</span><span class="free">B2</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="main">⊆</span><span class="free">T2</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">M</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="free">B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="free">B2</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">T2</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Dual Base for Closed Sets›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A dual base for closed sets is the collection of complements
of sets of a base for the topology.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">DualBase</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">DualBase</span> _ _"</span> 80<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">⟹</span> <span class="keyword1"><span class="free">DualBase</span></span> <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">≡</span><span class="main">{</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">-</span><span class="bound">U</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">}</span>"</span></span>


<span class="keyword1"><span class="command">lemma</span></span> closed_inter_dual_base<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">D</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span><span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">B</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">M</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">M</span><span class="main">⊆</span><span class="keyword1">DualBase</span> <span class="free">B</span> <span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">=</span><span class="main">⋂</span><span class="free">M</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> K<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋀</span><span class="bound">M</span><span class="main">.</span> <span class="bound">M</span> <span class="main">⊆</span> <span class="keyword1">DualBase</span> <span class="free">B</span> <span class="free">T</span> <span class="main">⟹</span> <span class="free">D</span> <span class="main">=</span> <span class="main">⋂</span><span class="bound">M</span> <span class="main">⟹</span> <span class="free">thesis</span>"</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">≠</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> D<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">D</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsClosed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="main">(</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">D</span><span class="main">)</span><span class="main">=</span><span class="free">D</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">D</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> QQ<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">D</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">=</span><span class="main">0</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">Q</span><span class="main">=</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> QQ<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="free">D</span><span class="main">=</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> D<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
      <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> QNN<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> QQ<span class="main">(</span>2<span class="main">)</span> A<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="main">⋃</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> QNN <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">=</span><span class="main">⋂</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="bound">R</span><span class="main">.</span> <span class="bound">R</span><span class="main">∈</span><span class="skolem">Q</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command"><span class="improper">with</span></span></span> assms<span class="main">(</span>2<span class="main">)</span> QQ<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">-</span><span class="bound">R</span><span class="main">.</span> <span class="bound">R</span><span class="main">∈</span><span class="skolem">Q</span><span class="main">}</span><span class="main">⊆</span><span class="keyword1">DualBase</span> <span class="free">B</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> DualBase_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> calculation K <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">thesis</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">D</span><span class="main">=</span><span class="main">⋃</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">}</span><span class="main">⊆</span><span class="keyword1">DualBase</span> <span class="free">B</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> DualBase_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span> <span class="main">=</span> <span class="main">⋂</span><span class="main">{</span><span class="main">⋃</span><span class="free">T</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> calculation K AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="free">thesis</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="free">thesis</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We have already seen for a base that whenever
there is a union of open sets, we can consider only basic open sets
due to the fact that any open set is a union of basic open sets.
What we should expect now is that when there is an intersection
of closed sets, we can consider only dual basic closed sets.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> closure_dual_base<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">Q</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span><span class="main">=</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span><span class="main">.</span> <span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">Q</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> DualBase_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="skolem">T</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">T</span><span class="main">=</span><span class="main">⋃</span><span class="free">Q</span><span class="main">-</span><span class="skolem">R</span><span class="main">∧</span><span class="skolem">R</span><span class="main">∈</span><span class="free">U</span><span class="main">)</span><span class="main">∨</span><span class="skolem">T</span><span class="main">=</span><span class="main">⋃</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> DualBase_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">T</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span><span class="free">Q</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="skolem">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.Top_3_L1 topology0_def
      topology0.Top_3_L9 base_sets_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> SUB<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span><span class="main">.</span> <span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span><span class="main">⊆</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span><span class="free">Q</span><span class="main">)</span><span class="main">∧</span><span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> calculation assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">⋃</span><span class="free">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span><span class="free">Q</span><span class="main">)</span><span class="main">∧</span><span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span><span class="main">⊆</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span><span class="main">.</span> <span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span><span class="main">.</span> <span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Closure_def ClosedCovers_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span><span class="main">.</span> <span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
      <span class="keyword3"><span class="command">assume</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">∩</span><span class="skolem">T</span><span class="main">=</span><span class="main">0</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> B<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">Q</span><span class="main">-</span><span class="skolem">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> DualBase_def
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> C assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">Q</span><span class="main">-</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">moreover</span></span>
        <span class="keyword1"><span class="command">from</span></span> B<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="main">⋃</span><span class="free">Q</span><span class="main">-</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span><span class="main">.</span> <span class="free">A</span><span class="main">⊆</span><span class="bound">T</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">∩</span><span class="skolem">T</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">T</span><span class="main">⟶</span><span class="free">A</span><span class="main">∩</span><span class="bound">T</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> T A assms<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> calculation assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> closure_set_base_topology
     <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="keyword1">DualBase</span> <span class="free">U</span> <span class="free">Q</span> <span class="main">.</span> <span class="free">A</span> <span class="main">⊆</span> <span class="bound">T</span><span class="main">}</span> <span class="main">⊆</span> Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Partition topology›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In the theory file Partitions\_ZF.thy; there is
a definition to work with partitions. In this setting
is much easier to work with a family of subsets.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsAPartition</span> <span class="main">(</span><span class="quoted">"_<span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span>_"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">U</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">a</span></span> <span class="keyword1"><span class="free">partition</span></span> <span class="keyword1"><span class="free">of}</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">U</span></span></span><span class="main">=</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">A</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">U</span></span></span><span class="main">.</span> <span class="main">∀</span><span class="bound">B</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">U</span></span></span><span class="main">.</span> <span class="bound">A</span><span class="main">=</span><span class="bound">B</span><span class="main">∨</span> <span class="bound">A</span><span class="main">∩</span><span class="bound">B</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">∧</span> <span class="main">0</span><span class="main">∉</span><span class="free"><span class="bound"><span class="entity">U</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A subcollection of a partition is a partition
of its union.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> subpartition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="main">⊆</span><span class="free">U</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span><span class="main">⋃</span><span class="free">V</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A restriction of a partition is a partition. If the empty set appears
it has to be removed.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> restriction_partition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span><span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">U</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="main">(</span><span class="free">X</span><span class="main">∩</span><span class="free">Y</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsAPartition_def RestrictedTo_def
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Given a partition, 
the complement of a union of a subfamily
is a union of a subfamily.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> diff_union_is_union_diff<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span><span class="main">⊆</span><span class="free">P</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">-</span> <span class="main">⋃</span><span class="free">R</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="free">P</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span> <span class="main">-</span> <span class="main">⋃</span><span class="free">R</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> P<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="main">⋃</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> P<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> P<span class="main">(</span>1<span class="main">)</span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span><span class="main">(</span><span class="free">P</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="free">P</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">-</span> <span class="main">⋃</span><span class="free">R</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="free">P</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="free">P</span><span class="main">-</span><span class="free">R</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span><span class="free">P</span><span class="main">-</span><span class="free">R</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> C<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span><span class="free">P</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∉</span><span class="free">R</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">R</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">t</span></span> <span class="keyword2"><span class="keyword">where</span></span> G<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="free">R</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> C<span class="main">(</span>3<span class="main">)</span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∩</span><span class="skolem">Q</span><span class="main">≠</span><span class="main">0</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="free">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> C<span class="main">(</span>1<span class="main">,</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">=</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> C<span class="main">(</span>2<span class="main">)</span> G<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∉</span><span class="main">⋃</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span><span class="main">-</span><span class="main">⋃</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="free">P</span><span class="main">-</span><span class="free">R</span><span class="main">)</span><span class="main">⊆</span><span class="free">X</span> <span class="main">-</span> <span class="main">⋃</span><span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Partition topology is a topology.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A partition satisfies the base condition.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> partition_base_condition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">P</span><span class="main">∧</span><span class="skolem">V</span><span class="main">∈</span><span class="free">P</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span><span class="skolem">V</span><span class="main">∨</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
      <span class="keyword3"><span class="command">assume</span></span> ASS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> AS ASS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">P</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∧</span> <span class="skolem">U</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">P</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span><span class="main">∧</span> <span class="bound">W</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">x</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">P</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Since a partition is a base of a topology, and this topology
is uniquely determined; we can built it. In the definition
we have to make sure that we have a partition.›</span></span>

<span class="keyword1"><span class="command">definition</span></span> 
  <span class="entity">PartitionTopology</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">PTopology</span> _ _"</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">U</span></span></span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1"><span class="free">PTopology</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">U</span></span></span> <span class="main">≡</span> <span class="keyword1">TopologyBase</span> <span class="free"><span class="bound"><span class="entity">U</span></span></span>"</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Ptopology_is_a_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms Base_topology_is_a_topology partition_base_condition 
    PartitionTopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> topology0_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology topology0_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Total set, Closed sets, Interior, Closure and Boundary›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The topology is defined in the set $X$›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> union_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">=</span><span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> Top_1_2_L5
    IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The closed sets are the open sets.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> closed_sets_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span><span class="quoted"><span class="quoted">"<span class="free">D</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span> <span class="main">⟷</span> <span class="free">D</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms
  <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="free">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">D</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">D</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsClosed_def union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A<span class="main">(</span>2<span class="main">)</span> B <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> Q<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">D</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L1<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> B<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> U<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">D</span>"</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="main">(</span><span class="free">X</span><span class="main">-</span><span class="skolem">D</span><span class="main">)</span><span class="main">=</span><span class="skolem">D</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 
    <span class="keyword1"><span class="command">with</span></span> Q<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="main">⋃</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> Q<span class="main">(</span>1<span class="main">)</span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="free">T</span><span class="main">-</span><span class="skolem">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> diff_union_is_union_diff
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> B <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">D</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> B <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> Q<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="free">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">D</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="main">⋃</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> Q<span class="main">(</span>1<span class="main">)</span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">D</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="free">T</span><span class="main">-</span><span class="skolem">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> diff_union_is_union_diff
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> B <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">D</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> Q <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> calculation assms <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">D</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">T</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> IsClosed_def union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹There is a formula for the interior
given by an intersection of sets of the dual base.
Is the intersection of all the closed sets of the dual basis
such that they do not complement $A$ to $X$.
Since the interior of $X$ must be inside $X$, we have to 
enter $X$ as one of the sets to be intersected.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> interior_set_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="free">A</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> topology0.open_open_neigh topology0_ptopology
      topology0.Top_2_L2 topology0.Top_2_L1
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="keyword2"><span class="keyword">where</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">⊆</span><span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
      IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A<span class="main">(</span>1<span class="main">,</span>3<span class="main">)</span> assms <span class="keyword1"><span class="command">have</span></span> XX<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">∈</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> union_ptopology<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span>"</span></span><span class="main">]</span> DualBase_def<span class="main">[</span><span class="operator">of</span><span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span><span class="main">]</span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span><span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> B<span class="main">(</span>2<span class="main">)</span> A<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="skolem">B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> AS<span class="main">(</span>1<span class="main">)</span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="skolem">w</span><span class="main">∧</span><span class="skolem">w</span><span class="main">∈</span><span class="free">U</span><span class="main">)</span><span class="main">∨</span><span class="main">(</span><span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> DualBase_def union_ptopology Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> AS<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> D<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="skolem">w</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> D<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">⊆</span><span class="main">⋃</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> Top_1_2_L5<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span>"</span></span><span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">w</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> D<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">T</span><span class="main">=</span><span class="skolem">w</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> D<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">{</span></span> 
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span><span class="main">-</span><span class="skolem">T</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> C B<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∩</span><span class="main">(</span><span class="free">X</span><span class="main">-</span><span class="skolem">T</span><span class="main">)</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span><span class="main">-</span><span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>›</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">T</span><span class="main">=</span><span class="skolem">S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span><span class="main">-</span><span class="skolem">T</span><span class="main">=</span><span class="skolem">w</span>›</span></span><span class="quoted"><span class="quoted">‹<span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="skolem">w</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">S</span><span class="main">=</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">S</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> A<span class="main">(</span>3<span class="main">)</span> B<span class="main">(</span>2<span class="main">)</span> C<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">⊆</span><span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="free">A</span><span class="main">⊆</span><span class="free">X</span><span class="main">-</span><span class="skolem">S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">S</span><span class="main">∪</span><span class="free">A</span><span class="main">=</span><span class="free">X</span>"</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">X</span><span class="main">-</span><span class="skolem">S</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> XX <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> p<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> noE<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="main">(</span><span class="skolem">w</span><span class="main">∈</span><span class="free">U</span><span class="main">∧</span><span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="skolem">w</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> DualBase_def
        Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="main">(</span><span class="skolem">w</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">∧</span><span class="skolem">T</span><span class="main">=</span><span class="free">X</span><span class="main">-</span><span class="skolem">w</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_sets_open
        Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.Top_3_L1<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> T<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span>"</span></span><span class="main">]</span>
        topology0_ptopology topology0.Top_3_L9<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> T<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span>"</span></span><span class="main">]</span> union_ptopology
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> p <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">∈</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span><span class="keyword2"><span class="keyword">and</span></span> X<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> 
      DualBase_def union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> calculation assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">closed</span> <span class="keyword1">in}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> topology0.Top_3_L4<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> K<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span><span class="main">]</span> topology0_ptopology<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> U<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> X<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span>"</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> ab<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> closed_sets_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">U</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">B</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> p <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="main">(</span><span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">R</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> base_sets_open Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> DualBase_def union_ptopology
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main">)</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">X</span><span class="main">-</span><span class="skolem">R</span><span class="main">)</span> <span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> R<span class="main">(</span>4<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">R</span><span class="main">∈</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="keyword1">DualBase</span> <span class="free">U</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="bound">T</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="bound">T</span><span class="main">∪</span><span class="free">A</span><span class="main">≠</span><span class="free">X</span><span class="main">}</span><span class="main">⊆</span><span class="free">X</span><span class="main">-</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> R<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="free">X</span><span class="main">-</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> subset_trans<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> A<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> C<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">-</span><span class="skolem">R</span>"</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">=</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">with</span></span> R<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> I<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">X</span><span class="main">-</span><span class="skolem">R</span><span class="main">)</span> <span class="main">∪</span><span class="free">A</span><span class="main">=</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span>
      <span class="keyword3"><span class="command">assume</span></span> ASR<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">y</span><span class="main">∈</span><span class="skolem">R</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> XX<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">y</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span><span class="main">∈</span><span class="main">(</span><span class="free">X</span><span class="main">-</span><span class="skolem">R</span><span class="main">)</span> <span class="main">∪</span><span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> XX <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span><span class="main">∉</span><span class="skolem">R</span><span class="main">∨</span><span class="skolem">y</span><span class="main">∈</span><span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> ASR <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span><span class="main">∈</span><span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="free">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> R<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">R</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="skolem">x</span><span class="main">∈</span><span class="bound">R</span><span class="main">∧</span><span class="bound">R</span><span class="main">⊆</span><span class="free">A</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.Top_2_L6
      topology0_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="keyword1">DualBase</span> <span class="free">U</span> <span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">=</span> <span class="free">X</span> <span class="main">∨</span> <span class="bound">T</span> <span class="main">∪</span> <span class="free">A</span> <span class="main">≠</span> <span class="free">X</span><span class="main">}</span> <span class="main">⊆</span> Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span> <span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The closure of a set is the union of
all the sets of the partition which intersect
with <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>A›</span></span></span></span>.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> closure_set_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.Top_3_L11<span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> T<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span>"</span></span>
      <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> A<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span>"</span></span><span class="main">]</span> topology0_ptopology union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> B<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> T<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span>"</span></span><span class="main">]</span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">W</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">∩</span><span class="skolem">W</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> assms B<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_sets_open Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> calculation assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">∩</span><span class="skolem">W</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0_ptopology<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> U<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> X<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">X</span>"</span></span><span class="main">]</span>
      topology0.cl_inter_neigh union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> B <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span> <span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">T</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> union_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> A<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> B<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">U</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> T<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span>"</span></span><span class="main">]</span>
      Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Q</span>
      <span class="keyword3"><span class="command">assume</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">Q</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">M</span></span> <span class="keyword2"><span class="keyword">where</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">=</span><span class="main">⋃</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> 
        Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
        IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> B<span class="main">(</span>2<span class="main">)</span> C<span class="main">(</span>1<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> D<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> C<span class="main">(</span>2<span class="main">)</span> A<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∩</span><span class="skolem">T</span><span class="main">≠</span><span class="main">0</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">∈</span><span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">=</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> C<span class="main">(</span>1<span class="main">)</span> D<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">⊆</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">Q</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">Q</span> <span class="main">⟶</span> <span class="bound">Q</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> calculation assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0.inter_neigh_cl
      topology0_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span> <span class="main">⊆</span> Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span> <span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The boundary of a set is given by the union of the sets
of the partition which have non empty intersection with the set
but that are not fully contained in it. Another equivalent
statement would be: the union of the sets
of the partition which have non empty intersection with the set
and its complement.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> boundary_set_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">⊆</span><span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"Boundary<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span><span class="main">∈</span><span class="free">U</span><span class="main">.</span> <span class="bound">T</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span> <span class="main">∧</span> <span class="main">~</span><span class="main">(</span><span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">)</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Closure<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>
    closure_set_ptopology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Interior<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span>
    interior_set_base_topology Ptopology_is_a_topology<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> U<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">"<span class="free"><span class="free">U</span></span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> X<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">"<span class="free"><span class="free">X</span></span>"</span></span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> calculation assms <span class="keyword1"><span class="command">have</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"Boundary<span class="main">(</span><span class="free">A</span><span class="main">,</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="main">)</span><span class="main">=</span><span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span> <span class="main">-</span> <span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> topology0.Top_3_L12 topology0_ptopology union_ptopology
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="main">⋃</span><span class="main">(</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> subpartition <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">⊆</span><span class="free">A</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∩</span><span class="free">A</span><span class="main">=</span><span class="skolem">T</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∩</span><span class="free">A</span><span class="main">≠</span><span class="main">0</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="free">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">}</span><span class="main">⊆</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span>"</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span> <span class="main">-</span> <span class="main">⋃</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">}</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="main">(</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">-</span><span class="main">(</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> diff_union_is_union_diff <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">…</span><span class="main">=</span><span class="main">⋃</span><span class="main">(</span><span class="main">{</span><span class="bound">T</span> <span class="main">∈</span> <span class="free">U</span> <span class="main">.</span> <span class="bound">T</span> <span class="main">∩</span> <span class="free">A</span> <span class="main">≠</span> <span class="main">0</span> <span class="main">∧</span> <span class="main">~</span><span class="main">(</span><span class="bound">T</span><span class="main">⊆</span><span class="free">A</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> calculation A <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Special cases and subspaces›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The discrete and the indiscrete topologies appear as special
cases of this partition topologies.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> discrete_partition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span><span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> indiscrete_partition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">≠</span><span class="main">0</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="free">X</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsAPartition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">theorem</span></span> discrete_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">=</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> union_ptopology 
      discrete_partition <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">⊆</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">t</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">=</span><span class="skolem">t</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">t</span><span class="main">}</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span><span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="skolem">t</span><span class="main">}</span><span class="main">)</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">t</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
      discrete_partition IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"Pow<span class="main">(</span><span class="free">X</span><span class="main">)</span> <span class="main">⊆</span> <span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">X</span><span class="main">}</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> indiscrete_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">≠</span><span class="main">0</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">=</span><span class="main">{</span><span class="main">0</span><span class="main">,</span><span class="free">X</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">T</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">M</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">M</span><span class="main">=</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
      indiscrete_partition IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span><span class="main">=</span><span class="main">0</span><span class="main">∨</span><span class="skolem">T</span><span class="main">=</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">⊆</span><span class="main">{</span><span class="main">0</span><span class="main">,</span><span class="free">X</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">0</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>1<span class="main">)</span> empty_open
    indiscrete_partition <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> union_open Ptopology_is_a_topology<span class="main">(</span>1<span class="main">)</span>
    indiscrete_partition <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">∈</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> union_ptopology indiscrete_partition
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">0</span><span class="main">,</span><span class="free">X</span><span class="main">}</span><span class="main">⊆</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The topological subspaces of the <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>(PTopology X U)›</span></span></span></span>
are partition topologies.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> subspace_ptopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span><span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">=</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="main">(</span><span class="free">X</span><span class="main">∩</span><span class="free">Y</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">U</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">U</span><span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> subspace_base_topology <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">U</span><span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="free">X</span> <span class="free">U</span><span class="main">)</span><span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> base_no_0
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">U</span><span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">partition</span> <span class="keyword1">of}</span> <span class="main">(</span><span class="free">X</span><span class="main">∩</span><span class="free">Y</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> restriction_partition <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">U</span><span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span><span class="main">(</span><span class="keyword1">PTopology</span> <span class="main">(</span><span class="free">X</span><span class="main">∩</span><span class="free">Y</span><span class="main">)</span> <span class="main">(</span><span class="main">(</span><span class="free">U</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">Y</span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="main">0</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Ptopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> same_base_same_top <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Order topologies›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Order topology is a topology›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Given a totally ordered set, several topologies can be defined
using the order relation. First we define an open interval, notice that
the set defined as <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>Interval›</span></span></span></span> is a closed interval; and open rays.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IntervalX</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">IntervalX</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">c</span></span></span><span class="main">)</span><span class="main">≡</span><span class="main">(</span>Interval<span class="main">(</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">c</span></span></span><span class="main">)</span><span class="main">∩</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">)</span><span class="main">-</span><span class="main">{</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">c</span></span></span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">LeftRayX</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">LeftRayX</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">)</span><span class="main">≡</span><span class="main">{</span><span class="bound">c</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">⟨</span><span class="bound">c</span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">⟩</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">}</span><span class="main">-</span><span class="main">{</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">RightRayX</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">RightRayX</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">)</span><span class="main">≡</span><span class="main">{</span><span class="bound">c</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">.</span> <span class="main">⟨</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">}</span><span class="main">-</span><span class="main">{</span><span class="free"><span class="bound"><span class="entity">b</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Intersections of intervals and rays.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> inter_two_intervals<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span><span class="main">∩</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms 
    GreaterOf_def SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> ASS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span><span class="main">∩</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> BB<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IntervalX_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def BB<span class="main">(</span>6<span class="main">,</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def BB<span class="main">(</span>7<span class="main">,</span>4<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> BB<span class="main">(</span>2<span class="main">,</span>5<span class="main">)</span> Order_ZF_2_L1A <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def SmallerOf_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IntervalX_def T <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> <span class="main">⊆</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span><span class="main">,</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> BB<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IntervalX_def T <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">from</span></span> BB<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> CC<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1A <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> CC<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∉</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> CC<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def IsTotal_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">bu</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def assms IsLinOrder_def
        antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS BB<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">bv</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS BB<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> CC<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">safe</span> <span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∉</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> CC<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def IsTotal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">safe</span> <span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">cv</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def assms IsLinOrder_def
        antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS BB<span class="main">(</span>4<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">cu</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS BB<span class="main">(</span>4<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1 IntervalX_def
      assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> inter_rray_interval<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> BB<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> RightRayX_def IntervalX_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1A <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> BB<span class="main">(</span>1-4<span class="main">)</span> IntervalX_def GreaterOf_def
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span><span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> <span class="main">⊆</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>Interval<span class="main">(</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IntervalX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1A <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∉</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsLinOrder_def IsTotal_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsLinOrder_def trans_def  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span><span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">bu</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> GreaterOf_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsLinOrder_def
        antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">bv</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span><span class="main">=</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">bv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> calculation <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> RightRayX_def IntervalX_def
      <span class="keyword1"><span class="command">using</span></span> Order_ZF_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">bv</span><span class="main">)</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> <span class="main">⊆</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">lemma</span></span> inter_lray_interval<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span><span class="main">∩</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span><span class="main">∩</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> LeftRayX_def IntervalX_def Interval_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> B<span class="main">(</span>7<span class="main">,</span>1<span class="main">)</span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> B C IntervalX_def Order_ZF_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> <span class="main">⊆</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bv</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IntervalX_def Interval_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∉</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>3<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def IsTotal_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">cu</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def assms IsLinOrder_def
          antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">cv</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def assms IsLinOrder_def
        antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> calculation <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def IntervalX_def Interval_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cu</span><span class="main">)</span> <span class="main">∩</span> IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bv</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> inter_lray_rray<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cv</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> LeftRayX_def RightRayX_def IntervalX_def Interval_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> inter_lray_lray<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> B <span class="keyword1"><span class="command">have</span></span> D<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> B C D <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> <span class="main">⊆</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∉</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def IsTotal_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">bu</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def assms IsLinOrder_def
          antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">cv</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def assms IsLinOrder_def
          antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> inter_rray_rray<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="free">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">)</span><span class="main">∩</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> C<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> B <span class="keyword1"><span class="command">have</span></span> D<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> B C D <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">" RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> <span class="main">⊆</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> R<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⟨</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∉</span><span class="free">r</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> R<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> AS <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def IsTotal_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms IsLinOrder_def trans_def <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">safe</span><span class="main"><span class="keyword3">,</span></span> <span class="operator">blast</span><span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">bu</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="free">bu</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">bu</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def assms IsLinOrder_def
          antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="free">cv</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span><span class="main">=</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def assms IsLinOrder_def
          antisym_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">≠</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="free">bu</span><span class="main">,</span><span class="free">cv</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"False"</span></span> <span class="keyword1"><span class="command">using</span></span> AS <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">bu</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">cv</span><span class="main">,</span><span class="skolem">x</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">bu</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="free">cv</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span> "</span></span> <span class="keyword1"><span class="command">using</span></span> RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span><span class="main">)</span> <span class="main">⊆</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">bu</span><span class="main">)</span> <span class="main">∩</span> RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span> <span class="free">cv</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The open intervals and rays satisfy the base condition.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> intervals_rays_base_condition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">)</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X</span><span class="main">×</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?I</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">)</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X</span><span class="main">×</span><span class="free">X</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?R</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?L</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?B</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">)</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X</span><span class="main">×</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> dU<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?I</span><span class="main">∨</span><span class="skolem">U</span><span class="main">∈</span><span class="var">?L</span><span class="main">∨</span><span class="skolem">U</span><span class="main">∈</span><span class="var">?R</span>"</span></span><span class="keyword2"><span class="keyword">and</span></span> dV<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?I</span><span class="main">∨</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?L</span><span class="main">∨</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?I</span>"</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?I</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">bu</span></span> <span class="skolem"><span class="skolem">cu</span></span> <span class="skolem"><span class="skolem">bv</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bv</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>SmallerOf_def A<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>SmallerOf_def A<span class="main"><span class="keyword3">,</span></span>
          <span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>GreaterOf_def A<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>GreaterOf_def A<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_two_intervals assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?L</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">bu</span></span> <span class="skolem"><span class="skolem">bv</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bv</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_lray_interval assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?R</span>"</span></span> 
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cu</span></span> <span class="skolem"><span class="skolem">bv</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bv</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_rray_interval assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> dU <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?L</span>"</span></span> 
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?I</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">bu</span></span> <span class="skolem"><span class="skolem">bv</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span> <span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bv</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span><span class="skolem">V</span><span class="main">∩</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="quoted"><span class="quoted">‹SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_lray_interval assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?R</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">bu</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span><span class="skolem">V</span><span class="main">∩</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_lray_rray assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?L</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">bu</span></span> <span class="skolem"><span class="skolem">bv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">bu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_lray_lray assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> dU <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="var">?R</span>"</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?I</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cu</span></span> <span class="skolem"><span class="skolem">bv</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bv</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bv</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span><span class="skolem">V</span><span class="main">∩</span><span class="skolem">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="quoted"><span class="quoted">‹GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">bv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_rray_interval assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?L</span>"</span></span> 
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">bu</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">bu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">bu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_lray_rray assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="var">?R</span>"</span></span> 
        <span class="keyword1"><span class="command">with</span></span> S <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">cu</span></span> <span class="skolem"><span class="skolem">cv</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cu</span><span class="main">∈</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">cv</span><span class="main">∈</span><span class="free">X</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">cu</span><span class="main">,</span><span class="skolem">cv</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> A <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> inter_rray_rray assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> dU <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span>  S<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> dV <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∧</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">.</span> <span class="bound">W</span><span class="main">∈</span><span class="main">(</span><span class="var">?B</span><span class="main">)</span><span class="main">∧</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> S <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">(</span><span class="var">?B</span><span class="main">)</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">x</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">(</span><span class="var">?B</span><span class="main">)</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Since the intervals and rays form a base of a topology, and this topology
is uniquely determined; we can built it. In the definition
we have to make sure that we have a totally ordered set.›</span></span>

<span class="keyword1"><span class="command">definition</span></span> 
  <span class="entity">OrderTopology</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">OrdTopology</span> _ _"</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1"><span class="free">OrdTopology</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">≡</span> <span class="keyword1">TopologyBase</span> <span class="main">{</span>IntervalX<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">)</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">×</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Ordtopology_is_a_topology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">)</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X</span><span class="main">×</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms Base_topology_is_a_topology intervals_rays_base_condition 
    OrderTopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> topology0_ordtopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> Ordtopology_is_a_topology topology0_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Total set›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The topology is defined in the set $X$, when $X$ has more than 
one point›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> union_ordtopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span> <span class="main">∧</span> <span class="bound">x</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span> <span class="bound">y</span><span class="main">∈</span><span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span><span class="main">=</span><span class="free">X</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?B</span></span></span><span class="main">=</span><span class="quoted"><span class="quoted">"<span class="main">{</span>IntervalX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">)</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">b</span><span class="main">,</span><span class="bound">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">X</span><span class="main">×</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">have</span></span> base<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="var">?B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Ordtopology_is_a_topology<span class="main">(</span>2<span class="main">)</span> assms<span class="main">(</span>1<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="keyword2"><span class="keyword">where</span></span> T<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="skolem">y</span> <span class="main">∧</span> <span class="skolem">x</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span> <span class="skolem">y</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> B<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">y</span><span class="main">)</span><span class="main">∨</span><span class="skolem">x</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">y</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def RightRayX_def
    assms<span class="main">(</span>1<span class="main">)</span> IsLinOrder_def IsTotal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> T <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> x<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5 base <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">z</span>
    <span class="keyword3"><span class="command">assume</span></span> z<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">z</span><span class="main">∈</span><span class="free">X</span>"</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">=</span><span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> x <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="skolem">z</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> z T <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span><span class="main">∈</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">x</span><span class="main">)</span><span class="main">∨</span><span class="skolem">z</span><span class="main">∈</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">x</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> LeftRayX_def RightRayX_def
        assms<span class="main">(</span>1<span class="main">)</span> IsLinOrder_def IsTotal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span><span class="main">∈</span><span class="main">⋃</span><span class="var">?B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5 base <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">z</span><span class="main">∈</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span><span class="main">⊆</span><span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?B</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IntervalX_def LeftRayX_def RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="keyword1">OrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span><span class="main">⊆</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5 base <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The interior, closure and boundary can be calculated using the formulas
proved in the section that deals with the base.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The subspace of an order topology doesn't have to be an
order topology.›</span></span>

<span class="comment1">(*Note: Build a counter-example using the real numbers.*)</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Right order and Left order topologies.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Notice that the left and right rays are closed under
intersection, hence they form a base of a topology.
They are called right order topology and left order topology
respectively.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If the order in $X$ has a minimal or a maximal element,
is necessary to consider $X$ as an element of the base
or that limit point wouldn't be in any basic open set.›</span></span>

<span class="keyword1"><span class="command">subsubsection</span></span><span class="quoted"><span class="plain_text">‹Right and Left Order topologies are topologies›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> leftrays_base_condition<span class="main">:</span>
<span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="skolem"><span class="skolem">c</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">U</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">)</span><span class="main">)</span><span class="main">∨</span><span class="skolem">U</span><span class="main">=</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">)</span><span class="main">∨</span><span class="skolem">V</span><span class="main">=</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">⊆</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">⊆</span><span class="free">X</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> LeftRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span><span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span><span class="main">)</span><span class="main">∨</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="main">(</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">∧</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span><span class="main">)</span><span class="main">∨</span><span class="main">(</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">)</span><span class="main">∧</span><span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> inter_lray_lray assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span> <span class="main">⟶</span> SmallerOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> SmallerOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">b</span><span class="main">,</span><span class="skolem">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span><span class="main">∧</span><span class="bound">W</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command"><span class="improper">then</span></span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> rightrays_base_condition<span class="main">:</span>
<span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
<span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="skolem"><span class="skolem">c</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">U</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">)</span><span class="main">)</span><span class="main">∨</span><span class="skolem">U</span><span class="main">=</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">)</span><span class="main">∨</span><span class="skolem">V</span><span class="main">=</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">⊆</span><span class="free">X</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">⊆</span><span class="free">X</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span>GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span><span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span><span class="main">)</span><span class="main">∨</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span><span class="free">X</span><span class="main">∨</span><span class="main">(</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">∧</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span><span class="main">)</span><span class="main">∨</span><span class="main">(</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">=</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">)</span><span class="main">∧</span><span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">)</span>"</span></span> 
      <span class="keyword1"><span class="command">using</span></span> inter_rray_rray assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">b</span><span class="main">∈</span><span class="free">X</span><span class="main">∧</span><span class="skolem">c</span><span class="main">∈</span><span class="free">X</span> <span class="main">⟶</span> GreaterOf<span class="main">(</span><span class="free">r</span><span class="main">,</span><span class="skolem">b</span><span class="main">,</span><span class="skolem">c</span><span class="main">)</span><span class="main">∈</span><span class="free">X</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> GreaterOf_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">b</span><span class="main">,</span><span class="skolem">c</span><span class="main">⟩</span><span class="main">∈</span><span class="free">r</span>"</span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">∈</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span><span class="main">∧</span><span class="bound">W</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">definition</span></span> 
  <span class="entity">LeftOrderTopology</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">LOrdTopology</span> _ _"</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1"><span class="free">LOrdTopology</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">≡</span> <span class="keyword1">TopologyBase</span> <span class="main">{</span>LeftRayX<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">definition</span></span> 
  <span class="entity">RightOrderTopology</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">ROrdTopology</span> _ _"</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">)</span> <span class="main">⟹</span> <span class="keyword1"><span class="free">ROrdTopology</span></span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="main">≡</span> <span class="keyword1">TopologyBase</span> <span class="main">{</span>RightRayX<span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">r</span></span></span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free"><span class="bound"><span class="entity">X</span></span></span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">theorem</span></span> LOrdtopology_ROrdtopology_are_topologies<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">LOrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>LeftRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">LOrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">ROrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span>RightRayX<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span><span class="main">.</span> <span class="bound">b</span><span class="main">∈</span><span class="free">X</span><span class="main">}</span><span class="main">∪</span><span class="main">{</span><span class="free">X</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span><span class="keyword1">ROrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> Base_topology_is_a_topology leftrays_base_condition assms rightrays_base_condition
     LeftOrderTopology_def RightOrderTopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> topology0_lordtopology_rordtopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="keyword1">LOrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="keyword1">ROrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> LOrdtopology_ROrdtopology_are_topologies topology0_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">subsubsection</span></span><span class="quoted"><span class="plain_text">‹Total set›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The topology is defined on the set $X$›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> union_lordtopology_rordtopology<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"IsLinOrder<span class="main">(</span><span class="free">X</span><span class="main">,</span><span class="free">r</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="keyword1">LOrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span><span class="main">=</span><span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">(</span><span class="keyword1">ROrdTopology</span> <span class="free">X</span> <span class="free">r</span><span class="main">)</span><span class="main">=</span><span class="free">X</span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5<span class="main">[</span><span class="operator">OF</span> LOrdtopology_ROrdtopology_are_topologies<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main">]</span></span><span class="main">]</span>
    Top_1_2_L5<span class="main">[</span><span class="operator">OF</span> LOrdtopology_ROrdtopology_are_topologies<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main">]</span></span><span class="main">]</span>
  <span class="keyword1"><span class="command">unfolding</span></span> LeftRayX_def RightRayX_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Union of Topologies›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The union of two topologies is not a topology. A way to 
overcome this fact is to define the following topology:›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">joinT</span> <span class="main">(</span><span class="quoted">"<span class="keyword1">joinT</span> _"</span> 90<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">T</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main">.</span> <span class="bound">T</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">Q</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main">.</span> <span class="main">⋃</span><span class="bound">Q</span><span class="main">=</span><span class="main">⋃</span><span class="bound">T</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">(</span><span class="keyword1"><span class="free">joinT</span></span> <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="main">≡</span> <span class="keyword1">THE</span> <span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main">)</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span> <span class="bound">T</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹First let's proof that given a family of sets, then it is a subbase
for a topology.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The first result states that from any family of sets
we get a base using finite intersections of them.
The second one states that any family of sets is a subbase
of some topology.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> subset_as_subbase<span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span>
    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="main">∧</span> <span class="skolem">V</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">M</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="keyword2"><span class="keyword">where</span></span> MR<span class="main">:</span><span class="quoted"><span class="quoted">"Finite<span class="main">(</span><span class="skolem">M</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"Finite<span class="main">(</span><span class="skolem">R</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">⊆</span><span class="free">B</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">⊆</span><span class="free">B</span>"</span></span>
    <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">=</span><span class="main">⋂</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">=</span><span class="main">⋂</span><span class="skolem">R</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
      <span class="keyword3"><span class="command">assume</span></span> AS<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> N<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">≠</span><span class="main">0</span>"</span></span><span class="quoted"><span class="quoted">"<span class="skolem">R</span><span class="main">≠</span><span class="main">0</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> MR<span class="main">(</span>5<span class="main">,</span>6<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"Finite<span class="main">(</span><span class="skolem">M</span> <span class="main">∪</span><span class="skolem">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> MR<span class="main">(</span>1<span class="main">,</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span> <span class="main">∪</span> <span class="skolem">R</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> MR<span class="main">(</span>3<span class="main">,</span>4<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">M</span><span class="main">∪</span><span class="skolem">R</span><span class="main">∈</span>FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">(</span><span class="skolem">M</span><span class="main">∪</span><span class="skolem">R</span><span class="main">)</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">from</span></span> N <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">(</span><span class="skolem">M</span><span class="main">∪</span><span class="skolem">R</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋂</span><span class="skolem">M</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">(</span><span class="skolem">M</span><span class="main">∪</span><span class="skolem">R</span><span class="main">)</span><span class="main">⊆</span><span class="main">⋂</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">(</span><span class="skolem">M</span><span class="main">∪</span><span class="skolem">R</span><span class="main">)</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> MR<span class="main">(</span>5<span class="main">,</span>6<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="skolem">M</span> <span class="main">∪</span> <span class="skolem">R</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="skolem">M</span><span class="main">∨</span><span class="skolem">S</span><span class="main">∈</span><span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="skolem">S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> AS MR<span class="main">(</span>5<span class="main">,</span>6<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="main">⋂</span><span class="main">(</span><span class="skolem">M</span> <span class="main">∪</span> <span class="skolem">R</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> N <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span><span class="main">∧</span><span class="bound">W</span><span class="main">⊆</span><span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">x</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span> <span class="bound">V</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">U</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="main">∧</span> <span class="bound">V</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">⟶</span> 
    <span class="main">(</span><span class="main">∀</span><span class="bound">x</span> <span class="main">∈</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Top_subbase<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">=</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">S</span><span class="main">}</span><span class="main">∈</span>FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span><span class="quoted"><span class="quoted">"<span class="main">⋂</span><span class="main">{</span><span class="skolem">S</span><span class="main">}</span><span class="main">=</span><span class="skolem">S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> FinPow_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="skolem">S</span><span class="main">}</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="main">{</span><span class="skolem">S</span><span class="main">}</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="main">⊆</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> subset_as_subbase <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_2_T1 assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span><span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IsAsubBaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A subbase defines a unique topology.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> same_subbase_same_top<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span> <span class="free">S</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">=</span> <span class="free">S</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> IsAsubBaseFor_def assms same_base_same_top
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>