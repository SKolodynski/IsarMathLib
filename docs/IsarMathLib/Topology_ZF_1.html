<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Topology_ZF_1</title>
</head>


<body>
<div class="head">
<h1>Theory Topology_ZF_1</h1>
</div>

<pre class="source"><span class="comment1">(* 
    This file is a part of IsarMathLib - 
    a library of formalized mathematics for Isabelle/Isar.

    Copyright (C) 2005 - 2008  Slawomir Kolodynski

    This program is free software; Redistribution and use in source and binary forms, 
    with or without modification, are permitted provided that the following conditions are met:

   1. Redistributions of source code must retain the above copyright notice, 
   this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright notice, 
   this list of conditions and the following disclaimer in the documentation and/or 
   other materials provided with the distribution.
   3. The name of the author may not be used to endorse or promote products 
   derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Topology 1›</span></span>

<span class="keyword1"><span class="command">theory</span></span> Topology_ZF_1 <span class="keyword2"><span class="keyword">imports</span></span> <a href="Topology_ZF.html">Topology_ZF</a>

<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this theory file we study separation axioms and the notion of base and
  subbase. Using the products of open sets as a subbase we define a natural
  topology on a product of two topological spaces.›</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Separation axioms.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Topological spaces cas be classified according to certain properties
  called "separation axioms". In this section we define what it means that a 
  topological space is $T_0$, $T_1$ or $T_2$.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A topology on $X$ is $T_0$ if for every pair of distinct points of $X$
  there is an open set that contains only one of them.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">isT0</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>0</sub>}</span>"</span> <span class="main">[</span>90<span class="main">]</span> 91<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">T<span class="hidden">⇩</span><sub>0</sub>}</span></span> <span class="main">≡</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span>  <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span><span class="main">)</span> <span class="main">⟶</span> 
  <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">y</span><span class="main">∉</span><span class="bound">U</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">y</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">x</span><span class="main">∉</span><span class="bound">U</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A topology is $T_1$ if for every such pair there exist an open set that 
  contains the first point but not the second.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">isT1</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>1</sub>}</span>"</span> <span class="main">[</span>90<span class="main">]</span> 91<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">T<span class="hidden">⇩</span><sub>1</sub>}</span></span> <span class="main">≡</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span>  <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span><span class="main">)</span> <span class="main">⟶</span> 
  <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">y</span><span class="main">∉</span><span class="bound">U</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A topology is $T_2$ (Hausdorff) if for every pair of points there exist a 
  pair of disjoint open sets each containing one of the points. 
  This is an important class of topological spaces. In particular, metric 
  spaces are Hausdorff.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">isT2</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>2</sub>}</span>"</span> <span class="main">[</span>90<span class="main">]</span> 91<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">T<span class="hidden">⇩</span><sub>2</sub>}</span></span> <span class="main">≡</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span>  <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span><span class="main">)</span> <span class="main">⟶</span>
  <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">.</span> <span class="main">∃</span><span class="bound">V</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">y</span><span class="main">∈</span><span class="bound">V</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a topology is $T_1$ then it is $T_0$. 
  We don't really assume here that $T$ is a topology on $X$. 
  Instead, we prove the relation between isT0 condition and isT1.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> T1_is_T0<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>1</sub>}</span>"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>0</sub>}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span> <span class="main">⟶</span> 
    <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">y</span><span class="main">∉</span><span class="bound">U</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> isT1_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span> <span class="main">⟶</span> 
    <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">y</span><span class="main">∉</span><span class="bound">U</span> <span class="main">∨</span> <span class="bound">y</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">x</span><span class="main">∉</span><span class="bound">U</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>0</sub>}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> isT0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If a topology is $T_2$ then it is $T_1$.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> T2_is_T1<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>2</sub>}</span>"</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>1</sub>}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">≠</span><span class="skolem">y</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="main">∃</span><span class="bound">V</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="skolem">y</span><span class="main">∈</span><span class="bound">V</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">=</span><span class="main">0</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> isT2_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="skolem">y</span><span class="main">∉</span><span class="bound">U</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">∧</span>  <span class="bound">x</span><span class="main">≠</span><span class="bound">y</span> <span class="main">⟶</span> 
      <span class="main">(</span><span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">y</span><span class="main">∉</span><span class="bound">U</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>1</sub>}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> isT1_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In a $T_0$ space two points that can not be separated 
  by an open set are equal. Proof by contradiction.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_1_L1<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">T<span class="hidden">⇩</span><sub>0</sub>}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="main">(</span><span class="free">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">⟷</span> <span class="free">y</span><span class="main">∈</span><span class="bound">U</span><span class="main">)</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">≠</span><span class="free">y</span>"</span></span>
    <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="free">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="free">y</span><span class="main">∉</span><span class="bound">U</span> <span class="main">∨</span> <span class="free">y</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="free">x</span><span class="main">∉</span><span class="bound">U</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> isT0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">with</span></span> A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Bases and subbases.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Sometimes it is convenient to talk about topologies in terms of their bases
  and subbases. These are certain collections of open sets that define
  the whole topology.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A base of topology is a collection of open sets such that every 
  open set is a union of the sets from the base.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsAbaseFor</span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span>"</span> 65<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span> 
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">a</span></span> <span class="keyword1"><span class="free">base</span></span> <span class="keyword1"><span class="free">for}</span></span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">⊆</span><span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">=</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A subbase is a collection 
  of open sets such that finite intersection of those sets form a base.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">IsAsubBaseFor</span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">subbase</span> <span class="keyword1">for}</span>"</span> 65<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="keyword1"><span class="free">{is</span></span> <span class="keyword1"><span class="free">a</span></span> <span class="keyword1"><span class="free">subbase</span></span> <span class="keyword1"><span class="free">for}</span></span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">≡</span> 
  <span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">⊆</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">∧</span> <span class="main">{</span><span class="main">⋂</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> FinPow<span class="main">(</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span><span class="main">}</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Below we formulate a condition that we will prove to be necessary and 
  sufficient for a collection $B$ of open sets to form a base. 
  It says that for any two sets $U,V$ from the collection $B$ we can
  find a point $x\in U\cap V$ with a neighboorhod 
  from $B$ contained in $U\cap V$.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="entity">SatisfiesBaseCondition</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span> <span class="main">[</span>50<span class="main">]</span> 50<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="keyword1"><span class="free">{satisfies</span></span> <span class="keyword1"><span class="free">the</span></span> <span class="keyword1"><span class="free">base</span></span> <span class="keyword1"><span class="free">condition}</span></span> <span class="main">≡</span> 
  <span class="main">∀</span><span class="bound">U</span> <span class="bound">V</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">U</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">B</span></span></span> <span class="main">∧</span> <span class="bound">V</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span><span class="bound">x</span> <span class="main">∈</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free"><span class="bound"><span class="entity">B</span></span></span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">)</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A collection that is closed with respect to intersection
  satisfies the base condition.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> inter_closed_base<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span><span class="main">(</span><span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>  <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span> 
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span>
      <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Each open set is a union of some sets from the base.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_2_L1<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>  <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">.</span> <span class="free">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">A</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Elements of base are open.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> base_sets_open<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="main">∈</span> <span class="free">B</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A base defines topology uniquely.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> same_base_same_top<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">S</span>"</span></span> 
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">=</span> <span class="free">S</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Every point from an open set has a neighboorhood from the base
  that is contained in the set.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> point_open_base_neigh<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="free">U</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">V</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="bound">V</span><span class="main">⊆</span><span class="free">U</span> <span class="main">∧</span> <span class="free">x</span><span class="main">∈</span><span class="bound">V</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_2_L1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">with</span></span> A3 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span><span class="main">∈</span><span class="skolem">A</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">∈</span><span class="skolem">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="free">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A criterion for a collection to be a base for a topology
  that is a slight reformulation of the definition. The only thing
  different that in the definition is that we assume only that
  every open set is a union of some sets from the base. The definition
  requires also the opposite inclusion that every union of the 
  sets from the base is open, but that we can prove if we assume that
  $T$ is a topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> is_a_base_criterion<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">⊆</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">T</span><span class="main">.</span> <span class="main">∃</span><span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">.</span> <span class="bound">V</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">A</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="main">⊆</span> <span class="free">T</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="free">B</span> <span class="main">⊆</span> <span class="free">T</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> A1 <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">=</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>
    
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹A necessary condition for a collection of sets to be a base for some 
  topology : every point in the intersection
  of two sets in the base has a neighboorhood from the base contained
  in the intersection.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_2_L2<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span><span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">T</span><span class="main">.</span> <span class="bound">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span> <span class="main">∧</span> <span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="bound">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="main">∈</span><span class="free">B</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">W</span><span class="main">∈</span><span class="free">B</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">V</span><span class="main">∩</span><span class="free">W</span><span class="main">.</span> <span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span> <span class="main">⊆</span> <span class="free">V</span> <span class="main">∩</span> <span class="free">W</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">T</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
    D1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="skolem">T</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">⊆</span> <span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="main">∈</span><span class="skolem">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">W</span><span class="main">∈</span><span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> D1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">.</span> <span class="free">V</span><span class="main">∩</span><span class="free">W</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">A</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def Top_1_2_L1
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">A</span> <span class="main">⊆</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∩</span> <span class="free">W</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span> <span class="bound">x</span> <span class="main">∈</span> <span class="free">V</span><span class="main">∩</span><span class="free">W</span><span class="main">.</span> <span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span> <span class="main">⊆</span> <span class="free">V</span> <span class="main">∩</span> <span class="free">W</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We will construct a topology as the collection of unions of (would-be)
  base. First we prove that if the collection of sets satisfies the 
  condition we want to show to be sufficient, the the intersection belongs
  to what we will define as topology (am I clear here?). Having this fact 
  ready simplifies the proof of the next lemma. There is not much topology
  here, just some set theory.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_2_L3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span> <span class="free">V</span><span class="main">∩</span><span class="free">W</span> <span class="main">.</span> <span class="main">∃</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span> <span class="main">⊆</span> <span class="free">V</span><span class="main">∩</span><span class="free">W</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="main">∩</span><span class="free">W</span> <span class="main">∈</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?A</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="bound">x</span><span class="main">∈</span><span class="free">V</span><span class="main">∩</span><span class="free">W</span><span class="main">.</span> <span class="main">{</span><span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">.</span> <span class="bound">x</span><span class="main">∈</span><span class="bound">U</span> <span class="main">∧</span> <span class="bound">U</span> <span class="main">⊆</span> <span class="free">V</span><span class="main">∩</span><span class="free">W</span><span class="main">}</span>"</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="main">∩</span><span class="free">W</span> <span class="main">=</span> <span class="main">⋃</span><span class="var">?A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The next lemma is needed when proving that the would-be topology is
  closed with respect to taking intersections. We show here that intersection
  of two sets from this (would-be) topology can be written as union of sets 
  from the topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_2_L4<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span>  <span class="quoted"><span class="quoted">"<span class="free">U<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∈</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="free">U<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">∈</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">C</span><span class="main">.</span> <span class="bound">C</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span> <span class="main">∧</span> <span class="free">U<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∩</span><span class="free">U<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">C</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="skolem"><span class="skolem">A<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> 
    D1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">A<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">U<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">A<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">U<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A<span class="hidden">⇩</span><sub>2</sub></span>"</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?C</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">A<span class="hidden">⇩</span><sub>1</sub></span><span class="main">.</span><span class="main">{</span><span class="bound">U</span><span class="main">∩</span><span class="bound">V</span><span class="main">.</span> <span class="bound">V</span><span class="main">∈</span><span class="skolem">A<span class="hidden">⇩</span><sub>2</sub></span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> D1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">A<span class="hidden">⇩</span><sub>1</sub></span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">B</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">V</span><span class="main">∈</span><span class="skolem">A<span class="hidden">⇩</span><sub>2</sub></span><span class="main">.</span> <span class="bound">V</span><span class="main">∈</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?C</span> <span class="main">⊆</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span> <span class="main">.</span> <span class="bound">A</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_2_L3 SatisfiesBaseCondition_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> D1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">U<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∩</span> <span class="free">U<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">=</span> <span class="main">⋃</span><span class="var">?C</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If $B$ satisfies the base condition, then the collection of unions
  of sets from $B$ is a topology and $B$ is a base for this topology.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Top_1_2_T1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{satisfies</span> <span class="keyword1">the</span> <span class="keyword1">base</span> <span class="keyword1">condition}</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="main">=</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">A</span><span class="main">.</span> <span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword1"><span class="command">have</span></span> I<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">C</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="bound">C</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">C</span> <span class="keyword3"><span class="command">assume</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Q</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span> <span class="main">{</span><span class="main">⋃</span><span class="main">{</span><span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">A</span><span class="main">}</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="skolem">C</span><span class="main">}</span>"</span></span>
        <span class="keyword1"><span class="command">from</span></span> A2 A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="skolem">C</span><span class="main">.</span> <span class="main">∃</span><span class="bound">A</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">B</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">A</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?Q</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">C</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ZF1_1_L10 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="var">?Q</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="skolem">C</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">C</span><span class="main">∈</span>Pow<span class="main">(</span><span class="free">T</span><span class="main">)</span><span class="main">.</span> <span class="main">⋃</span><span class="bound">C</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">V</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="skolem">V</span> <span class="keyword3"><span class="command">assume</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
        <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">C</span><span class="main">.</span><span class="main">(</span><span class="bound">C</span> <span class="main">⊆</span> <span class="free">T</span> <span class="main">∧</span> <span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">C</span><span class="main">)</span>"</span></span>
        <span class="keyword1"><span class="command">using</span></span> Top_1_2_L4 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">C</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">C</span> <span class="main">⊆</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">C</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">with</span></span> I <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∩</span><span class="skolem">V</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="main">∀</span> <span class="bound">V</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="bound">U</span><span class="main">∩</span><span class="bound">V</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="main">⊆</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The carrier of the base and topology are the same.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_2_L5<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span><span class="free">T</span> <span class="main">=</span> <span class="main">⋃</span><span class="free">B</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If $B$ is a base for $T$, then $T$ is the smallest topology containing $B$.
›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> base_smallest_top<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="main">⊆</span><span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">T</span><span class="main">⊆</span><span class="free">S</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">B<span class="hidden">⇩</span><sub>U</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B<span class="hidden">⇩</span><sub>U</sub></span> <span class="main">⊆</span> <span class="free">B</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">B<span class="hidden">⇩</span><sub>U</sub></span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A3 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">B<span class="hidden">⇩</span><sub>U</sub></span> <span class="main">⊆</span> <span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> 
  <span class="keyword1"><span class="command">with</span></span> A2 <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">B<span class="hidden">⇩</span><sub>U</sub></span>›</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹If $B$ is a base for $T$ and $B$ is a topology, then $B=T$.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> base_topology<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="main">=</span><span class="free">T</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> assms base_sets_open base_smallest_top <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> 

<span class="keyword1"><span class="command">subsection</span></span><span class="quoted"><span class="plain_text">‹Product topology›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹In this section we consider a topology defined on a product of two sets.›</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Given two topological spaces we can define a topology on the product of 
  the carriers such that the cartesian products of the sets of the topologies 
  are a base for the product topology. Recall that for two collections $S,T$ 
  of sets the product collection
  is defined (in <span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>ZF1.thy›</span></span></span></span>) as the collections of cartesian 
  products $A\times B$, where $A\in S, B\in T$.›</span></span>

<span class="keyword1"><span class="command">definition</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">ProductTopology</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">S</span></span></span><span class="main">)</span> <span class="main">≡</span> <span class="main">{</span><span class="main">⋃</span><span class="bound">W</span><span class="main">.</span> <span class="bound">W</span> <span class="main">∈</span> Pow<span class="main">(</span>ProductCollection<span class="main">(</span><span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">S</span></span></span><span class="main">)</span><span class="main">)</span><span class="main">}</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The product collection satisfies the base condition.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> Top_1_4_L1<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">∈</span> ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">B</span> <span class="main">∈</span> ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="main">(</span><span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span><span class="main">.</span> <span class="main">∃</span><span class="bound">W</span><span class="main">∈</span>ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="free">A</span> <span class="main">∩</span> <span class="free">B</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="free">A</span><span class="main">∩</span><span class="free">B</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="skolem"><span class="skolem">V<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="skolem"><span class="skolem">V<span class="hidden">⇩</span><sub>2</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> 
    D1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∈</span><span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∈</span><span class="free">S</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="free">A</span><span class="main">=</span><span class="skolem">U<span class="hidden">⇩</span><sub>1</sub></span><span class="main">×</span><span class="skolem">V<span class="hidden">⇩</span><sub>1</sub></span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>2</sub></span><span class="main">∈</span><span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>2</sub></span><span class="main">∈</span><span class="free">S</span>"</span></span>   <span class="quoted"><span class="quoted">"<span class="free">B</span><span class="main">=</span><span class="skolem">U<span class="hidden">⇩</span><sub>2</sub></span><span class="main">×</span><span class="skolem">V<span class="hidden">⇩</span><sub>2</sub></span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> ProductCollection_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?W</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">U<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∩</span><span class="skolem">U<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">×</span> <span class="main">(</span><span class="skolem">V<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∩</span><span class="skolem">V<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 D1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∩</span><span class="skolem">U<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∩</span><span class="skolem">V<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> IsATopology_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?W</span> <span class="main">∈</span> ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> ProductCollection_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A3 D1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span><span class="main">∈</span><span class="var">?W</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="var">?W</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">∩</span><span class="free">B</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">.</span> <span class="main">(</span><span class="bound">W</span> <span class="main">∈</span> ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="free">A</span><span class="main">∩</span><span class="free">B</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span>ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span> <span class="main">⊆</span> <span class="free">A</span> <span class="main">∩</span> <span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The product topology is indeed a topology on the product.›</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Top_1_4_T1<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">⋃</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">×</span> <span class="main">⋃</span><span class="free">S</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword3"><span class="command">show</span></span> 
    <span class="quoted"><span class="quoted">"ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
    <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_4_L1 ProductCollection_def 
      SatisfiesBaseCondition_def ProductTopology_def Top_1_2_T1 
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋃</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="main">=</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">×</span> <span class="main">⋃</span><span class="free">S</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_2_L5 ZF1_1_L6 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Each point of a set open in the product topology has a neighborhood
  which is a cartesian product of open sets.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_top_point_neighb<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> 
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">U</span> <span class="main">∈</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="free">U</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">V</span> <span class="bound">W</span><span class="main">.</span> <span class="bound">V</span><span class="main">∈</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">∈</span><span class="free">S</span> <span class="main">∧</span> <span class="bound">V</span><span class="main">×</span><span class="bound">W</span> <span class="main">⊆</span> <span class="free">U</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">∈</span> <span class="bound">V</span><span class="main">×</span><span class="bound">W</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> 
    <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">with</span></span> A2 A3 <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Z</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
    <span class="quoted"><span class="quoted">"<span class="skolem">Z</span> <span class="main">∈</span> ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Z</span> <span class="main">⊆</span> <span class="free">U</span> <span class="main">∧</span> <span class="free">x</span><span class="main">∈</span><span class="skolem">Z</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> point_open_base_neigh <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">S</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span><span class="quoted"><span class="quoted">" <span class="skolem">V</span><span class="main">×</span><span class="skolem">W</span> <span class="main">⊆</span> <span class="free">U</span> <span class="main">∧</span> <span class="free">x</span> <span class="main">∈</span> <span class="skolem">V</span><span class="main">×</span><span class="skolem">W</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> ProductCollection_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Products of open sets are open in the product topology.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_open_open_prod<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span><span class="main">∈</span><span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">×</span><span class="free">V</span> <span class="main">∈</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> 
    <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">×</span><span class="free">V</span> <span class="main">∈</span> ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> ProductCollection_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="free">U</span><span class="main">×</span><span class="free">V</span> <span class="main">∈</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> base_sets_open <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Sets that are open in th product topology are contained in the product
  of the carrier.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_open_type<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∈</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">⊆</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">×</span> <span class="main">⋃</span><span class="free">S</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">⊆</span> <span class="main">⋃</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> A1 <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Suppose we have subsets $A\subseteq X, B\subseteq Y$, where
  $X,Y$ are topological spaces with topologies $T,S$. We can the consider
  relative topologies on $T_A, S_B$ on sets $A,B$ and the collection
  of cartesian products of sets open in $T_A, S_B$, (namely 
  $\{U\times V: U\in T_A, V\in S_B\}$. The next lemma states that
  this collection is a base of the product topology on $X\times Y$
  restricted to the product $A\times B$.
›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_restr_base_restr<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> 
  <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">S</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">B</span><span class="main">)</span>
  <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> <span class="main">(</span>ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ℬ</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">S</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?τ</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="var">?τ</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 topology0_def topology0.Top_1_L4
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?ℬ</span> <span class="main">⊆</span> <span class="main">(</span><span class="var">?τ</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="var">?ℬ</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span></span> <span class="skolem"><span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">×</span> <span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
      <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">∈</span> <span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∈</span> <span class="main">(</span><span class="free">S</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">B</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> ProductCollection_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W<span class="hidden">⇩</span><sub>A</sub></span></span> <span class="skolem"><span class="skolem">W<span class="hidden">⇩</span><sub>B</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> 
      <span class="quoted"><span class="quoted">"<span class="skolem">W<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">=</span> <span class="skolem">W<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">∩</span> <span class="free">A</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∈</span> <span class="free">S</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">=</span> <span class="skolem">W<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∩</span> <span class="free">B</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">U<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">×</span> <span class="skolem">U<span class="hidden">⇩</span><sub>B</sub></span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">W<span class="hidden">⇩</span><sub>A</sub></span><span class="main">×</span><span class="skolem">W<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∩</span> <span class="main">(</span><span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 <span class="quoted"><span class="quoted">‹<span class="skolem">W<span class="hidden">⇩</span><sub>A</sub></span> <span class="main">∈</span> <span class="free">T</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">W<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∈</span> <span class="free">S</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W<span class="hidden">⇩</span><sub>A</sub></span><span class="main">×</span><span class="skolem">W<span class="hidden">⇩</span><sub>B</sub></span> <span class="main">∈</span> <span class="var">?τ</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> prod_open_open_prod <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="var">?τ</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">U</span> <span class="main">∈</span> <span class="var">?τ</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">.</span>
    <span class="main">∃</span><span class="bound">C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?ℬ</span><span class="main">)</span><span class="main">.</span> <span class="bound">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">C</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">U</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">∈</span> <span class="var">?τ</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span>"</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">∈</span> <span class="var">?τ</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">∩</span> <span class="main">(</span><span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> RestrictedTo_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> A1 <span class="quoted"><span class="quoted">‹<span class="skolem">W</span> <span class="main">∈</span> <span class="var">?τ</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span></span>  <span class="keyword2"><span class="keyword">where</span></span> 
      <span class="quoted"><span class="quoted">"<span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span> <span class="main">∈</span> Pow<span class="main">(</span>ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span>"</span></span>
       <span class="keyword1"><span class="command">using</span></span> Top_1_4_T1 IsAbaseFor_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?C</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">V</span> <span class="main">∩</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">.</span> <span class="bound">V</span> <span class="main">∈</span> <span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span><span class="main">}</span>"</span></span> 
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?ℬ</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="var">?C</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
      <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">R</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">∈</span> <span class="var">?C</span>"</span></span>
	<span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">∈</span> <span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">V</span> <span class="main">∩</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span>"</span></span>
	  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
	<span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span> <span class="main">∈</span> Pow<span class="main">(</span>ProductCollection<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span></span> <span class="skolem"><span class="skolem">V<span class="hidden">⇩</span><sub>S</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> 
	  <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">∈</span> <span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V<span class="hidden">⇩</span><sub>S</sub></span> <span class="main">∈</span> <span class="free">S</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">V</span> <span class="main">=</span> <span class="skolem">V<span class="hidden">⇩</span><sub>T</sub></span> <span class="main">×</span> <span class="skolem">V<span class="hidden">⇩</span><sub>S</sub></span>"</span></span>
	  <span class="keyword1"><span class="command">using</span></span> ProductCollection_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
	<span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">R</span> <span class="main">=</span> <span class="skolem">V</span> <span class="main">∩</span> <span class="free">A</span><span class="main">×</span><span class="free">B</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">∈</span> <span class="var">?ℬ</span>"</span></span>
	  <span class="keyword1"><span class="command">using</span></span> ProductCollection_def RestrictedTo_def
	  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="var">?C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?ℬ</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">U</span> <span class="main">=</span> <span class="skolem">W</span> <span class="main">∩</span> <span class="main">(</span><span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">W</span> <span class="main">=</span> <span class="main">⋃</span><span class="skolem">A<span class="hidden">⇩</span><sub>W</sub></span>›</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="var">?C</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">C</span> <span class="main">∈</span> Pow<span class="main">(</span><span class="var">?ℬ</span><span class="main">)</span><span class="main">.</span> <span class="skolem">U</span> <span class="main">=</span> <span class="main">⋃</span><span class="bound">C</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> is_a_base_criterion<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>
    
<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We can commute taking restriction (relative topology) and
  product topology. The reason the two topologies are the same is
  that they have the same base.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_top_restr_comm<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span>
  <span class="quoted"><span class="quoted">"ProductTopology<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span><span class="free">S</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">B</span><span class="main">)</span> <span class="main">=</span>
  ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="main">(</span><span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ℬ</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"ProductCollection<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span> <span class="free">S</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">B</span><span class="main">)</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span>
    <span class="quoted"><span class="quoted">"<span class="var">?ℬ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> ProductTopology<span class="main">(</span><span class="free">T</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">A</span><span class="main">,</span><span class="free">S</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="free">B</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> topology0_def topology0.Top_1_L4 Top_1_4_T1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> 
    <span class="quoted"><span class="quoted">"<span class="var">?ℬ</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">base</span> <span class="keyword1">for}</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span> <span class="keyword1">{restricted</span> <span class="keyword1">to}</span> <span class="main">(</span><span class="free">A</span><span class="main">×</span><span class="free">B</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">using</span></span> prod_restr_base_restr <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> same_base_same_top<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Projection of a section of an open set is open.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_sec_open1<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∈</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">S</span><span class="main">.</span> <span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span><span class="main">}</span> <span class="main">∈</span> <span class="free">S</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?A</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">S</span><span class="main">.</span> <span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="bound">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">y</span><span class="main">∈</span><span class="var">?A</span><span class="main">.</span><span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">y</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">⊆</span><span class="var">?A</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span> <span class="main">∈</span> <span class="var">?A</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">×</span> <span class="main">⋃</span><span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> prod_open_type <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span> <span class="bound">W</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">∈</span><span class="free">S</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">×</span><span class="bound">W</span> <span class="main">⊆</span> <span class="free">V</span> <span class="main">∧</span> <span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="bound">U</span><span class="main">×</span><span class="bound">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> prod_top_point_neighb<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">×</span><span class="skolem">W</span> <span class="main">⊆</span> <span class="free">V</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="free">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">×</span><span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">S</span><span class="main">.</span> <span class="main">(</span><span class="skolem">y</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">⊆</span><span class="var">?A</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> prod_open_type section_proj
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> topology0.open_neigh_open<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Projection of a section of an open set is open. This is dual of 
<span class="antiquoted"><span class="raw_text"><span class="antiquoted"><span class="raw_text"><span class="operator"><span class="operator">‹</span></span>prod_sec_open1›</span></span></span></span> with a very similar proof.›</span></span>

<span class="keyword1"><span class="command">lemma</span></span> prod_sec_open2<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> A1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">T</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S</span> <span class="keyword1">{is</span> <span class="keyword1">a</span> <span class="keyword1">topology}</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  A2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">V</span> <span class="main">∈</span> ProductTopology<span class="main">(</span><span class="free">T</span><span class="main">,</span><span class="free">S</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> A3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span><span class="main">}</span> <span class="main">∈</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?A</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="bound">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span><span class="main">.</span> <span class="main">⟨</span><span class="bound">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> A1 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"topology0<span class="main">(</span><span class="free">T</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> topology0_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">x</span><span class="main">∈</span><span class="var">?A</span><span class="main">.</span><span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">⊆</span><span class="var">?A</span><span class="main">)</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="var">?A</span>"</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span> <span class="main">×</span> <span class="main">⋃</span><span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> prod_open_type <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">∈</span> <span class="main">⋃</span><span class="free">S</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">from</span></span> A1 A2 <span class="quoted"><span class="quoted">‹<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="free">V</span>›</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">U</span> <span class="bound">W</span><span class="main">.</span> <span class="bound">U</span><span class="main">∈</span><span class="free">T</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">∈</span><span class="free">S</span> <span class="main">∧</span> <span class="bound">U</span><span class="main">×</span><span class="bound">W</span> <span class="main">⊆</span> <span class="free">V</span> <span class="main">∧</span> <span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="bound">U</span><span class="main">×</span><span class="bound">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> prod_top_point_neighb<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">U</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span>  <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">∈</span><span class="free">T</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">W</span><span class="main">∈</span><span class="free">S</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">U</span><span class="main">×</span><span class="skolem">W</span> <span class="main">⊆</span> <span class="free">V</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">⟨</span><span class="skolem">x</span><span class="main">,</span><span class="free">y</span><span class="main">⟩</span> <span class="main">∈</span> <span class="skolem">U</span><span class="main">×</span><span class="skolem">W</span>"</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">with</span></span> A1 A2 <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">∃</span><span class="bound">W</span><span class="main">∈</span><span class="free">T</span><span class="main">.</span> <span class="main">(</span><span class="skolem">x</span><span class="main">∈</span><span class="bound">W</span> <span class="main">∧</span> <span class="bound">W</span><span class="main">⊆</span><span class="var">?A</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> prod_open_type section_proj
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> topology0.open_neigh_open<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</body>

</html>